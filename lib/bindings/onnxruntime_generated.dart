// ignore_for_file: always_specify_types
// ignore_for_file: camel_case_types
// ignore_for_file: non_constant_identifier_names

// AUTO GENERATED FILE, DO NOT EDIT.
//
// Generated by `package:ffigen`.
// ignore_for_file: type=lint, unused_import
import 'dart:ffi' as ffi;

/// Bindings for `headers/onnxruntime_c_api.h`.
/// Regenerate bindings with `dart run ffigen --config ffigen.yaml`.
///
class OnnxRuntimeBindings {
  /// Holds the symbol lookup function.
  final ffi.Pointer<T> Function<T extends ffi.NativeType>(String symbolName)
  _lookup;

  /// The symbols are looked up in [dynamicLibrary].
  OnnxRuntimeBindings(ffi.DynamicLibrary dynamicLibrary)
    : _lookup = dynamicLibrary.lookup;

  /// The symbols are looked up with [lookup].
  OnnxRuntimeBindings.fromLookup(
    ffi.Pointer<T> Function<T extends ffi.NativeType>(String symbolName) lookup,
  ) : _lookup = lookup;

  /// \brief The Onnxruntime library's entry point to access the C API
  ///
  /// Call this to get the a pointer to an ::OrtApiBase
  ffi.Pointer<OrtApiBase> OrtGetApiBase() {
    return _OrtGetApiBase();
  }

  late final _OrtGetApiBasePtr =
      _lookup<ffi.NativeFunction<ffi.Pointer<OrtApiBase> Function()>>(
        'OrtGetApiBase',
      );
  late final _OrtGetApiBase =
      _OrtGetApiBasePtr.asFunction<ffi.Pointer<OrtApiBase> Function()>();

  /// This is the old way to add the CUDA provider to the session, please use SessionOptionsAppendExecutionProvider_CUDA above to access the latest functionality
  /// This function always exists, but will only succeed if Onnxruntime was built with CUDA support and the CUDA provider shared library exists
  ///
  /// \param device_id CUDA device id, starts from zero.
  OrtStatusPtr OrtSessionOptionsAppendExecutionProvider_CUDA(
    ffi.Pointer<OrtSessionOptions> options,
    int device_id,
  ) {
    return _OrtSessionOptionsAppendExecutionProvider_CUDA(options, device_id);
  }

  late final _OrtSessionOptionsAppendExecutionProvider_CUDAPtr =
      _lookup<
        ffi.NativeFunction<
          OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, ffi.Int)
        >
      >('OrtSessionOptionsAppendExecutionProvider_CUDA');
  late final _OrtSessionOptionsAppendExecutionProvider_CUDA =
      _OrtSessionOptionsAppendExecutionProvider_CUDAPtr.asFunction<
        OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, int)
      >();

  /// This is the old way to add the ROCm provider to the session, please use
  /// SessionOptionsAppendExecutionProvider_ROCM above to access the latest functionality
  /// This function always exists, but will only succeed if Onnxruntime was built with
  /// HIP support and the ROCm provider shared library exists
  ///
  /// \param device_id HIP device id, starts from zero.
  OrtStatusPtr OrtSessionOptionsAppendExecutionProvider_ROCM(
    ffi.Pointer<OrtSessionOptions> options,
    int device_id,
  ) {
    return _OrtSessionOptionsAppendExecutionProvider_ROCM(options, device_id);
  }

  late final _OrtSessionOptionsAppendExecutionProvider_ROCMPtr =
      _lookup<
        ffi.NativeFunction<
          OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, ffi.Int)
        >
      >('OrtSessionOptionsAppendExecutionProvider_ROCM');
  late final _OrtSessionOptionsAppendExecutionProvider_ROCM =
      _OrtSessionOptionsAppendExecutionProvider_ROCMPtr.asFunction<
        OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, int)
      >();

  /// This is the old way to add the MIGraphX provider to the session, please use
  /// SessionOptionsAppendExecutionProvider_MIGraphX above to access the latest functionality
  /// This function always exists, but will only succeed if Onnxruntime was built with
  /// HIP support and the MIGraphX provider shared library exists
  ///
  /// \param device_id HIP device id, starts from zero.
  OrtStatusPtr OrtSessionOptionsAppendExecutionProvider_MIGraphX(
    ffi.Pointer<OrtSessionOptions> options,
    int device_id,
  ) {
    return _OrtSessionOptionsAppendExecutionProvider_MIGraphX(
      options,
      device_id,
    );
  }

  late final _OrtSessionOptionsAppendExecutionProvider_MIGraphXPtr =
      _lookup<
        ffi.NativeFunction<
          OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, ffi.Int)
        >
      >('OrtSessionOptionsAppendExecutionProvider_MIGraphX');
  late final _OrtSessionOptionsAppendExecutionProvider_MIGraphX =
      _OrtSessionOptionsAppendExecutionProvider_MIGraphXPtr.asFunction<
        OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, int)
      >();

  /// This is the old way to add the oneDNN provider to the session, please use
  /// SessionOptionsAppendExecutionProvider_oneDNN above to access the latest functionality
  /// This function always exists, but will only succeed if Onnxruntime was built with
  /// oneDNN support and the oneDNN provider shared library exists
  ///
  /// \param use_arena zero: false. non-zero: true.
  OrtStatusPtr OrtSessionOptionsAppendExecutionProvider_Dnnl(
    ffi.Pointer<OrtSessionOptions> options,
    int use_arena,
  ) {
    return _OrtSessionOptionsAppendExecutionProvider_Dnnl(options, use_arena);
  }

  late final _OrtSessionOptionsAppendExecutionProvider_DnnlPtr =
      _lookup<
        ffi.NativeFunction<
          OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, ffi.Int)
        >
      >('OrtSessionOptionsAppendExecutionProvider_Dnnl');
  late final _OrtSessionOptionsAppendExecutionProvider_Dnnl =
      _OrtSessionOptionsAppendExecutionProvider_DnnlPtr.asFunction<
        OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, int)
      >();

  /// This is the old way to add the TensorRT provider to the session, please use SessionOptionsAppendExecutionProvider_TensorRT_V2 above to access the latest functionality
  /// This function always exists, but will only succeed if Onnxruntime was built with TensorRT support and the TensorRT provider shared library exists
  ///
  /// \param device_id CUDA device id, starts from zero.
  OrtStatusPtr OrtSessionOptionsAppendExecutionProvider_Tensorrt(
    ffi.Pointer<OrtSessionOptions> options,
    int device_id,
  ) {
    return _OrtSessionOptionsAppendExecutionProvider_Tensorrt(
      options,
      device_id,
    );
  }

  late final _OrtSessionOptionsAppendExecutionProvider_TensorrtPtr =
      _lookup<
        ffi.NativeFunction<
          OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, ffi.Int)
        >
      >('OrtSessionOptionsAppendExecutionProvider_Tensorrt');
  late final _OrtSessionOptionsAppendExecutionProvider_Tensorrt =
      _OrtSessionOptionsAppendExecutionProvider_TensorrtPtr.asFunction<
        OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions>, int)
      >();
}

/// Copied from TensorProto::DataType
/// Currently, Ort doesn't support complex64, complex128
enum ONNXTensorElementDataType {
  ONNX_TENSOR_ELEMENT_DATA_TYPE_UNDEFINED(0),

  /// maps to c type float
  ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT(1),

  /// maps to c type uint8_t
  ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT8(2),

  /// maps to c type int8_t
  ONNX_TENSOR_ELEMENT_DATA_TYPE_INT8(3),

  /// maps to c type uint16_t
  ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT16(4),

  /// maps to c type int16_t
  ONNX_TENSOR_ELEMENT_DATA_TYPE_INT16(5),

  /// maps to c type int32_t
  ONNX_TENSOR_ELEMENT_DATA_TYPE_INT32(6),

  /// maps to c type int64_t
  ONNX_TENSOR_ELEMENT_DATA_TYPE_INT64(7),

  /// maps to c++ type std::string
  ONNX_TENSOR_ELEMENT_DATA_TYPE_STRING(8),
  ONNX_TENSOR_ELEMENT_DATA_TYPE_BOOL(9),
  ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT16(10),

  /// maps to c type double
  ONNX_TENSOR_ELEMENT_DATA_TYPE_DOUBLE(11),

  /// maps to c type uint32_t
  ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT32(12),

  /// maps to c type uint64_t
  ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT64(13),

  /// complex with float32 real and imaginary components
  ONNX_TENSOR_ELEMENT_DATA_TYPE_COMPLEX64(14),

  /// complex with float64 real and imaginary components
  ONNX_TENSOR_ELEMENT_DATA_TYPE_COMPLEX128(15),

  /// Non-IEEE floating-point format based on IEEE754 single-precision
  ONNX_TENSOR_ELEMENT_DATA_TYPE_BFLOAT16(16),

  /// Non-IEEE floating-point format based on IEEE754 single-precision
  ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT8E4M3FN(17),

  /// Non-IEEE floating-point format based on IEEE754 single-precision
  ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT8E4M3FNUZ(18),

  /// Non-IEEE floating-point format based on IEEE754 single-precision
  ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT8E5M2(19),

  /// Non-IEEE floating-point format based on IEEE754 single-precision
  ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT8E5M2FNUZ(20),

  /// maps to a pair of packed uint4 values (size == 1 byte)
  ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT4(21),

  /// maps to a pair of packed int4 values (size == 1 byte)
  ONNX_TENSOR_ELEMENT_DATA_TYPE_INT4(22),

  /// maps to a pair of packed float4 values (size == 1 byte)
  ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT4E2M1(23),

  /// maps to 4 packed uint2 values (size == 1 byte)
  ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT2(24),

  /// maps to 4 packed int2 values (size == 1 byte)
  ONNX_TENSOR_ELEMENT_DATA_TYPE_INT2(25);

  final int value;
  const ONNXTensorElementDataType(this.value);

  static ONNXTensorElementDataType fromValue(int value) => switch (value) {
    0 => ONNX_TENSOR_ELEMENT_DATA_TYPE_UNDEFINED,
    1 => ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT,
    2 => ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT8,
    3 => ONNX_TENSOR_ELEMENT_DATA_TYPE_INT8,
    4 => ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT16,
    5 => ONNX_TENSOR_ELEMENT_DATA_TYPE_INT16,
    6 => ONNX_TENSOR_ELEMENT_DATA_TYPE_INT32,
    7 => ONNX_TENSOR_ELEMENT_DATA_TYPE_INT64,
    8 => ONNX_TENSOR_ELEMENT_DATA_TYPE_STRING,
    9 => ONNX_TENSOR_ELEMENT_DATA_TYPE_BOOL,
    10 => ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT16,
    11 => ONNX_TENSOR_ELEMENT_DATA_TYPE_DOUBLE,
    12 => ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT32,
    13 => ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT64,
    14 => ONNX_TENSOR_ELEMENT_DATA_TYPE_COMPLEX64,
    15 => ONNX_TENSOR_ELEMENT_DATA_TYPE_COMPLEX128,
    16 => ONNX_TENSOR_ELEMENT_DATA_TYPE_BFLOAT16,
    17 => ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT8E4M3FN,
    18 => ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT8E4M3FNUZ,
    19 => ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT8E5M2,
    20 => ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT8E5M2FNUZ,
    21 => ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT4,
    22 => ONNX_TENSOR_ELEMENT_DATA_TYPE_INT4,
    23 => ONNX_TENSOR_ELEMENT_DATA_TYPE_FLOAT4E2M1,
    24 => ONNX_TENSOR_ELEMENT_DATA_TYPE_UINT2,
    25 => ONNX_TENSOR_ELEMENT_DATA_TYPE_INT2,
    _ => throw ArgumentError(
      'Unknown value for ONNXTensorElementDataType: $value',
    ),
  };
}

/// Synced with onnx TypeProto oneof
enum ONNXType {
  ONNX_TYPE_UNKNOWN(0),
  ONNX_TYPE_TENSOR(1),
  ONNX_TYPE_SEQUENCE(2),
  ONNX_TYPE_MAP(3),
  ONNX_TYPE_OPAQUE(4),
  ONNX_TYPE_SPARSETENSOR(5),
  ONNX_TYPE_OPTIONAL(6);

  final int value;
  const ONNXType(this.value);

  static ONNXType fromValue(int value) => switch (value) {
    0 => ONNX_TYPE_UNKNOWN,
    1 => ONNX_TYPE_TENSOR,
    2 => ONNX_TYPE_SEQUENCE,
    3 => ONNX_TYPE_MAP,
    4 => ONNX_TYPE_OPAQUE,
    5 => ONNX_TYPE_SPARSETENSOR,
    6 => ONNX_TYPE_OPTIONAL,
    _ => throw ArgumentError('Unknown value for ONNXType: $value'),
  };
}

/// These types are synced with internal
/// SparseFormatFlags
enum OrtSparseFormat {
  ORT_SPARSE_UNDEFINED(0),
  ORT_SPARSE_COO(1),
  ORT_SPARSE_CSRC(2),
  ORT_SPARSE_BLOCK_SPARSE(4);

  final int value;
  const OrtSparseFormat(this.value);

  static OrtSparseFormat fromValue(int value) => switch (value) {
    0 => ORT_SPARSE_UNDEFINED,
    1 => ORT_SPARSE_COO,
    2 => ORT_SPARSE_CSRC,
    4 => ORT_SPARSE_BLOCK_SPARSE,
    _ => throw ArgumentError('Unknown value for OrtSparseFormat: $value'),
  };
}

/// Enum allows to query sparse tensor indices
enum OrtSparseIndicesFormat {
  ORT_SPARSE_COO_INDICES(0),
  ORT_SPARSE_CSR_INNER_INDICES(1),
  ORT_SPARSE_CSR_OUTER_INDICES(2),
  ORT_SPARSE_BLOCK_SPARSE_INDICES(3);

  final int value;
  const OrtSparseIndicesFormat(this.value);

  static OrtSparseIndicesFormat fromValue(int value) => switch (value) {
    0 => ORT_SPARSE_COO_INDICES,
    1 => ORT_SPARSE_CSR_INNER_INDICES,
    2 => ORT_SPARSE_CSR_OUTER_INDICES,
    3 => ORT_SPARSE_BLOCK_SPARSE_INDICES,
    _ => throw ArgumentError(
      'Unknown value for OrtSparseIndicesFormat: $value',
    ),
  };
}

/// \brief Logging severity levels
///
/// In typical API usage, specifying a logging severity level specifies the minimum severity of log messages to show.
enum OrtLoggingLevel {
  /// < Verbose informational messages (least severe).
  ORT_LOGGING_LEVEL_VERBOSE(0),

  /// < Informational messages.
  ORT_LOGGING_LEVEL_INFO(1),

  /// < Warning messages.
  ORT_LOGGING_LEVEL_WARNING(2),

  /// < Error messages.
  ORT_LOGGING_LEVEL_ERROR(3),

  /// < Fatal error messages (most severe).
  ORT_LOGGING_LEVEL_FATAL(4);

  final int value;
  const OrtLoggingLevel(this.value);

  static OrtLoggingLevel fromValue(int value) => switch (value) {
    0 => ORT_LOGGING_LEVEL_VERBOSE,
    1 => ORT_LOGGING_LEVEL_INFO,
    2 => ORT_LOGGING_LEVEL_WARNING,
    3 => ORT_LOGGING_LEVEL_ERROR,
    4 => ORT_LOGGING_LEVEL_FATAL,
    _ => throw ArgumentError('Unknown value for OrtLoggingLevel: $value'),
  };
}

enum OrtErrorCode {
  ORT_OK(0),
  ORT_FAIL(1),
  ORT_INVALID_ARGUMENT(2),
  ORT_NO_SUCHFILE(3),
  ORT_NO_MODEL(4),
  ORT_ENGINE_ERROR(5),
  ORT_RUNTIME_EXCEPTION(6),
  ORT_INVALID_PROTOBUF(7),
  ORT_MODEL_LOADED(8),
  ORT_NOT_IMPLEMENTED(9),
  ORT_INVALID_GRAPH(10),
  ORT_EP_FAIL(11),
  ORT_MODEL_LOAD_CANCELED(12),
  ORT_MODEL_REQUIRES_COMPILATION(13),
  ORT_NOT_FOUND(14);

  final int value;
  const OrtErrorCode(this.value);

  static OrtErrorCode fromValue(int value) => switch (value) {
    0 => ORT_OK,
    1 => ORT_FAIL,
    2 => ORT_INVALID_ARGUMENT,
    3 => ORT_NO_SUCHFILE,
    4 => ORT_NO_MODEL,
    5 => ORT_ENGINE_ERROR,
    6 => ORT_RUNTIME_EXCEPTION,
    7 => ORT_INVALID_PROTOBUF,
    8 => ORT_MODEL_LOADED,
    9 => ORT_NOT_IMPLEMENTED,
    10 => ORT_INVALID_GRAPH,
    11 => ORT_EP_FAIL,
    12 => ORT_MODEL_LOAD_CANCELED,
    13 => ORT_MODEL_REQUIRES_COMPILATION,
    14 => ORT_NOT_FOUND,
    _ => throw ArgumentError('Unknown value for OrtErrorCode: $value'),
  };
}

enum OrtOpAttrType {
  ORT_OP_ATTR_UNDEFINED(0),
  ORT_OP_ATTR_INT(1),
  ORT_OP_ATTR_INTS(2),
  ORT_OP_ATTR_FLOAT(3),
  ORT_OP_ATTR_FLOATS(4),
  ORT_OP_ATTR_STRING(5),
  ORT_OP_ATTR_STRINGS(6),
  ORT_OP_ATTR_GRAPH(7),
  ORT_OP_ATTR_TENSOR(8);

  final int value;
  const OrtOpAttrType(this.value);

  static OrtOpAttrType fromValue(int value) => switch (value) {
    0 => ORT_OP_ATTR_UNDEFINED,
    1 => ORT_OP_ATTR_INT,
    2 => ORT_OP_ATTR_INTS,
    3 => ORT_OP_ATTR_FLOAT,
    4 => ORT_OP_ATTR_FLOATS,
    5 => ORT_OP_ATTR_STRING,
    6 => ORT_OP_ATTR_STRINGS,
    7 => ORT_OP_ATTR_GRAPH,
    8 => ORT_OP_ATTR_TENSOR,
    _ => throw ArgumentError('Unknown value for OrtOpAttrType: $value'),
  };
}

/// \addtogroup Global
/// ONNX Runtime C API
/// @{
/// /
/// // The actual types defined have an Ort prefix
final class OrtEnv extends ffi.Opaque {}

final class OrtStatus extends ffi.Opaque {}

final class OrtMemoryInfo extends ffi.Opaque {}

final class OrtIoBinding extends ffi.Opaque {}

final class OrtSession extends ffi.Opaque {}

final class OrtValue extends ffi.Opaque {}

final class OrtRunOptions extends ffi.Opaque {}

final class OrtTypeInfo extends ffi.Opaque {}

final class OrtTensorTypeAndShapeInfo extends ffi.Opaque {}

final class OrtMapTypeInfo extends ffi.Opaque {}

final class OrtSequenceTypeInfo extends ffi.Opaque {}

final class OrtOptionalTypeInfo extends ffi.Opaque {}

final class OrtSessionOptions extends ffi.Opaque {}

final class OrtCustomOpDomain extends ffi.Opaque {}

final class OrtModelMetadata extends ffi.Opaque {}

final class OrtThreadPoolParams extends ffi.Opaque {}

final class OrtThreadingOptions extends ffi.Opaque {}

final class OrtArenaCfg extends ffi.Opaque {}

final class OrtPrepackedWeightsContainer extends ffi.Opaque {}

final class OrtTensorRTProviderOptionsV2 extends ffi.Opaque {}

final class OrtNvTensorRtRtxProviderOptions extends ffi.Opaque {}

final class OrtCUDAProviderOptionsV2 extends ffi.Opaque {}

final class OrtCANNProviderOptions extends ffi.Opaque {}

final class OrtDnnlProviderOptions extends ffi.Opaque {}

final class OrtOp extends ffi.Opaque {}

final class OrtOpAttr extends ffi.Opaque {}

final class OrtLogger extends ffi.Opaque {}

final class OrtShapeInferContext extends ffi.Opaque {}

final class OrtLoraAdapter extends ffi.Opaque {}

final class OrtValueInfo extends ffi.Opaque {}

final class OrtNode extends ffi.Opaque {}

final class OrtGraph extends ffi.Opaque {}

final class OrtModel extends ffi.Opaque {}

final class OrtModelCompilationOptions extends ffi.Opaque {}

final class OrtHardwareDevice extends ffi.Opaque {}

final class OrtEpDevice extends ffi.Opaque {}

final class OrtKeyValuePairs extends ffi.Opaque {}

final class OrtSyncStream extends ffi.Opaque {}

final class OrtExternalInitializerInfo extends ffi.Opaque {}

final class OrtExternalResourceImporter extends ffi.Opaque {}

/// \brief External memory handle type for importing GPU resources.
///
/// \todo Add OPAQUE_WIN32 for Windows Vulkan-specific memory handles
/// \todo Add POSIX file descriptor (OPAQUE_FD) for Linux Vulkan/CUDA/OpenCL interop
/// \todo Add Linux DMA-BUF file descriptor for embedded GPU memory sharing
///
/// \since Version 1.24.
enum OrtExternalMemoryHandleType {
  /// < Shared HANDLE from ID3D12Device::CreateSharedHandle(resource)
  ORT_EXTERNAL_MEMORY_HANDLE_TYPE_D3D12_RESOURCE(0),

  /// < Shared HANDLE from ID3D12Device::CreateSharedHandle(heap)
  ORT_EXTERNAL_MEMORY_HANDLE_TYPE_D3D12_HEAP(1);

  final int value;
  const OrtExternalMemoryHandleType(this.value);

  static OrtExternalMemoryHandleType fromValue(int value) => switch (value) {
    0 => ORT_EXTERNAL_MEMORY_HANDLE_TYPE_D3D12_RESOURCE,
    1 => ORT_EXTERNAL_MEMORY_HANDLE_TYPE_D3D12_HEAP,
    _ => throw ArgumentError(
      'Unknown value for OrtExternalMemoryHandleType: $value',
    ),
  };
}

/// \brief Descriptor for importing external memory.
///
/// \note The version field must be set to ORT_API_VERSION.
/// This ensures forward compatibility as fields may be added in future versions.
///
/// \since Version 1.24.
final class OrtExternalMemoryDescriptor extends ffi.Struct {
  /// < Must be ORT_API_VERSION
  @ffi.Uint32()
  external int version;

  /// < Type of the external memory handle
  @ffi.UnsignedInt()
  external int handle_typeAsInt;

  OrtExternalMemoryHandleType get handle_type =>
      OrtExternalMemoryHandleType.fromValue(handle_typeAsInt);

  /// < Platform-specific handle (e.g., Windows HANDLE)
  external ffi.Pointer<ffi.Void> native_handle;

  /// < Total size in bytes of the external allocation
  @ffi.Size()
  external int size_bytes;

  /// < Offset in bytes into the allocation (default 0).
  /// Base offset for the imported memory region.
  @ffi.Size()
  external int offset_bytes;
}

/// \brief Base struct for imported external memory handles.
///
/// EPs derive from this struct to add EP-specific fields (e.g., CUdeviceptr for CUDA).
/// EP is responsible for creating and releasing instances of the derived type.
///
/// Example derived type for CUDA EP:
/// \code
/// struct MyCudaExternalMemoryHandle : OrtExternalMemoryHandle {
/// CUexternalMemory ext_memory;
/// CUdeviceptr mapped_ptr;
/// bool is_dedicated;
/// };
/// \endcode
///
/// \since Version 1.24.
final class OrtExternalMemoryHandle extends ffi.Struct {
  /// < Must be ORT_API_VERSION
  @ffi.Uint32()
  external int version;

  /// < EP device that created this handle
  external ffi.Pointer<OrtEpDevice> ep_device;

  /// < External memory descriptor
  external OrtExternalMemoryDescriptor descriptor;

  /// \brief Release callback for this handle. EP sets this to its release function.
  ///
  /// ORT calls this when ReleaseExternalMemoryHandle is invoked. The EP's callback
  /// should cast the handle to its derived type and delete it.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtExternalMemoryHandle> handle)
    >
  >
  Release;
}

/// \brief External semaphore type for GPU synchronization.
///
/// \since Version 1.24.
enum OrtExternalSemaphoreType {
  /// < Shared HANDLE from ID3D12Device::CreateSharedHandle(fence)
  ORT_EXTERNAL_SEMAPHORE_D3D12_FENCE(0);

  final int value;
  const OrtExternalSemaphoreType(this.value);

  static OrtExternalSemaphoreType fromValue(int value) => switch (value) {
    0 => ORT_EXTERNAL_SEMAPHORE_D3D12_FENCE,
    _ => throw ArgumentError(
      'Unknown value for OrtExternalSemaphoreType: $value',
    ),
  };
}

/// \brief Descriptor for importing external semaphores.
///
/// \note The version field must be set to ORT_API_VERSION.
/// This ensures forward compatibility as fields may be added in future versions.
///
/// \since Version 1.24.
final class OrtExternalSemaphoreDescriptor extends ffi.Struct {
  /// < Must be ORT_API_VERSION
  @ffi.Uint32()
  external int version;

  /// < Type of the external semaphore
  @ffi.UnsignedInt()
  external int typeAsInt;

  OrtExternalSemaphoreType get type =>
      OrtExternalSemaphoreType.fromValue(typeAsInt);

  /// < Platform-specific handle (e.g., Windows HANDLE)
  external ffi.Pointer<ffi.Void> native_handle;
}

/// \brief Base struct for imported external semaphore handles.
///
/// EPs derive from this struct to add EP-specific fields (e.g., CUexternalSemaphore for CUDA).
/// EP is responsible for creating and releasing instances of the derived type.
///
/// Example derived type for CUDA EP:
/// \code
/// struct MyCudaExternalSemaphoreHandle : OrtExternalSemaphoreHandle {
/// CUexternalSemaphore ext_semaphore;
/// };
/// \endcode
///
/// \since Version 1.24.
final class OrtExternalSemaphoreHandle extends ffi.Struct {
  /// < Must be ORT_API_VERSION
  @ffi.Uint32()
  external int version;

  /// < EP device that created this handle
  external ffi.Pointer<OrtEpDevice> ep_device;

  /// < External semaphore descriptor
  external OrtExternalSemaphoreDescriptor descriptor;

  /// \brief Release callback for this handle. EP sets this to its release function.
  ///
  /// ORT calls this when ReleaseExternalSemaphoreHandle is invoked. The EP's callback
  /// should cast the handle to its derived type and delete it.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtExternalSemaphoreHandle> handle)
    >
  >
  Release;
}

final class OrtDeviceEpIncompatibilityDetails extends ffi.Opaque {}

final class OrtEpAssignedSubgraph extends ffi.Opaque {}

final class OrtEpAssignedNode extends ffi.Opaque {}

typedef OrtStatusPtr = ffi.Pointer<OrtStatus>;

/// \brief Memory allocation interface
///
/// Structure of function pointers that defines a memory allocator. This can be created and filled in by the user for custom allocators.
///
/// When an allocator is passed to any function, be sure that the allocator object is not destroyed until the last allocated object using it is freed.
final class OrtAllocator extends ffi.Struct {
  /// < Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int version;

  /// Returns a pointer to an allocated block of `size` bytes
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Void> Function(
        ffi.Pointer<OrtAllocator> this_,
        ffi.Size size,
      )
    >
  >
  Alloc;

  /// Free a block of memory previously allocated with OrtAllocator::Alloc
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtAllocator> this_,
        ffi.Pointer<ffi.Void> p,
      )
    >
  >
  Free;

  /// Return a pointer to an ::OrtMemoryInfo that describes this allocator
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtMemoryInfo> Function(ffi.Pointer<OrtAllocator> this_)
    >
  >
  Info;

  /// @brief Optional allocation function to use for memory allocations made during session initialization.
  /// Use this function if you want to separate allocations made by ORT during Run() calls from
  /// those made during session initialization. This allows for separate memory management strategies for these
  /// allocations.
  ///
  /// \return pointer to an allocated block of `size` bytes. nullptr if size was 0 or allocation failed.
  ///
  /// \since 1.18
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Void> Function(
        ffi.Pointer<OrtAllocator> this_,
        ffi.Size size,
      )
    >
  >
  Reserve;

  /// @brief Function used to get the statistics of the allocator.
  ///
  /// Return a pointer to the OrtKeyValuePairs structure that contains the statistics of the allocator.
  /// The user should call OrtApi::ReleaseKeyValuePairs when done.
  ///
  /// Current known keys are:
  /// - Limit: Bytes limit of the allocator. -1 if no limit is set.
  /// - InUse: Number of bytes in use.
  /// - TotalAllocated: The total number of allocated bytes by the allocator.
  /// - MaxInUse: The maximum bytes in use.
  /// - NumAllocs: Number of allocations.
  /// - NumReserves: Number of reserves. (Number of calls to Reserve() in arena-based allocators)
  /// - NumArenaExtensions: Number of arena extensions (Relevant only for arena based allocators)
  /// - NumArenaShrinkages: Number of arena shrinkages (Relevant only for arena based allocators)
  /// - MaxAllocSize: The max single allocation seen.
  ///
  /// The allocator is free to add other entries as appropriate.
  ///
  /// \note Implementation of this function is optional and GetStats may be set to a nullptr.
  /// If the OrtAllocator is wrapping an internal ORT allocator that does not implement GetStats
  /// the returned OrtKeyValuePairs instance will be empty.
  ///
  /// \since 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtAllocator> this_,
        ffi.Pointer<ffi.Pointer<OrtKeyValuePairs>> out,
      )
    >
  >
  GetStats;

  /// \brief Allocate using a stream.
  ///
  /// If the allocator is stream aware this performs allocation using a stream.
  ///
  /// Alloc will be used if this is nullptr.
  ///
  /// \param[in] this_ OrtAllocator instance
  /// \param[in] size Size of the allocation in bytes. nullptr if size was 0 or allocation failed.
  /// \param[in] stream The stream to allocate on.
  ///
  /// \return pointer to an allocated block of `size` bytes
  ///
  /// \note Implementation of this function is optional and AllocOnStream may be set to a nullptr.
  /// \since 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Void> Function(
        ffi.Pointer<OrtAllocator> this_,
        ffi.Size size,
        ffi.Pointer<OrtSyncStream> stream,
      )
    >
  >
  AllocOnStream;
}

typedef OrtLoggingFunctionFunction =
    ffi.Void Function(
      ffi.Pointer<ffi.Void> param,
      ffi.UnsignedInt severity,
      ffi.Pointer<ffi.Char> category,
      ffi.Pointer<ffi.Char> logid,
      ffi.Pointer<ffi.Char> code_location,
      ffi.Pointer<ffi.Char> message,
    );
typedef DartOrtLoggingFunctionFunction =
    void Function(
      ffi.Pointer<ffi.Void> param,
      OrtLoggingLevel severity,
      ffi.Pointer<ffi.Char> category,
      ffi.Pointer<ffi.Char> logid,
      ffi.Pointer<ffi.Char> code_location,
      ffi.Pointer<ffi.Char> message,
    );
typedef OrtLoggingFunction =
    ffi.Pointer<ffi.NativeFunction<OrtLoggingFunctionFunction>>;

/// \brief Graph optimization level
///
/// Refer to https://www.onnxruntime.ai/docs/performance/graph-optimizations.html#graph-optimization-levels
/// for an in-depth understanding of the Graph Optimization Levels.
enum GraphOptimizationLevel {
  ORT_DISABLE_ALL(0),
  ORT_ENABLE_BASIC(1),
  ORT_ENABLE_EXTENDED(2),
  ORT_ENABLE_LAYOUT(3),
  ORT_ENABLE_ALL(99);

  final int value;
  const GraphOptimizationLevel(this.value);

  static GraphOptimizationLevel fromValue(int value) => switch (value) {
    0 => ORT_DISABLE_ALL,
    1 => ORT_ENABLE_BASIC,
    2 => ORT_ENABLE_EXTENDED,
    3 => ORT_ENABLE_LAYOUT,
    99 => ORT_ENABLE_ALL,
    _ => throw ArgumentError(
      'Unknown value for GraphOptimizationLevel: $value',
    ),
  };
}

enum ExecutionMode {
  ORT_SEQUENTIAL(0),
  ORT_PARALLEL(1);

  final int value;
  const ExecutionMode(this.value);

  static ExecutionMode fromValue(int value) => switch (value) {
    0 => ORT_SEQUENTIAL,
    1 => ORT_PARALLEL,
    _ => throw ArgumentError('Unknown value for ExecutionMode: $value'),
  };
}

/// \brief Language projection identifiers
/// /see OrtApi::SetLanguageProjection
enum OrtLanguageProjection {
  ORT_PROJECTION_C(0),
  ORT_PROJECTION_CPLUSPLUS(1),
  ORT_PROJECTION_CSHARP(2),
  ORT_PROJECTION_PYTHON(3),
  ORT_PROJECTION_JAVA(4),
  ORT_PROJECTION_WINML(5),
  ORT_PROJECTION_NODEJS(6);

  final int value;
  const OrtLanguageProjection(this.value);

  static OrtLanguageProjection fromValue(int value) => switch (value) {
    0 => ORT_PROJECTION_C,
    1 => ORT_PROJECTION_CPLUSPLUS,
    2 => ORT_PROJECTION_CSHARP,
    3 => ORT_PROJECTION_PYTHON,
    4 => ORT_PROJECTION_JAVA,
    5 => ORT_PROJECTION_WINML,
    6 => ORT_PROJECTION_NODEJS,
    _ => throw ArgumentError('Unknown value for OrtLanguageProjection: $value'),
  };
}

final class OrtKernelInfo extends ffi.Opaque {}

final class OrtKernelContext extends ffi.Opaque {}

enum OrtAllocatorType {
  OrtInvalidAllocator(-1),
  OrtDeviceAllocator(0),
  OrtArenaAllocator(1),
  OrtReadOnlyAllocator(2);

  final int value;
  const OrtAllocatorType(this.value);

  static OrtAllocatorType fromValue(int value) => switch (value) {
    -1 => OrtInvalidAllocator,
    0 => OrtDeviceAllocator,
    1 => OrtArenaAllocator,
    2 => OrtReadOnlyAllocator,
    _ => throw ArgumentError('Unknown value for OrtAllocatorType: $value'),
  };
}

/// \brief Memory types for allocated memory, execution provider specific types should be extended in each provider.
/// /
/// // Whenever this struct is updated, please also update the MakeKey function in onnxruntime / core / framework / execution_provider.cc
enum OrtMemType {
  /// Any CPU memory used by non-CPU execution provider
  OrtMemTypeCPUInput(-2),

  /// CPU accessible memory outputted by non-CPU execution provider, i.e. HOST_ACCESSIBLE
  OrtMemTypeCPUOutput(-1),

  /// The default allocator for execution provider
  OrtMemTypeDefault(0);

  /// CPU accessible memory allocated by non-CPU execution provider, i.e. HOST_ACCESSIBLE
  static const OrtMemTypeCPU = OrtMemTypeCPUOutput;

  final int value;
  const OrtMemType(this.value);

  static OrtMemType fromValue(int value) => switch (value) {
    -2 => OrtMemTypeCPUInput,
    -1 => OrtMemTypeCPUOutput,
    0 => OrtMemTypeDefault,
    _ => throw ArgumentError('Unknown value for OrtMemType: $value'),
  };

  @override
  String toString() {
    if (this == OrtMemTypeCPUOutput)
      return "OrtMemType.OrtMemTypeCPUOutput, OrtMemType.OrtMemTypeCPU";
    return super.toString();
  }
}

/// \brief Algorithm to use for cuDNN Convolution Op
enum OrtCudnnConvAlgoSearch {
  /// expensive exhaustive benchmarking using cudnnFindConvolutionForwardAlgorithmEx
  OrtCudnnConvAlgoSearchExhaustive(0),

  /// lightweight heuristic based search using cudnnGetConvolutionForwardAlgorithm_v7
  OrtCudnnConvAlgoSearchHeuristic(1),

  /// default algorithm using CUDNN_CONVOLUTION_FWD_ALGO_IMPLICIT_PRECOMP_GEMM
  OrtCudnnConvAlgoSearchDefault(2);

  final int value;
  const OrtCudnnConvAlgoSearch(this.value);

  static OrtCudnnConvAlgoSearch fromValue(int value) => switch (value) {
    0 => OrtCudnnConvAlgoSearchExhaustive,
    1 => OrtCudnnConvAlgoSearchHeuristic,
    2 => OrtCudnnConvAlgoSearchDefault,
    _ => throw ArgumentError(
      'Unknown value for OrtCudnnConvAlgoSearch: $value',
    ),
  };
}

/// \brief CUDA Provider Options
///
/// \see OrtApi::SessionOptionsAppendExecutionProvider_CUDA
final class OrtCUDAProviderOptions extends ffi.Struct {
  /// \brief CUDA device Id
  /// Defaults to 0.
  @ffi.Int()
  external int device_id;

  /// \brief CUDA Convolution algorithm search configuration.
  /// See enum OrtCudnnConvAlgoSearch for more details.
  /// Defaults to OrtCudnnConvAlgoSearchExhaustive.
  @ffi.UnsignedInt()
  external int cudnn_conv_algo_searchAsInt;

  OrtCudnnConvAlgoSearch get cudnn_conv_algo_search =>
      OrtCudnnConvAlgoSearch.fromValue(cudnn_conv_algo_searchAsInt);

  /// \brief CUDA memory limit (To use all possible memory pass in maximum size_t)
  /// Defaults to SIZE_MAX.
  /// \note If a ::OrtArenaCfg has been applied, it will override this field
  @ffi.Size()
  external int gpu_mem_limit;

  /// \brief Strategy used to grow the memory arena
  /// 0 = kNextPowerOfTwo<br>
  /// 1 = kSameAsRequested<br>
  /// Defaults to 0.
  /// \note If a ::OrtArenaCfg has been applied, it will override this field
  @ffi.Int()
  external int arena_extend_strategy;

  /// \brief Flag indicating if copying needs to take place on the same stream as the compute stream in the CUDA EP
  /// 0 = Use separate streams for copying and compute.
  /// 1 = Use the same stream for copying and compute.
  /// Defaults to 1.
  /// WARNING: Setting this to 0 may result in data races for some models.
  /// Please see issue #4829 for more details.
  @ffi.Int()
  external int do_copy_in_default_stream;

  /// \brief Flag indicating if there is a user provided compute stream
  /// Defaults to 0.
  @ffi.Int()
  external int has_user_compute_stream;

  /// \brief User provided compute stream.
  /// If provided, please set `has_user_compute_stream` to 1.
  external ffi.Pointer<ffi.Void> user_compute_stream;

  /// \brief CUDA memory arena configuration parameters
  external ffi.Pointer<OrtArenaCfg> default_memory_arena_cfg;

  /// \brief Enable TunableOp for using.
  /// Set it to 1/0 to enable/disable TunableOp. Otherwise, it is disabled by default.
  /// This option can be overridden by environment variable ORT_CUDA_TUNABLE_OP_ENABLE.
  @ffi.Int()
  external int tunable_op_enable;

  /// \brief Enable TunableOp for tuning.
  /// Set it to 1/0 to enable/disable TunableOp tuning. Otherwise, it is disabled by default.
  /// This option can be overridden by environment variable ORT_CUDA_TUNABLE_OP_TUNING_ENABLE.
  @ffi.Int()
  external int tunable_op_tuning_enable;

  /// \brief Max tuning duration time limit for each instance of TunableOp.
  /// Defaults to 0 to disable the limit.
  @ffi.Int()
  external int tunable_op_max_tuning_duration_ms;
}

/// \brief ROCM Provider Options
///
/// \see OrtApi::SessionOptionsAppendExecutionProvider_ROCM
final class OrtROCMProviderOptions extends ffi.Struct {
  /// \brief ROCM device Id
  /// Defaults to 0.
  @ffi.Int()
  external int device_id;

  /// \brief ROCM MIOpen Convolution algorithm exhaustive search option.
  /// Defaults to 0 (false).
  @ffi.Int()
  external int miopen_conv_exhaustive_search;

  /// \brief ROCM memory limit (To use all possible memory pass in maximum size_t)
  /// Defaults to SIZE_MAX.
  /// \note If a ::OrtArenaCfg has been applied, it will override this field
  @ffi.Size()
  external int gpu_mem_limit;

  /// \brief Strategy used to grow the memory arena
  /// 0 = kNextPowerOfTwo<br>
  /// 1 = kSameAsRequested<br>
  /// Defaults to 0.
  /// \note If a ::OrtArenaCfg has been applied, it will override this field
  @ffi.Int()
  external int arena_extend_strategy;

  /// \brief Flag indicating if copying needs to take place on the same stream as the compute stream in the ROCM EP
  /// 0 = Use separate streams for copying and compute.
  /// 1 = Use the same stream for copying and compute.
  /// Defaults to 1.
  /// WARNING: Setting this to 0 may result in data races for some models.
  /// Please see issue #4829 for more details.
  @ffi.Int()
  external int do_copy_in_default_stream;

  /// \brief Flag indicating if there is a user provided compute stream
  /// Defaults to 0.
  @ffi.Int()
  external int has_user_compute_stream;

  /// \brief User provided compute stream.
  /// If provided, please set `has_user_compute_stream` to 1.
  external ffi.Pointer<ffi.Void> user_compute_stream;

  /// \brief ROCM memory arena configuration parameters
  external ffi.Pointer<OrtArenaCfg> default_memory_arena_cfg;

  @ffi.Int()
  external int enable_hip_graph;

  /// \brief Enable TunableOp for using.
  /// Set it to 1/0 to enable/disable TunableOp. Otherwise, it is disabled by default.
  /// This option can be overridden by environment variable ORT_ROCM_TUNABLE_OP_ENABLE.
  @ffi.Int()
  external int tunable_op_enable;

  /// \brief Enable TunableOp for tuning.
  /// Set it to 1/0 to enable/disable TunableOp tuning. Otherwise, it is disabled by default.
  /// This option can be overridden by environment variable ORT_ROCM_TUNABLE_OP_TUNING_ENABLE.
  @ffi.Int()
  external int tunable_op_tuning_enable;

  /// \brief Max tuning duration time limit for each instance of TunableOp.
  /// Defaults to 0 to disable the limit.
  @ffi.Int()
  external int tunable_op_max_tuning_duration_ms;
}

/// \brief OpenVINO Provider Options
/// \brief This Struct is frozen since ORT 1.13.0. Its maintained part of Legacy API for compatibility.
/// \brief For latest OpenVINO Provider Options update to the ProviderOptions map.
/// \brief Latest OpenVINO Provider Options are listed in the
/// \htmlonly
/// <a href="https://onnxruntime.ai/docs/execution-providers/OpenVINO-ExecutionProvider.html#summary-of-options">onnxruntime document.</a>
/// \endhtmlonly
/// \see OrtApi::SessionOptionsAppendExecutionProvider()
final class OrtOpenVINOProviderOptions extends ffi.Struct {
  /// \brief Device type string
  ///
  /// Valid settings are one of: "CPU_FP32", "CPU_FP16", "GPU_FP32", "GPU_FP16"
  external ffi.Pointer<ffi.Char> device_type;

  /// < 0 = disabled, nonzero = enabled
  @ffi.UnsignedChar()
  external int enable_npu_fast_compile;

  external ffi.Pointer<ffi.Char> device_id;

  /// < 0 = Use default number of threads
  @ffi.Size()
  external int num_of_threads;

  /// path is set to empty by default
  external ffi.Pointer<ffi.Char> cache_dir;

  external ffi.Pointer<ffi.Void> context;

  /// < 0 = disabled, nonzero = enabled
  @ffi.UnsignedChar()
  external int enable_opencl_throttling;

  /// < 0 = disabled, nonzero = enabled
  @ffi.UnsignedChar()
  external int enable_dynamic_shapes;
}

/// \brief TensorRT Provider Options
///
/// \see OrtApi::SessionOptionsAppendExecutionProvider_TensorRT
final class OrtTensorRTProviderOptions extends ffi.Struct {
  /// < CUDA device id (0 = default device)
  @ffi.Int()
  external int device_id;

  /// indicator of user specified CUDA compute stream.
  @ffi.Int()
  external int has_user_compute_stream;

  /// user specified CUDA compute stream.
  external ffi.Pointer<ffi.Void> user_compute_stream;

  /// maximum iterations for TensorRT parser to get capability
  @ffi.Int()
  external int trt_max_partition_iterations;

  /// minimum size of TensorRT subgraphs
  @ffi.Int()
  external int trt_min_subgraph_size;

  /// maximum workspace size for TensorRT.
  @ffi.Size()
  external int trt_max_workspace_size;

  /// enable TensorRT FP16 precision. Default 0 = false, nonzero = true
  @ffi.Int()
  external int trt_fp16_enable;

  /// enable TensorRT INT8 precision. Default 0 = false, nonzero = true
  @ffi.Int()
  external int trt_int8_enable;

  /// TensorRT INT8 calibration table name.
  external ffi.Pointer<ffi.Char> trt_int8_calibration_table_name;

  /// use native TensorRT generated calibration table. Default 0 = false, nonzero = true
  @ffi.Int()
  external int trt_int8_use_native_calibration_table;

  /// enable DLA. Default 0 = false, nonzero = true
  @ffi.Int()
  external int trt_dla_enable;

  /// DLA core number. Default 0
  @ffi.Int()
  external int trt_dla_core;

  /// dump TRT subgraph. Default 0 = false, nonzero = true
  @ffi.Int()
  external int trt_dump_subgraphs;

  /// enable engine caching. Default 0 = false, nonzero = true
  @ffi.Int()
  external int trt_engine_cache_enable;

  /// specify engine cache path
  external ffi.Pointer<ffi.Char> trt_engine_cache_path;

  /// enable engine decryption. Default 0 = false, nonzero = true
  @ffi.Int()
  external int trt_engine_decryption_enable;

  /// specify engine decryption library path
  external ffi.Pointer<ffi.Char> trt_engine_decryption_lib_path;

  /// force building TensorRT engine sequentially. Default 0 = false, nonzero = true
  @ffi.Int()
  external int trt_force_sequential_engine_build;
}

final class OrtCustomHandleType extends ffi.Struct {
  @ffi.Char()
  external int __place_holder;
}

typedef OrtCustomThreadHandle = ffi.Pointer<OrtCustomHandleType>;
typedef OrtThreadWorkerFnFunction =
    ffi.Void Function(ffi.Pointer<ffi.Void> ort_worker_fn_param);
typedef DartOrtThreadWorkerFnFunction =
    void Function(ffi.Pointer<ffi.Void> ort_worker_fn_param);

/// \brief Thread work loop function
///
/// Onnxruntime will provide the working loop on custom thread creation
/// Argument is an onnxruntime built-in type which will be provided when thread pool calls OrtCustomCreateThreadFn
typedef OrtThreadWorkerFn =
    ffi.Pointer<ffi.NativeFunction<OrtThreadWorkerFnFunction>>;
typedef OrtCustomCreateThreadFnFunction =
    OrtCustomThreadHandle Function(
      ffi.Pointer<ffi.Void> ort_custom_thread_creation_options,
      OrtThreadWorkerFn ort_thread_worker_fn,
      ffi.Pointer<ffi.Void> ort_worker_fn_param,
    );

/// \brief Ort custom thread creation function
///
/// The function should return a thread handle to be used in onnxruntime thread pools
/// Onnxruntime will throw exception on return value of nullptr or 0, indicating that the function failed to create a thread
typedef OrtCustomCreateThreadFn =
    ffi.Pointer<ffi.NativeFunction<OrtCustomCreateThreadFnFunction>>;
typedef OrtCustomJoinThreadFnFunction =
    ffi.Void Function(OrtCustomThreadHandle ort_custom_thread_handle);
typedef DartOrtCustomJoinThreadFnFunction =
    void Function(OrtCustomThreadHandle ort_custom_thread_handle);

/// \brief Custom thread join function
///
/// Onnxruntime thread pool destructor will call the function to join a custom thread.
/// Argument ort_custom_thread_handle is the value returned by OrtCustomCreateThreadFn
typedef OrtCustomJoinThreadFn =
    ffi.Pointer<ffi.NativeFunction<OrtCustomJoinThreadFnFunction>>;

/// \brief MIGraphX Provider Options
///
/// \see OrtApi::SessionOptionsAppendExecutionProvider_MIGraphX
final class OrtMIGraphXProviderOptions extends ffi.Struct {
  /// hip device id.
  @ffi.Int()
  external int device_id;

  /// MIGraphX FP16 precision. Default 0 = false, nonzero = true
  @ffi.Int()
  external int migraphx_fp16_enable;

  /// MIGraphX FP8 precision. Default 0 = false, nonzero = true
  @ffi.Int()
  external int migraphx_fp8_enable;

  /// MIGraphX INT8 precision. Default 0 = false, nonzero = true
  @ffi.Int()
  external int migraphx_int8_enable;

  /// MIGraphx INT8 cal table. Default 0 = false, nonzero = true
  @ffi.Int()
  external int migraphx_use_native_calibration_table;

  /// MIGraphx INT8 calibration table name
  external ffi.Pointer<ffi.Char> migraphx_int8_calibration_table_name;

  /// migraphx save compiled model. Default 0 = false, nonzero = true
  @ffi.Int()
  external int migraphx_save_compiled_model;

  /// migraphx model path name
  external ffi.Pointer<ffi.Char> migraphx_save_model_path;

  /// migraphx int8 cal table. Default 0 = false, nonzero = true
  @ffi.Int()
  external int migraphx_load_compiled_model;

  /// migraphx model path name
  external ffi.Pointer<ffi.Char> migraphx_load_model_path;

  /// MIGraphX tuned compile. Default = false, nonzero = true
  @ffi.Bool()
  external bool migraphx_exhaustive_tune;

  /// \brief MIGraphX memory limit (To use all possible memory pass in maximum size_t)
  /// Defaults to SIZE_MAX.
  /// \note If a ::OrtArenaCfg has been applied, it will override this field
  @ffi.Size()
  external int migraphx_mem_limit;

  /// \brief Strategy used to grow the memory arena
  /// 0 = kNextPowerOfTwo<br>
  /// 1 = kSameAsRequested<br>
  /// Defaults to 0.
  /// \note If a ::OrtArenaCfg has been applied, it will override this field
  @ffi.Int()
  external int migraphx_arena_extend_strategy;
}

final class OrtTrainingApi extends ffi.Opaque {}

/// \brief This mimics OrtDevice type constants so they can be returned in the API
enum OrtMemoryInfoDeviceType {
  OrtMemoryInfoDeviceType_CPU(0),
  OrtMemoryInfoDeviceType_GPU(1),
  OrtMemoryInfoDeviceType_FPGA(2),
  OrtMemoryInfoDeviceType_NPU(3);

  final int value;
  const OrtMemoryInfoDeviceType(this.value);

  static OrtMemoryInfoDeviceType fromValue(int value) => switch (value) {
    0 => OrtMemoryInfoDeviceType_CPU,
    1 => OrtMemoryInfoDeviceType_GPU,
    2 => OrtMemoryInfoDeviceType_FPGA,
    3 => OrtMemoryInfoDeviceType_NPU,
    _ => throw ArgumentError(
      'Unknown value for OrtMemoryInfoDeviceType: $value',
    ),
  };
}

typedef RunAsyncCallbackFnFunction =
    ffi.Void Function(
      ffi.Pointer<ffi.Void> user_data,
      ffi.Pointer<ffi.Pointer<OrtValue>> outputs,
      ffi.Size num_outputs,
      OrtStatusPtr status,
    );
typedef DartRunAsyncCallbackFnFunction =
    void Function(
      ffi.Pointer<ffi.Void> user_data,
      ffi.Pointer<ffi.Pointer<OrtValue>> outputs,
      int num_outputs,
      OrtStatusPtr status,
    );

/// \brief Callback function for RunAsync
///
/// \param[in] user_data User specific data that passed back to the callback
/// \param[out] outputs On succeed, outputs host inference results, on error, the value will be nullptr
/// \param[out] num_outputs Number of outputs, on error, the value will be zero
/// \param[out] status On error, status will provide details
typedef RunAsyncCallbackFn =
    ffi.Pointer<ffi.NativeFunction<RunAsyncCallbackFnFunction>>;

/// \brief The OrtModelEditorApi struct provides functions to create or edit an ONNX model.
///
/// See onnxruntime/test/shared_lib/test_model_editor_api.cc for example usage.
///
/// \since Version 1.22.
final class OrtModelEditorApi extends ffi.Struct {
  /// \brief Create an OrtTypeInfo instance for a Tensor.
  ///
  /// Create an OrtTypeInfo instance for a Tensor to use as graph inputs/outputs with the Model Editor API.
  ///
  /// User can release `tensor_info` after creating the OrtTypeInfo.
  ///
  /// \param[in] tensor_info Tensor type and shape information.
  /// \param[out] type_info TypeInfo instance for the tensor.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> tensor_info,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  CreateTensorTypeInfo;

  /// \brief Create an OrtTypeInfo instance for a SparseTensor.
  ///
  /// Create an OrtTypeInfo instance for a SparseTensor to use as graph inputs/outputs with the Model Editor API.
  ///
  /// User can release `tensor_info` after creating the OrtTypeInfo.
  ///
  /// \param[in] tensor_info SparseTensor type and shape information.
  /// \param[out] type_info TypeInfo instance for the tensor.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> tensor_info,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  CreateSparseTensorTypeInfo;

  /// \brief Create an OrtTypeInfo instance for a Map.
  ///
  /// Create an OrtTypeInfo instance for a Map to use as graph inputs/outputs with the Model Editor API.
  ///
  /// User can release `map_value_type` after creating the OrtTypeInfo.
  ///
  /// \param[in] map_key_type Key type for the map.
  /// \param[in] map_value_type Value type for the map.
  /// \param[out] type_info TypeInfo instance for the map.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.UnsignedInt map_key_type,
        ffi.Pointer<OrtTypeInfo> map_value_type,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  CreateMapTypeInfo;

  /// \brief Create an OrtTypeInfo instance for a Sequence.
  ///
  /// Create an OrtTypeInfo instance for a Sequence to use as graph inputs/outputs with the Model Editor API.
  ///
  /// User can release `sequence_type` after creating the OrtTypeInfo.
  ///
  /// \param[in] sequence_type Sequence type and shape information.
  /// \param[out] type_info TypeInfo instance for the sequence.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTypeInfo> sequence_type,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  CreateSequenceTypeInfo;

  /// \brief Create an OrtTypeInfo instance for an Optional.
  ///
  /// Create an OrtTypeInfo instance for an Optional to use as graph inputs/outputs with the Model Editor API.
  ///
  /// User can release `contained_type` after creating the OrtTypeInfo.
  ///
  /// \param[in] contained_type Tensor type and shape information.
  /// \param[out] type_info TypeInfo instance for the tensor.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTypeInfo> contained_type,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  CreateOptionalTypeInfo;

  /// \brief Create an OrtValueInfo for use as an OrtGraph input or output.
  ///
  /// \param[in] name The name of the input or output.
  /// \param[in] type_info The type information for the input or output. The provided value is copied.
  /// \param[out] value_info The OrtValueInfo instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<OrtTypeInfo> type_info,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> value_info,
      )
    >
  >
  CreateValueInfo;

  /// \brief Create an OrtNode to add to an OrtGraph.
  ///
  /// Create an OrtNode.
  ///
  /// Create attributes with CreateOpAttr. OrtOpAttr instances are copied.
  ///
  /// \param[in] operator_name The name of the operator.
  /// \param[in] domain_name The domain of the operator. Use an empty string for ONNX operators.
  /// \param[in] node_name The name of the node.
  /// \param[in] input_names The names of the inputs.
  /// \param[in] input_names_len The number of input names.
  /// \param[in] output_names The names of the outputs.
  /// \param[in] output_names_len The number of output names.
  /// \param[in] attributes The optional attributes of the node.
  /// \param[in] attribs_len The number of attributes. May be zero.
  /// \param[out] node The OrtNode instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> operator_name,
        ffi.Pointer<ffi.Char> domain_name,
        ffi.Pointer<ffi.Char> node_name,
        ffi.Pointer<ffi.Pointer<ffi.Char>> input_names,
        ffi.Size input_names_len,
        ffi.Pointer<ffi.Pointer<ffi.Char>> output_names,
        ffi.Size output_names_len,
        ffi.Pointer<ffi.Pointer<OrtOpAttr>> attributes,
        ffi.Size attribs_len,
        ffi.Pointer<ffi.Pointer<OrtNode>> node,
      )
    >
  >
  CreateNode;

  /// \brief Create an OrtGraph
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<ffi.Pointer<OrtGraph>> graph)
    >
  >
  CreateGraph;

  /// \brief Set the inputs for the OrtGraph.
  ///
  /// Set the graph inputs. This will replace any existing inputs with the new values.
  /// The OrtGraph takes ownership of the OrtValueInfo instances and you should NOT call ReleaseOrtValueInfo.
  ///
  /// \param[in] graph The OrtGraph instance to update.
  /// \param[in] inputs The input OrtValueInfo instances.
  /// \param[in] inputs_len The number of input OrtValueInfo instances.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> inputs,
        ffi.Size inputs_len,
      )
    >
  >
  SetGraphInputs;

  /// \brief Set the outputs for the OrtGraph.
  ///
  /// Set the graph outputs. This will replace any existing outputs with the new values.
  /// The OrtGraph takes ownership of the OrtValueInfo instances provided and you should NOT call ReleaseOrtValueInfo.
  ///
  /// \param[in] graph The OrtGraph instance to update.
  /// \param[in] outputs The output OrtValueInfo instances.
  /// \param[in] outputs_len The number of output OrtValueInfo instances.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> outputs,
        ffi.Size outputs_len,
      )
    >
  >
  SetGraphOutputs;

  /// \brief Add an initializer to the OrtGraph
  ///
  /// ORT will take ownership of the OrtValue and you should NOT call ReleaseOrtValue.
  ///
  /// Two options:
  ///
  /// Allocated memory:
  /// Use CreateTensorAsOrtValue (allocates memory) and populate the tensor with the data.
  /// Set `data_is_external` to false.
  ///
  /// Pre-existing memory:
  /// Use CreateTensorWithDataAsOrtValue or CreateTensorWithDataAndDeleterAsOrtValue to create an OrtValue
  /// with a tensor that contains a pointer to the existing data.
  /// Set `data_is_external` to true.
  ///
  /// The pointer must remain valid for the duration of the inference session.
  /// If using CreateTensorWithDataAsOrtValue you are responsible for freeing the memory after the inference session
  /// is released.
  /// If using CreateTensorWithDataAndDeleterAsOrtValue, ORT will free the memory using the provided deleter as
  /// soon as the OrtValue is no longer in use.
  ///
  /// NOTE: A tensor containing pre-existing memory MUST have 128 bytes of data or more.
  /// For smaller tensors use CreateTensorAsOrtValue.
  ///
  /// ONNX shape inferencing does not support external data. An initializer involved in shape inferencing is
  /// typically small (a single value or limited by the rank of a tensor) and uses less than 128 bytes of
  /// memory, so this limit acts as a simple catch-all rule to avoid issues.
  /// e.g. Reshape's `shape`, Clip's `min` and `max`, various ops `axes`.
  ///
  /// \param[in] graph The OrtGraph instance to update.
  /// \param[in] name The value name for the initializer.
  /// \param[in] tensor The OrtValue instance containing the tensor data.
  /// \param[in] data_is_external Set to true if the data is external and should not be copied.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<OrtValue> tensor,
        ffi.Bool data_is_external,
      )
    >
  >
  AddInitializerToGraph;

  /// \brief Add an OrtNode to an OrtGraph
  ///
  /// Add the node to the graph. The OrtGraph will take ownership of OrtNode and you should NOT call ReleaseOrtNode.
  ///
  /// \param[in] graph The OrtGraph instance to update.
  /// \param[in] node The OrtNode instance to add to the graph.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<OrtNode> node,
      )
    >
  >
  AddNodeToGraph;

  /// \brief Create an OrtModel.
  ///
  /// Create an OrtModel.
  ///
  /// This can be used to build a new model, or to augment an existing model.
  ///
  /// \param[in] domain_names The domain names for the model.
  /// If augmenting an existing model add additional domains if needed.
  /// \param[in] opset_versions The opset versions for the model.
  /// If augmenting an existing model add additional opset versions if needed.
  /// \param[in] opset_entries_len The number of domain_names and opset_versions entries.
  /// Domain and opset entries should be 1:1
  /// \param[out] model The OrtModel instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<ffi.Char>> domain_names,
        ffi.Pointer<ffi.Int> opset_versions,
        ffi.Size opset_entries_len,
        ffi.Pointer<ffi.Pointer<OrtModel>> model,
      )
    >
  >
  CreateModel;

  /// \brief Add an OrtGraph to an OrtModel.
  ///
  /// Add the graph to a model. This should be called once when creating a new model.
  ///
  /// The OrtModel takes ownership of the OrtGraph and you should NOT call ReleaseOrtGraph.
  ///
  /// \param[in] model The OrtModel instance to update.
  /// \param[in] graph The OrtGraph instance to add to the model.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModel> model,
        ffi.Pointer<OrtGraph> graph,
      )
    >
  >
  AddGraphToModel;

  /// \brief Create an OrtSession using the OrtModel.
  ///
  /// Create an inference session using the OrtModel instance.
  /// The OrtModel should have been populated with an OrtGraph containing nodes and initializers, and SetGraphInputs
  /// and SetGraphOutputs must have been called.
  /// This will validate the model, run optimizers, and prepare the session for inferencing.
  ///
  /// ReleaseOrtModel must be called to free the OrtModel after session creation.
  ///
  /// \param[in] env The OrtEnv instance.
  /// \param[in] model The OrtModel instance.
  /// \param[in] options The OrtSessionOptions instance.
  /// \param[out] out The OrtSession instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtModel> model,
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<OrtSession>> out,
      )
    >
  >
  CreateSessionFromModel;

  /// \brief Create an OrtSession to augment an existing model.
  ///
  /// Create an OrtSession with an existing model that will be augmented with additional nodes and initializers.
  /// Nodes can be added before or after the existing nodes in the model. ONNX Runtime will connect the nodes when the
  /// model is finalized.
  ///
  /// To add nodes and initializers to the existing model, first create an OrtModel using CreateModel.
  /// Add nodes and initializers to the OrtModel using AddNodeToGraph and AddInitializerToGraph.
  /// Graph inputs/outputs should be updated with SetGraphInputs and SetGraphOutputs as needed to reflect changes made
  /// by the new nodes. The list of graph inputs/outputs should be for the overall model and not just the new nodes.
  ///
  /// Add the new information from the OrtModel to the original model using ApplyModelToSession, and prepare the
  /// session for inferencing by calling FinalizeModelEditorSession.
  ///
  /// \param{in} env The OrtEnv instance.
  /// \param{in} model_path The path to the existing ONNX model to augment.
  /// \param{in} options The OrtSessionOptions instance.
  /// \param{out} out The created OrtSession instance.
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Char> model_path,
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<OrtSession>> out,
      )
    >
  >
  CreateModelEditorSession;

  /// \brief Create an OrtSession to augment an existing model.
  ///
  /// Create an OrtSession with an existing model that will be augmented with additional nodes and initializers.
  /// Nodes can be added before or after the existing nodes in the model. ONNX Runtime will connect the nodes when the
  /// model is finalized.
  ///
  /// To add nodes and initializers to the existing model, first create an OrtModel using CreateModel.
  /// Add nodes and initializers to the OrtModel using AddNodeToGraph and AddInitializerToGraph.
  /// Graph inputs/outputs should be updated with SetGraphInputs and SetGraphOutputs as needed to reflect changes made
  /// by the new nodes. The list of graph inputs/outputs should be for the overall model and not just the new nodes.
  ///
  /// Add the new information from the OrtModel to the original model using ApplyModelToSession, and prepare the
  /// session for inferencing by calling FinalizeModelEditorSession.
  ///
  /// \param{in} env The OrtEnv instance.
  /// \param{in} model_data The model data for the existing model to augment.
  /// \param{in} model_data_length The length of the model data.
  /// \param{in} options The OrtSessionOptions instance.
  /// \param{out} out The created OrtSession instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Void> model_data,
        ffi.Size model_data_length,
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<OrtSession>> out,
      )
    >
  >
  CreateModelEditorSessionFromArray;

  /// \brief Query the session for the opset version of a domain.
  ///
  /// When using the Model Editor API to augment a model, any new nodes must conform to the opset version of the
  /// original model. To do that the user must be able to discover that opset version.
  /// Returns an error if the domain is not used in the model.
  ///
  /// \param[in] session OrtSession to query
  /// \param[in] domain Domain to query. The ONNX domain is an empty string.
  /// \param[out] opset The opset version of the domain.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Char> domain,
        ffi.Pointer<ffi.Int> opset,
      )
    >
  >
  SessionGetOpsetForDomain;

  /// \brief Apply changes to augment the ONNX model in a session created using CreateModelEditorSession[FromArray]
  ///
  /// Adds new nodes and updates graph inputs/outputs using `model` to augment the original ONNX model in the session.
  /// All changes will be validated.
  /// Call FinalizeModelEditorSession to prepare the session for inferencing.
  ///
  /// Existing input/outputs will only be updated if the OrtGraph inputs/outputs are set in the OrtModel.
  /// i.e. you don't need to call SetGraphInputs/SetGraphOutputs if they are unchanged.
  ///
  /// ReleaseOrtModel must be called to free the OrtModel after it is applied to the session.
  ///
  /// \param[in] session OrtSession to update. Session must have been created using CreateModelEditorSession[FromArray].
  /// \param[in] model OrtModel containing new nodes, new initializers, and updated graph input and/or output info.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<OrtModel> model,
      )
    >
  >
  ApplyModelToModelEditorSession;

  /// \brief Finalize the Model Editor session that was created using CreateModelEditorSession[FromArray].
  ///
  /// Finalize the Model Editor session that augmented an ONNX model by adding new nodes.
  /// This will run optimizers and prepare the session for inferencing.
  ///
  /// \param[in] session OrtSession to finalize. Session must have been created using CreateModelEditorSession[FromArray].
  /// \param[in] options OrtSessionOptions to use for the session.
  /// \param[in] prepacked_weights_container Optional OrtPrepackedWeightsContainer to use for the session.
  /// Set to nullptr if not used.
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtPrepackedWeightsContainer> prepacked_weights_container,
      )
    >
  >
  FinalizeModelEditorSession;
}

typedef OrtWriteBufferFuncFunction =
    ffi.Pointer<OrtStatus> Function(
      ffi.Pointer<ffi.Void> state,
      ffi.Pointer<ffi.Void> buffer,
      ffi.Size buffer_num_bytes,
    );
typedef DartOrtWriteBufferFuncFunction =
    ffi.Pointer<OrtStatus> Function(
      ffi.Pointer<ffi.Void> state,
      ffi.Pointer<ffi.Void> buffer,
      int buffer_num_bytes,
    );

/// \brief Function called by ORT to write a buffer to a custom destination (e.g., file, stream, etc.).
///
/// \param state Opaque pointer holding the user's state.
/// \param buffer The buffer to write.
/// \param buffer_num_bytes The size of the buffer in bytes.
///
/// \return OrtStatus* Write status. Return nullptr on success.
/// Use CreateStatus to provide error info. Use ORT_FAIL as the error code.
/// ORT will release the OrtStatus* if not null.
typedef OrtWriteBufferFunc =
    ffi.Pointer<ffi.NativeFunction<OrtWriteBufferFuncFunction>>;
typedef OrtGetInitializerLocationFuncFunction =
    ffi.Pointer<OrtStatus> Function(
      ffi.Pointer<ffi.Void> state,
      ffi.Pointer<ffi.Char> initializer_name,
      ffi.Pointer<OrtValue> initializer_value,
      ffi.Pointer<OrtExternalInitializerInfo> external_info,
      ffi.Pointer<ffi.Pointer<OrtExternalInitializerInfo>> new_external_info,
    );

/// \brief Function called by ORT to allow user to specify how an initializer should be saved, that is, either
/// written to an external file or stored within the model. ORT calls this function for every initializer when
/// generating a model.
///
/// If the function implementation sets the `new_external_info` output parameter to NULL, ORT stores the initializer data
/// within the generated model.
///
/// Otherwise, if the function implementation sets `new_external_info` to a valid OrtExternalInitializerInfo instance,
/// ORT assumes that this function stores the initializer data in a file. In this case, ORT configures the model's
/// initializer to point to the location specified by the `new_external_info` output parameter.
///
/// \param[in] state Opaque pointer holding the user's state.
/// \param[in] initializer_name The initializer's name as a null-terminated string.
/// \param[in] initializer_value OrtValue containing the initializer's data, type, and shape.
/// \param[in] external_info If the initializer is originally stored in an external file, `external_info` contains
/// the file path, file offset, and the data's byte size within the file. Otherwise,
/// `external_info` is NULL if the initializer is not originally stored in a file.
/// \param[out] new_external_info Output parameter set to a new OrtExternalInitializerInfo instance indicating the
/// location where the function implementation stored the initializer data.
/// The function implementation must use `OrtApi::CreateExternalInitializerInfo()` to
/// create the instance.
/// If the function implementation sets `new_external_info` to NULL,
/// ORT stores the initializers within the model.
///
/// \note ORT takes ownership of the `new_external_info` output parameter.
///
/// \return OrtStatus* Write status. Return nullptr on success.
/// Use CreateStatus to provide error info. Use ORT_FAIL as the error code.
/// ORT will release the OrtStatus* if not null.
typedef OrtGetInitializerLocationFunc =
    ffi.Pointer<ffi.NativeFunction<OrtGetInitializerLocationFuncFunction>>;

/// \brief The OrtCompileApi struct provides functions to compile ONNX models.
///
/// Execution providers that support compilation fuse a subgraph into an EPContext node that wraps a provider-specific
/// binary representation of the subgraph.
/// For more details about the EPContext design, refer to:
/// \htmlonly
/// <a href="https://onnxruntime.ai/docs/execution-providers/EP-Context-Design.html">EPContext design document.</a>
/// \endhtmlonly
///
/// Example (error handling not shown):
/// OrtStatus* status = NULL;
/// OrtCompileApi* compile_api = ort_api->GetCompileApi();
/// OrtModelCompilationOptions* compile_options = NULL;
///
/// status = compile_api->CreateModelCompilationOptionsFromSessionOptions(env, session_options, &compile_options);
/// status = compile_api->ModelCompilationOptions_SetInputModelPath(compile_options, ORT_TSTR("model.onnx"));
/// status = compile_api->ModelCompilationOptions_SetOutputModelPath(compile_options, ORT_TSTR("model.compiled.onnx"));
/// status = compile_api->CompileModel(env, compile_options);
/// compile_api->ReleaseModelCompilationOptions(compile_options);
///
/// \since Version 1.22.
final class OrtCompileApi extends ffi.Struct {
  /// \name OrtModelCompilationOptions
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtModelCompilationOptions> input)
    >
  >
  ReleaseModelCompilationOptions;

  /// \brief Creates an OrtModelCompilationOptions object from an existing OrtSessionOptions object.
  ///
  /// An OrtModelCompilationOptions object contains the settings used to generate a compiled ONNX model.
  /// The OrtSessionOptions object has the execution providers with which the model will be compiled.
  ///
  /// ReleaseOrtModelCompilationsOptions must be called to free the OrtModelCompilationOptions after calling
  /// CompileModel.
  ///
  /// \note By default, the GraphOptimizationLevel is set to ORT_DISABLE_ALL. Use
  /// ModelCompilationOptions_SetGraphOptimizationLevel to enable graph optimizations.
  ///
  /// \param[in] env OrtEnv object.
  /// \param[in] session_options The OrtSessionOptions instance from which to create the OrtModelCompilationOptions.
  /// \param[out] out The created OrtModelCompilationOptions instance.
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtSessionOptions> session_options,
        ffi.Pointer<ffi.Pointer<OrtModelCompilationOptions>> out,
      )
    >
  >
  CreateModelCompilationOptionsFromSessionOptions;

  /// \brief Sets the file path to the input ONNX model to compile.
  ///
  /// The input model's location (e.g., file path or memory buffer) must be set with either
  /// ModelCompilationOptions_SetInputModelPath or ModelCompilationOptions_SetInputModelFromBuffer.
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] input_model_path Null terminated string of the path (wchar on Windows, char otherwise).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.Pointer<ffi.Char> input_model_path,
      )
    >
  >
  ModelCompilationOptions_SetInputModelPath;

  /// \brief Sets the buffer that stores the bytes of the loaded ONNX model to compile.
  ///
  /// The input model's location (e.g., file path or memory buffer) must be set with either
  /// ModelCompilationOptions_SetInputModelPath or ModelCompilationOptions_SetInputModelFromBuffer.
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] input_model_data Buffer containing the loaded ONNX model bytes.
  /// \param[in] input_model_data_size The number of bytes in the `input_model_data` buffer.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.Pointer<ffi.Void> input_model_data,
        ffi.Size input_model_data_size,
      )
    >
  >
  ModelCompilationOptions_SetInputModelFromBuffer;

  /// \brief Sets the file path for the output ONNX model generated by CompileModel.
  ///
  /// The output model's location (e.g., file path or memory buffer) can be set with either
  /// ModelCompilationOptions_SetOutputModelPath or ModelCompilationOptions_SetOutputModelBuffer.
  ///
  /// If the output model's location is not set, ONNX Runtime will generate an output file with a path based on
  /// the input model's file path. Examples:
  /// /Path/my_model.onnx -> /Path/my_model_ctx.onnx
  /// /Path/my_model -> /Path/my_model_ctx.onnx
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] output_model_path Null terminated string of the path (wchar on Windows, char otherwise).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.Pointer<ffi.Char> output_model_path,
      )
    >
  >
  ModelCompilationOptions_SetOutputModelPath;

  /// \brief Optionally sets the file that should store external initializers for the compiled ONNX model.
  /// If not set, initializers are stored within the model.
  ///
  /// Only initializers for nodes that were not compiled are stored in the external initializers file.
  /// Compiled nodes contain their initializer data within the `ep_cache_context` attribute of EPContext nodes.
  /// Refer to ModelCompilationOptions_SetEpContextEmbedMode.
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] external_initializers_file_path Null terminated string of the path to the file.
  /// \param[in] external_initializers_size_threshold Initializers larger than this threshold are stored in the file.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.Pointer<ffi.Char> external_initializers_file_path,
        ffi.Size external_initializers_size_threshold,
      )
    >
  >
  ModelCompilationOptions_SetOutputModelExternalInitializersFile;

  /// \brief Configures model compilation to store the output compiled ONNX model in a buffer.
  ///
  /// The caller passes an OrtAllocator that ONNX Runtime uses to allocate memory for the buffer.
  ///
  /// The output model's location (e.g., file path or memory buffer) can be set with either
  /// ModelCompilationOptions_SetOutputModelPath or ModelCompilationOptions_SetOutputModelBuffer.
  ///
  /// If the output model's location is not set, ONNX Runtime will generate an output file with a path based on
  /// the input model's file path. Examples:
  /// /Path/my_model.onnx -> /Path/my_model_ctx.onnx
  /// /Path/my_model -> /Path/my_model_ctx.onnx
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] allocator The allocator used to allocate the buffer for the compiled model.
  /// \param[out] output_model_buffer_ptr Pointer to the buffer that stores the compiled model.
  /// \param[out] output_model_buffer_size_ptr Pointer set to the size of output model in bytes.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Void>> output_model_buffer_ptr,
        ffi.Pointer<ffi.Size> output_model_buffer_size_ptr,
      )
    >
  >
  ModelCompilationOptions_SetOutputModelBuffer;

  /// \brief Enables or disables the embedding of EPContext binary data into the `ep_cache_context` attribute
  /// of EPContext nodes. Defaults to false.
  ///
  /// If enabled, the `ep_cache_context` attribute of EPContext nodes will store the context binary data, which may
  /// include weights for compiled subgraphs.
  ///
  /// If disabled, the `ep_cache_context` attribute of EPContext nodes will contain the path to the file containing the
  /// context binary data. The path is set by the execution provider creating the EPContext node.
  ///
  /// More details relate to EPContext design refers to:
  /// \htmlonly
  /// <a href="https://onnxruntime.ai/docs/execution-providers/EP-Context-Design.html">EPContext design document.</a>
  /// \endhtmlonly
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] embed_ep_context_in_model True to embed EPContext binary data into the EPContext node
  /// `ep_cache_context` attributes.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.Bool embed_ep_context_in_model,
      )
    >
  >
  ModelCompilationOptions_SetEpContextEmbedMode;

  /// \brief Compiles an input ONNX model with the given compilation options.
  ///
  /// \param[in] env OrtEnv object.
  /// \param[in] model_options The compilation options that defines compilation options for a model.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtModelCompilationOptions> model_options,
      )
    >
  >
  CompileModel;

  /// \brief Sets flags from OrtCompileApiFlags that represent one or more boolean options to enable.
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] flags bitwise OR of flags in OrtCompileApiFlags to enable.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.Uint32 flags,
      )
    >
  >
  ModelCompilationOptions_SetFlags;

  /// Sets information related to EP context binary file.
  ///
  /// EP uses this information to decide the location and context binary file name.
  /// Used while compiling model with input and output in memory buffer
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] output_directory Null terminated string of the path (wchar on Windows, char otherwise).
  /// \param[in] model_name Null terminated string of the model name (wchar on Windows, char otherwise).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.Pointer<ffi.Char> output_directory,
        ffi.Pointer<ffi.Char> model_name,
      )
    >
  >
  ModelCompilationOptions_SetEpContextBinaryInformation;

  /// Set the graph optimization level.
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] graph_optimization_level The graph optimization level.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        ffi.UnsignedInt graph_optimization_level,
      )
    >
  >
  ModelCompilationOptions_SetGraphOptimizationLevel;

  /// \brief Sets a OrtWriteBufferFunc function that is called by ORT to write out the output model's serialized
  /// ONNX bytes.
  ///
  /// The provided write function may be called repeatedly until then entire output model has been written out. Each call
  /// to the write function is expected to consume the entire input buffer.
  ///
  /// The output model's destination (e.g., file path, memory buffer, or stream) can be set with any of the functions
  /// that begin with ModelCompilationOptions_SetOutputModel____.
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] write_func The OrtWriteBufferFunc function called by ORT when writing out the model.
  /// \param[in] state Opaque state passed as the first argument to OrtWriteBufferFunc. Can be NULL.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        OrtWriteBufferFunc write_func,
        ffi.Pointer<ffi.Void> state,
      )
    >
  >
  ModelCompilationOptions_SetOutputModelWriteFunc;

  /// \brief Sets a OrtGetInitializerLocationFunc function that is called by ORT for every initializer in the generated
  /// model. Allows implementer to specify whether initializers should be stored within the model or externally.
  ///
  /// \param[in] model_compile_options The OrtModelCompilationOptions instance.
  /// \param[in] get_initializer_location_func The OrtGetInitializerLocationFunc function called by ORT when
  /// to determine the location of the initializer.
  /// \param[in] state Opaque state passed as the first argument to OrtGetInitializerLocationFunc. Can be NULL.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelCompilationOptions> model_compile_options,
        OrtGetInitializerLocationFunc get_initializer_location_func,
        ffi.Pointer<ffi.Void> state,
      )
    >
  >
  ModelCompilationOptions_SetOutputModelGetInitializerLocationFunc;
}

/// \brief These are the default EP selection policies used by ORT when doing automatic EP selection.
enum OrtExecutionProviderDevicePolicy {
  OrtExecutionProviderDevicePolicy_DEFAULT(0),
  OrtExecutionProviderDevicePolicy_PREFER_CPU(1),
  OrtExecutionProviderDevicePolicy_PREFER_NPU(2),
  OrtExecutionProviderDevicePolicy_PREFER_GPU(3),
  OrtExecutionProviderDevicePolicy_MAX_PERFORMANCE(4),
  OrtExecutionProviderDevicePolicy_MAX_EFFICIENCY(5),
  OrtExecutionProviderDevicePolicy_MIN_OVERALL_POWER(6);

  final int value;
  const OrtExecutionProviderDevicePolicy(this.value);

  static OrtExecutionProviderDevicePolicy fromValue(int value) =>
      switch (value) {
        0 => OrtExecutionProviderDevicePolicy_DEFAULT,
        1 => OrtExecutionProviderDevicePolicy_PREFER_CPU,
        2 => OrtExecutionProviderDevicePolicy_PREFER_NPU,
        3 => OrtExecutionProviderDevicePolicy_PREFER_GPU,
        4 => OrtExecutionProviderDevicePolicy_MAX_PERFORMANCE,
        5 => OrtExecutionProviderDevicePolicy_MAX_EFFICIENCY,
        6 => OrtExecutionProviderDevicePolicy_MIN_OVERALL_POWER,
        _ => throw ArgumentError(
          'Unknown value for OrtExecutionProviderDevicePolicy: $value',
        ),
      };
}

typedef EpSelectionDelegateFunction =
    ffi.Pointer<OrtStatus> Function(
      ffi.Pointer<ffi.Pointer<OrtEpDevice>> ep_devices,
      ffi.Size num_devices,
      ffi.Pointer<OrtKeyValuePairs> model_metadata,
      ffi.Pointer<OrtKeyValuePairs> runtime_metadata,
      ffi.Pointer<ffi.Pointer<OrtEpDevice>> selected,
      ffi.Size max_selected,
      ffi.Pointer<ffi.Size> num_selected,
      ffi.Pointer<ffi.Void> state,
    );
typedef DartEpSelectionDelegateFunction =
    ffi.Pointer<OrtStatus> Function(
      ffi.Pointer<ffi.Pointer<OrtEpDevice>> ep_devices,
      int num_devices,
      ffi.Pointer<OrtKeyValuePairs> model_metadata,
      ffi.Pointer<OrtKeyValuePairs> runtime_metadata,
      ffi.Pointer<ffi.Pointer<OrtEpDevice>> selected,
      int max_selected,
      ffi.Pointer<ffi.Size> num_selected,
      ffi.Pointer<ffi.Void> state,
    );

/// \brief Delegate to allow providing custom OrtEpDevice selection logic
///
/// This delegate is called by the EP selection code to allow the user to provide custom device selection logic.
/// The user can use this to select OrtEpDevice instances from the list of available devices.
///
/// \param ep_devices The list of available devices.
/// \param num_devices The number of available devices.
/// \param model_metadata The model metadata.
/// \param runtime_metadata The runtime metadata. May be nullptr.
/// \param selected Pre-allocated array to populate with selected OrtEpDevice pointers from ep_devices.
/// \param max_selected The maximum number of devices that can be selected in the pre-allocated array.
/// Currently the maximum is 8.
/// \param num_selected The number of selected devices.
/// \param state Opaque pointer. Required to use the delegate from other languages like C# and python.
///
/// \return OrtStatus* Selection status. Return nullptr on success.
/// Use CreateStatus to provide error info. Use ORT_FAIL as the error code.
/// ORT will release the OrtStatus* if not null.
typedef EpSelectionDelegate =
    ffi.Pointer<ffi.NativeFunction<EpSelectionDelegateFunction>>;

enum OrtHardwareDeviceType {
  OrtHardwareDeviceType_CPU(0),
  OrtHardwareDeviceType_GPU(1),
  OrtHardwareDeviceType_NPU(2);

  final int value;
  const OrtHardwareDeviceType(this.value);

  static OrtHardwareDeviceType fromValue(int value) => switch (value) {
    0 => OrtHardwareDeviceType_CPU,
    1 => OrtHardwareDeviceType_GPU,
    2 => OrtHardwareDeviceType_NPU,
    _ => throw ArgumentError('Unknown value for OrtHardwareDeviceType: $value'),
  };
}

final class OrtEpGraphSupportInfo extends ffi.Opaque {}

final class OrtNodeComputeContext extends ffi.Opaque {}

/// \brief The OrtNodeComputeInfo struct provides functions that an OrtEp implements to specify the compute
/// function for a compiled OrtGraph instance.
/// \since Version 1.23.
final class OrtNodeComputeInfo extends ffi.Struct {
  /// \brief The ONNX Runtime version the OrtNodeComputeInfo was compiled with.
  ///
  /// Implementation should set to ORT_API_VERSION.
  /// ORT will use this to ensure it does not call functions that were not available when the EP library was compiled.
  ///
  /// \since Version 1.23.
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Creates an opaque compute state object that is then passed to the Compute() function during inference.
  /// \param[in] this_ptr The OrtNodeComputeInfo instance.
  /// \param[in] compute_context OrtNodeComputeContext instance that contains compiled/fused node's name and host
  /// memory allocation functions. Can optionally be used to build the compute state.
  /// \param[out] compute_state Output parameter that is assigned the opaque computation state. ONNX Runtime calls
  /// ReleaseState() (after calling Compute()) to allow the implementer to release the
  /// compute state.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtStatus> Function(
        ffi.Pointer<OrtNodeComputeInfo> this_ptr,
        ffi.Pointer<OrtNodeComputeContext> compute_context,
        ffi.Pointer<ffi.Pointer<ffi.Void>> compute_state,
      )
    >
  >
  CreateState;

  /// \brief Computation function called to execute the fused node compiled by an OrtEp instance.
  /// \param[in] this_ptr The OrtNodeComputeInfo instance.
  /// \param[in] compute_state The opaque computation state returned by CreateState().
  /// \param[in] kernel_context The OrtKernelContext instance used to access inputs/outputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtStatus> Function(
        ffi.Pointer<OrtNodeComputeInfo> this_ptr,
        ffi.Pointer<ffi.Void> compute_state,
        ffi.Pointer<OrtKernelContext> kernel_context,
      )
    >
  >
  Compute;

  /// \brief Releases the compute state returned by CreateState().
  /// \param[in] this_ptr The OrtNodeComputeInfo instance.
  /// \param[inout] compute_state The opaque compute state returned by CreateState().
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtNodeComputeInfo> this_ptr,
        ffi.Pointer<ffi.Void> compute_state,
      )
    >
  >
  ReleaseState;
}

/// \brief The data layout type.
///
/// EPs may specify a preferred data layout type. ORT's default layout type is OrtEpDataLayout_NCHW, or
/// OrtEpDataLayout_Default.
///
/// \since Version 1.23.
enum OrtEpDataLayout {
  OrtEpDataLayout_NCHW(0),
  OrtEpDataLayout_NHWC(1);

  static const OrtEpDataLayout_Default = OrtEpDataLayout_NCHW;

  final int value;
  const OrtEpDataLayout(this.value);

  static OrtEpDataLayout fromValue(int value) => switch (value) {
    0 => OrtEpDataLayout_NCHW,
    1 => OrtEpDataLayout_NHWC,
    _ => throw ArgumentError('Unknown value for OrtEpDataLayout: $value'),
  };

  @override
  String toString() {
    if (this == OrtEpDataLayout_NCHW)
      return "OrtEpDataLayout.OrtEpDataLayout_NCHW, OrtEpDataLayout.OrtEpDataLayout_Default";
    return super.toString();
  }
}

final class OrtMemoryDevice extends ffi.Opaque {}

/// \brief Struct that an EP implements for Stream Notifications.
///
/// \since Version 1.23.
final class OrtSyncNotificationImpl extends ffi.Struct {
  /// < Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Release the OrtSyncNotificationImpl instance.
  ///
  /// This is called by ORT when the OrtSyncNotificationImpl instance is no longer needed.
  /// The implementation should release any resources held by the instance.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncNotificationImpl instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtSyncNotificationImpl> this_ptr)
    >
  >
  Release;

  /// \brief Called by ORT to activate the notification.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncNotificationImpl instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSyncNotificationImpl> this_ptr)
    >
  >
  Activate;

  /// \brief Wait for a device to device operation to complete.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncNotificationImpl instance.
  /// \param[in] consumer_stream The OrtSyncStream instance that will wait on this notification to be activated.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSyncNotificationImpl> this_ptr,
        ffi.Pointer<OrtSyncStream> consumer_stream,
      )
    >
  >
  WaitOnDevice;

  /// \brief Wait for a device to host operation to complete.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncNotificationImpl instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSyncNotificationImpl> this_ptr)
    >
  >
  WaitOnHost;
}

/// \brief Struct that an EP implements if it wishes to implement Stream support.
///
/// This struct provides the overrides for onnxruntime::Stream's virtual methods.
///
/// \since Version 1.23.
final class OrtSyncStreamImpl extends ffi.Struct {
  /// < Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Release the OrtSyncStreamImpl instance.
  ///
  /// This is called by ORT when the OrtSyncStreamImpl instance is no longer needed.
  /// The implementation should release any resources held by the instance.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncStreamImpl instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtSyncStreamImpl> this_ptr)
    >
  >
  Release;

  /// \brief Get the handle of the stream.
  ///
  /// This returns the native handle for the stream. e.g. cudaStream_t for CUDA streams.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncStreamImpl instance.
  /// \return The handle of the stream.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Void> Function(ffi.Pointer<OrtSyncStreamImpl> this_ptr)
    >
  >
  GetHandle;

  /// \brief Create an OrtSyncNotificationImpl for the OrtSyncStreamImpl instance.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncStreamImpl instance
  /// \param[out] notification The new OrtSyncNotificationImpl instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSyncStreamImpl> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtSyncNotificationImpl>> notification,
      )
    >
  >
  CreateNotification;

  /// \brief Flush the stream.
  ///
  /// This is called by ORT to flush the stream, ensuring that all operations submitted to the stream are completed.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncStreamImpl instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSyncStreamImpl> this_ptr)
    >
  >
  Flush;

  /// \brief Notify the stream that a session run has ended.
  ///
  /// This is called by ORT to notify the stream that a session run has ended, allowing the stream to perform any
  /// necessary cleanup or finalization.
  ///
  /// \param[in] this_ptr Pointer to the OrtSyncStreamImpl instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSyncStreamImpl> this_ptr)
    >
  >
  OnSessionRunEnd;
}

/// Opaque types for kernel-based EPs
final class OrtKernelRegistry extends ffi.Opaque {}

/// \brief The OrtEp struct provides functions to implement for an execution provider.
/// \since Version 1.22.
final class OrtEp extends ffi.Struct {
  /// \brief The ONNX Runtime version the execution provider was compiled with.
  ///
  /// Implementation should set to ORT_API_VERSION.
  /// ORT will use this to ensure it does not call functions that were not available when the library was compiled.
  ///
  /// \since Version 1.22.
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Get the execution provider name.
  ///
  /// The returned string should be a null-terminated, UTF-8 encoded string. ORT will copy it.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \return The execution provider name.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtEp> this_ptr)
    >
  >
  GetName;

  /// \brief Get information about the nodes supported by the OrtEp instance.
  ///
  /// IMPORTANT: This is not the final version of this API function. This is currently experimental but will
  /// be stabilized by the ONNX Runtime 1.23 release.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[in] graph The OrtGraph instance for which to populate node support. The OrtGraph could be a nested subgraph
  /// contained by a node (e.g., an If or Loop node). ONNX Runtime calls this function separately
  /// for each nested subgraph.
  /// \param[inout] graph_support_info OrtEpGraphSupportInfo instance that the implementer must fill out in order to
  /// specify the supported nodes.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<OrtEpGraphSupportInfo> graph_support_info,
      )
    >
  >
  GetCapability;

  /// \brief Compile OrtGraph instances assigned to the OrtEp. Implementer must set a OrtNodeComputeInfo instance
  /// for each OrtGraph in order to define its computation function.
  ///
  /// If the session is configured to generate a pre-compiled model, the execution provider must return EPContext nodes,
  /// as OrtNode instances, that ONNX Runtime uses to create a pre-compiled model, known as an "EPContext model".
  /// An EPContext model contains EPContext nodes. Each EPContext node encapsulates the pre-compiled binary data for a
  /// OrtGraph compiled for a specific execution provider. For more details about the EPContext design, refer to:
  /// \htmlonly
  /// <a href="https://onnxruntime.ai/docs/execution-providers/EP-Context-Design.html">EPContext design document.</a>
  /// \endhtmlonly
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[in] graphs Array of `count` OrtGraph instances to compile. Each graph contains only the nodes for
  /// which the execution provider indicated support. Nested subgraphs contained by a
  /// node, such as an If or Loop, have separate OrtGraph instances.
  /// \param[in] fused_nodes Array of `count` fused nodes that will replace the compiled graphs.
  /// Each fused node is an OrtNode initialized with the intended fused node name and
  /// input/output information.
  /// \param[in] count The number of OrtGraph instances to compile.
  /// \param[out] node_compute_infos Array of `count` OrtNodeComputeInfo instances that define each OrtGraph instance's
  /// computation function. The implementer allocates the OrtNodeComputeInfo instances.
  /// ORT calls ReleaseNodeComputeInfos() to release multiple instances in a batch.
  /// \param[out] ep_context_nodes Output array of `count` OrtNode instances, each representing an EPContext
  /// node for a compiled OrtGraph. The execution provider must use
  /// OrtModelEditorApi::CreateNode to create the OrtNode instances. ONNX Runtime takes
  /// ownership of the OrtNode instances, so the execution provider must NOT call
  /// OrtApi::ReleaseNode. Should be ignored if the session is not configured to generate an
  /// EPContext model.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \note Do NOT cache the provided OrtGraph instances in any of the OrtNodeComputeInfo functions because the
  /// graphs are only valid for the duration of the call to Compile. Any graph/node/input/output
  /// names that are needed by the OrtNodeComputeInfo functions must be copied and stored by the OrtEp.
  ///
  /// \note As of version 1.24, implementation of this function is optional if the EP does not compile nodes and
  /// uses a kernel registry instead.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtGraph>> graphs,
        ffi.Pointer<ffi.Pointer<OrtNode>> fused_nodes,
        ffi.Size count,
        ffi.Pointer<ffi.Pointer<OrtNodeComputeInfo>> node_compute_infos,
        ffi.Pointer<ffi.Pointer<OrtNode>> ep_context_nodes,
      )
    >
  >
  Compile;

  /// \brief Release OrtNodeComputeInfo instances.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[inout] node_compute_infos The OrtNodeComputeInfo instances to release.
  /// \param[in] num_node_compute_infos The number of OrtNodeComputeInfo instances.
  ///
  /// \note As of version 1.24, implementation of this function is optional if the EP does not compile nodes and
  /// uses a kernel registry instead.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtNodeComputeInfo>> node_compute_infos,
        ffi.Size num_node_compute_infos,
      )
    >
  >
  ReleaseNodeComputeInfos;

  /// \brief Get the EP's preferred data layout.
  ///
  /// \note Implementation of this function is optional.
  /// If not implemented, ORT will assume that this EP prefers the data layout `OrtEpDataLayout::NCHW`.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[out] preferred_data_layout The EP's preferred data layout.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<ffi.UnsignedInt> preferred_data_layout,
      )
    >
  >
  GetPreferredDataLayout;

  /// \brief Given an op with domain `domain` and type `op_type`, determine whether an associated node's data layout
  /// should be converted to `target_data_layout`.
  /// If the EP prefers a non-default data layout (see `GetPreferredDataLayout()`), this function will be called
  /// during layout transformation with `target_data_layout` set to the EP's preferred data layout.
  ///
  /// \note Implementation of this function is optional.
  /// If an EP prefers a non-default data layout, it may implement this to customize the specific op data layout
  /// preferences at a finer granularity.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[in] domain The op domain. An empty string means the ONNX domain.
  /// \param[in] op_type The op type.
  /// \param[in] target_data_layout The target data layout.
  /// \param[out] should_convert Whether the associated node's data layout should be converted to `target_data_layout`.
  /// If greater than 0, convert.
  /// If 0, don't convert.
  /// Otherwise, if less than 0, leave the decision to ORT.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<ffi.Char> domain,
        ffi.Pointer<ffi.Char> op_type,
        ffi.UnsignedInt target_data_layout,
        ffi.Pointer<ffi.Int> should_convert,
      )
    >
  >
  ShouldConvertDataLayoutForOp;

  /// \brief Set dynamic options on this EP.
  ///
  /// Dynamic options can be set by the user at any time after session creation with `OrtApi::SetEpDynamicOptions()`.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[in] option_keys The dynamic option keys.
  /// \param[in] option_values The dynamic option values.
  /// \param[in] num_options The number of dynamic options.
  ///
  /// \note Implementation of this function is optional.
  /// An EP should only implement this if it needs to handle any dynamic options.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<ffi.Pointer<ffi.Char>> option_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> option_values,
        ffi.Size num_options,
      )
    >
  >
  SetDynamicOptions;

  /// \brief Called by ORT to notify the EP of the start of a run.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[in] run_options The run options for this run.
  ///
  /// \note Implementation of this function is optional.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<OrtRunOptions> run_options,
      )
    >
  >
  OnRunStart;

  /// \brief Called by ORT to notify the EP of the end of a run.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[in] run_options The run options for this run.
  /// \param[in] sync_stream Whether any associated stream should be synchronized during this call.
  /// Only applicable if there is such a stream.
  ///
  /// \note Implementation of this function is optional.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<OrtRunOptions> run_options,
        ffi.Bool sync_stream,
      )
    >
  >
  OnRunEnd;

  /// \brief Create an OrtAllocator for the given OrtMemoryInfo for an OrtSession.
  ///
  /// The OrtMemoryInfo instance will match one of the values set in the OrtEpDevice using EpDevice_AddAllocatorInfo.
  /// Any allocator specific options should be read from the session options.
  ///
  /// If nullptr OrtEpFactory::CreateAllocator will be used.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] memory_info The OrtMemoryInfo to create the allocator for. May be nullptr.
  /// \param[out] allocator The created OrtAllocator instance. Set to nullptr if the default CPU allocator is used.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<OrtMemoryInfo> memory_info,
        ffi.Pointer<ffi.Pointer<OrtAllocator>> allocator,
      )
    >
  >
  CreateAllocator;

  /// \brief Create a synchronization stream for the given memory device for an OrtSession.
  ///
  /// This is used to create a synchronization stream for the execution provider and is used to synchronize
  /// operations on the device during model execution.
  /// Any stream specific options should be read from the session options.
  ///
  /// If nullptr OrtEpFactory::CreateSyncStreamForDevice will be used.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] memory_device The OrtMemoryDevice to create the synchronization stream for.
  /// \param[out] stream The created OrtSyncStreamImpl instance. nullptr if the execution provider is not stream aware.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<OrtMemoryDevice> memory_device,
        ffi.Pointer<ffi.Pointer<OrtSyncStreamImpl>> stream,
      )
    >
  >
  CreateSyncStreamForDevice;

  /// \brief Get a string with details about the EP stack used to produce a compiled model.
  ///
  /// This function gets a compatibility information string that contains details about the execution provider
  /// used to compile a given model. This string can later be used with ValidateCompiledModelCompatibilityInfo
  /// to determine if a compiled model is compatible with the EP.
  ///
  /// The returned string should be a null-terminated, UTF-8 encoded string. ORT will copy it.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[in] graph The OrtGraph instance for which to generate compatibility information.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<OrtGraph> graph,
      )
    >
  >
  GetCompiledModelCompatibilityInfo;

  /// \brief Gets the execution provider's kernel registry, if any.
  ///
  /// A kernel registry contains kernel creation information for operator kernels supported by an EP.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[out] kernel_registry Output parameter set to the EP's kernel registry, which must remain valid throughout
  /// the lifetime of the EP. Can be NULL if the EP doesn't use a kernel registry.
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \note Implementation of this function is optional. If set to NULL, ORT assumes the EP compiles nodes.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtKernelRegistry>> kernel_registry,
      )
    >
  >
  GetKernelRegistry;

  /// \brief Gets whether the execution provider supports concurrent run calls made on the session.
  ///
  /// \param[in] this_ptr The OrtEp instance.
  /// \param[out] is_supported Whether concurrent runs are supported.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \note Implementation of this function is optional and it may be set to NULL.
  /// If not implemented, ORT assumes that concurrent runs are supported.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEp> this_ptr,
        ffi.Pointer<ffi.Bool> is_supported,
      )
    >
  >
  IsConcurrentRunSupported;
}

/// Public enum for compiled model compatibility across EPs.
enum OrtCompiledModelCompatibility {
  OrtCompiledModelCompatibility_EP_NOT_APPLICABLE(0),
  OrtCompiledModelCompatibility_EP_SUPPORTED_OPTIMAL(1),
  OrtCompiledModelCompatibility_EP_SUPPORTED_PREFER_RECOMPILATION(2),
  OrtCompiledModelCompatibility_EP_UNSUPPORTED(3);

  final int value;
  const OrtCompiledModelCompatibility(this.value);

  static OrtCompiledModelCompatibility fromValue(int value) => switch (value) {
    0 => OrtCompiledModelCompatibility_EP_NOT_APPLICABLE,
    1 => OrtCompiledModelCompatibility_EP_SUPPORTED_OPTIMAL,
    2 => OrtCompiledModelCompatibility_EP_SUPPORTED_PREFER_RECOMPILATION,
    3 => OrtCompiledModelCompatibility_EP_UNSUPPORTED,
    _ => throw ArgumentError(
      'Unknown value for OrtCompiledModelCompatibility: $value',
    ),
  };
}

/// \brief Struct that an EP implements for IDataTransfer to copy between devices it uses and CPU.
///
/// \since Version 1.23.
final class OrtDataTransferImpl extends ffi.Struct {
  /// < Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Release the OrtDataTransferImpl instance.
  ///
  /// This is called by ORT when the OrtDataTransferImpl instance is no longer needed.
  /// The implementation should release any resources held by the instance.
  ///
  /// \param[in] this_ptr Pointer to the OrtDataTransferImpl instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtDataTransferImpl> this_ptr)
    >
  >
  Release;

  /// \brief Check if the implementation can copy between the source and destination memory devices.
  ///
  /// \param[in] this_ptr Pointer to the OrtDataTransferImpl instance.
  /// \param[in] src_memory_device Source OrtMemoryDevice to copy from.
  /// \param[in] dst_memory_device Destination OrtMemoryDevice to copy to.
  /// \return True if the implementation can copy between the devices.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Bool Function(
        ffi.Pointer<OrtDataTransferImpl> this_ptr,
        ffi.Pointer<OrtMemoryDevice> src_memory_device,
        ffi.Pointer<OrtMemoryDevice> dst_memory_device,
      )
    >
  >
  CanCopy;

  /// \brief Copy tensors from src_tensors to dst_tensors using the provided streams.
  ///
  /// The implementation can use the provided streams to perform asynchronous copies if supported.
  /// If a stream is not available, the copy is performed synchronously.
  ///
  /// \param[in] this_ptr Pointer to the OrtDataTransferImpl instance.
  /// \param[in] src_tensors Array of source OrtValue pointers to copy from.
  /// \param[in] dst_tensors Array of destination OrtValue pointers to copy to.
  /// \param[in] streams Array of OrtSyncStream pointers for the copy operations, if the execution provider is stream
  /// aware. nullptr if it is not.
  /// \param[in] num_tensors Number of tensors to copy.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtDataTransferImpl> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtValue>> src_tensors,
        ffi.Pointer<ffi.Pointer<OrtValue>> dst_tensors,
        ffi.Pointer<ffi.Pointer<OrtSyncStream>> streams,
        ffi.Size num_tensors,
      )
    >
  >
  CopyTensors;
}

/// \brief Descriptor for creating a tensor from imported external memory.
///
/// \note The version field must be set to ORT_API_VERSION.
/// This ensures forward compatibility as fields may be added in future versions.
///
/// \since Version 1.24.
final class OrtExternalTensorDescriptor extends ffi.Struct {
  /// < Must be ORT_API_VERSION
  @ffi.Uint32()
  external int version;

  /// < Data type of tensor elements
  @ffi.UnsignedInt()
  external int element_typeAsInt;

  ONNXTensorElementDataType get element_type =>
      ONNXTensorElementDataType.fromValue(element_typeAsInt);

  /// < Array of dimension sizes
  external ffi.Pointer<ffi.Int64> shape;

  /// < Number of dimensions
  @ffi.Size()
  external int rank;

  /// < Additional offset within imported memory (default 0).
  /// Applied relative to OrtExternalMemoryDescriptor::offset_bytes.
  /// Enables multiple tensors from the same imported memory handle.
  @ffi.Size()
  external int offset_bytes;
}

/// \brief Struct that an EP implements for external resource import (memory + semaphore import).
///
/// This capability object provides methods for importing external GPU memory and semaphores
/// for zero-copy import. EPs that support D3D12, CUDA, HIP, or Vulkan external resource APIs
/// can implement this interface.
///
/// \since Version 1.24.
final class OrtExternalResourceImporterImpl extends ffi.Struct {
  /// < Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Check if the implementation can import external memory of the given handle type.
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] handle_type The type of external memory handle to check.
  /// \return True if the handle type is supported.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Bool Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.UnsignedInt handle_type,
      )
    >
  >
  CanImportMemory;

  /// \brief Import external memory.
  ///
  /// The EP creates a derived type of OrtExternalMemoryHandle and returns a pointer to the base.
  /// EP is responsible for the lifetime of the handle (release via ReleaseMemory).
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] desc Descriptor containing the external memory handle and properties.
  /// \param[out] out_handle Output parameter set to the created OrtExternalMemoryHandle (EP's derived type).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.Pointer<OrtExternalMemoryDescriptor> desc,
        ffi.Pointer<ffi.Pointer<OrtExternalMemoryHandle>> out_handle,
      )
    >
  >
  ImportMemory;

  /// \brief Release an imported external memory handle.
  ///
  /// The EP deletes its derived type instance.
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] handle The OrtExternalMemoryHandle to release (EP casts to its derived type).
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.Pointer<OrtExternalMemoryHandle> handle,
      )
    >
  >
  ReleaseMemory;

  /// \brief Create a tensor backed by imported external memory.
  ///
  /// The created tensor is a view over the imported memory and does not copy data.
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] mem_handle The imported external memory handle (EP casts to its derived type).
  /// \param[in] tensor_desc Descriptor specifying tensor element type, shape, and optional offset.
  /// \param[out] out_tensor Output parameter set to the created OrtValue containing the tensor.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.Pointer<OrtExternalMemoryHandle> mem_handle,
        ffi.Pointer<OrtExternalTensorDescriptor> tensor_desc,
        ffi.Pointer<ffi.Pointer<OrtValue>> out_tensor,
      )
    >
  >
  CreateTensorFromMemory;

  /// \brief Check if the implementation can import external semaphores of the given type.
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] type The type of external semaphore to check.
  /// \return True if the semaphore type is supported.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Bool Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.UnsignedInt type,
      )
    >
  >
  CanImportSemaphore;

  /// \brief Import an external semaphore.
  ///
  /// The EP creates a derived type of OrtExternalSemaphoreHandle and returns a pointer to the base.
  /// EP is responsible for the lifetime of the handle (release via ReleaseSemaphore).
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] desc Descriptor containing the external semaphore handle and type.
  /// \param[out] out_handle Output parameter set to the created OrtExternalSemaphoreHandle (EP's derived type).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.Pointer<OrtExternalSemaphoreDescriptor> desc,
        ffi.Pointer<ffi.Pointer<OrtExternalSemaphoreHandle>> out_handle,
      )
    >
  >
  ImportSemaphore;

  /// \brief Release an imported external semaphore handle.
  ///
  /// The EP deletes its derived type instance.
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] handle The OrtExternalSemaphoreHandle to release (EP casts to its derived type).
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.Pointer<OrtExternalSemaphoreHandle> handle,
      )
    >
  >
  ReleaseSemaphore;

  /// \brief Wait on an external semaphore on the EP's stream.
  ///
  /// Inserts a wait operation into the EP's stream that blocks until the semaphore
  /// reaches the specified value.
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] handle The imported external semaphore (EP casts to its derived type).
  /// \param[in] stream The OrtSyncStream to wait on.
  /// \param[in] value The fence/semaphore value to wait for.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.Pointer<OrtExternalSemaphoreHandle> handle,
        ffi.Pointer<OrtSyncStream> stream,
        ffi.Uint64 value,
      )
    >
  >
  WaitSemaphore;

  /// \brief Signal an external semaphore from the EP's stream.
  ///
  /// Inserts a signal operation into the EP's stream that sets the semaphore
  /// to the specified value when reached.
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  /// \param[in] handle The imported external semaphore (EP casts to its derived type).
  /// \param[in] stream The OrtSyncStream to signal from.
  /// \param[in] value The fence/semaphore value to signal.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr,
        ffi.Pointer<OrtExternalSemaphoreHandle> handle,
        ffi.Pointer<OrtSyncStream> stream,
        ffi.Uint64 value,
      )
    >
  >
  SignalSemaphore;

  /// \brief Release the OrtExternalResourceImporterImpl instance.
  ///
  /// This is called by ORT when the OrtExternalResourceImporterImpl instance is no longer needed.
  /// The implementation should release any resources held by the instance.
  ///
  /// \param[in] this_ptr Pointer to the OrtExternalResourceImporterImpl instance.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtExternalResourceImporterImpl> this_ptr)
    >
  >
  Release;
}

/// \brief The OrtEpFactory provides functions to create and manage execution providers.
/// \since Version 1.22.
final class OrtEpFactory extends ffi.Struct {
  /// \brief The ONNX Runtime version the execution provider was compiled with.
  ///
  /// Implementation should set to ORT_API_VERSION.
  /// ORT will use this to ensure it does not call functions that were not available when the library was compiled.
  ///
  /// \since Version 1.22.
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Get the name of the execution provider that the factory creates.
  ///
  /// The returned string should be a null-terminated, UTF-8 encoded string. ORT will copy it.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \return The name of the execution provider the factory creates.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtEpFactory> this_ptr)
    >
  >
  GetName;

  /// return EP vendor
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtEpFactory> this_ptr)
    >
  >
  GetVendor;

  /// \brief Get information from the execution provider about OrtHardwareDevice support.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// Non-const as the factory is passed through to the CreateEp call via the OrtEpDevice.
  /// \param[in] devices The OrtHardwareDevice instances that are available.
  /// \param[in] num_devices The number of OrtHardwareDevice instances.
  /// \param[out] ep_devices OrtEpDevice instances for each OrtHardwareDevice that the EP can use.
  /// The implementation should call OrtEpApi::CreateEpDevice to create, and add the OrtEpDevice
  /// instances to this pre-allocated array. ORT will take ownership of the values returned.
  /// i.e. usage is `ep_devices[0] = <ptr to OrtEpDevice created with OrtEpApi::CreateEpDevice>;`
  /// \param[in] max_ep_devices The maximum number of OrtEpDevices that can be added to ep_devices.
  /// Current default is 8. This can be increased if needed.
  /// \param[out] num_ep_devices The number of EP devices added to ep_devices.
  /// \return true if the factory can create an execution provider that uses `device`.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtHardwareDevice>> devices,
        ffi.Size num_devices,
        ffi.Pointer<ffi.Pointer<OrtEpDevice>> ep_devices,
        ffi.Size max_ep_devices,
        ffi.Pointer<ffi.Size> num_ep_devices,
      )
    >
  >
  GetSupportedDevices;

  /// \brief Function to create an OrtEp instance for use in a Session.
  ///
  /// ORT will call ReleaseEp to release the instance when it is no longer needed.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] devices The OrtHardwareDevice instances that the execution provider was selected to use.
  /// May be a subset of the OrtHardwareDevice instances that the execution provider's factory
  /// set as supported in the call to OrtEpFactory::GetSupportedDevices.
  /// \param[in] ep_metadata_pairs Execution provider metadata that was provided to OrtEpApi::CreateEpDevice, for each
  /// device.
  /// \param[in] num_devices The number of devices the execution provider was selected for.
  /// \param[in] session_options The OrtSessionOptions instance that contains the configuration options for the
  /// session. This will include ep_options from GetSupportedDevices as well as any
  /// user provided overrides.
  /// Execution provider options will have been added with a prefix of 'ep.[ep name].'.
  /// The OrtSessionOptions instance will NOT be valid after this call and should not be
  /// stored for later use.
  /// \param[in] logger The OrtLogger instance for the session that the execution provider should use for logging.
  /// \param[out] ep The OrtEp instance created by the factory.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtHardwareDevice>> devices,
        ffi.Pointer<ffi.Pointer<OrtKeyValuePairs>> ep_metadata_pairs,
        ffi.Size num_devices,
        ffi.Pointer<OrtSessionOptions> session_options,
        ffi.Pointer<OrtLogger> logger,
        ffi.Pointer<ffi.Pointer<OrtEp>> ep,
      )
    >
  >
  CreateEp;

  /// \brief Release the OrtEp instance.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] ep The OrtEp instance to release.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<OrtEp> ep,
      )
    >
  >
  ReleaseEp;

  /// \brief Get the vendor id who owns the execution provider that the factory creates.
  ///
  /// This is typically the PCI vendor ID. See https://pcisig.com/membership/member-companies
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \return vendor_id The vendor ID of the execution provider the factory creates.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Uint32 Function(ffi.Pointer<OrtEpFactory> this_ptr)>
  >
  GetVendorId;

  /// \brief Get the version of the execution provider that the factory creates.
  ///
  /// The version string should adhere to the Semantic Versioning 2.0 specification
  /// (https://github.com/semver/semver/blob/v2.0.0/semver.md).
  ///
  /// The returned string should be a null-terminated, UTF-8 encoded string. ORT will copy it.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \return The execution provider version string.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtEpFactory> this_ptr)
    >
  >
  GetVersion;

  /// \brief Validate the compatibility of a compiled model with the execution provider factory for one or more devices.
  ///
  /// Given a compatibility info string produced during model compilation, the EP factory should determine whether the
  /// compiled model is compatible with the EP factory when targeting the provided hardware devices. All devices provided
  /// must belong to the same execution provider instance that this factory creates.
  ///
  /// The EP factory implementation should consider the set of devices (e.g., multi-adapter or multi-GPU scenarios) when
  /// evaluating compatibility and set `model_compatibility` accordingly.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] devices Array of OrtHardwareDevice pointers that the EP would run on. All must map to this EP.
  /// \param[in] num_devices Number of entries in `devices`.
  /// \param[in] compatibility_info The compatibility information string produced when the model was compiled.
  /// \param[out] model_compatibility OrtCompiledModelCompatibility value describing the compatibility of the model with the EP.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtHardwareDevice>> devices,
        ffi.Size num_devices,
        ffi.Pointer<ffi.Char> compatibility_info,
        ffi.Pointer<ffi.UnsignedInt> model_compatibility,
      )
    >
  >
  ValidateCompiledModelCompatibilityInfo;

  /// \brief Create an OrtAllocator that can be shared across sessions for the given OrtMemoryInfo.
  ///
  /// The factory that creates the EP is responsible for providing the allocators required by the EP.
  /// The OrtMemoryInfo instance will match one of the values set in the OrtEpDevice using EpDevice_AddAllocatorInfo.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] memory_info The OrtMemoryInfo to create the allocator for. May be nullptr.
  /// \param[in] allocator_options Optional key-value pairs for allocator options, can be nullptr.
  /// \param[out] allocator The created OrtAllocator instance. Set to nullptr if the default CPU allocator is used.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<OrtMemoryInfo> memory_info,
        ffi.Pointer<OrtKeyValuePairs> allocator_options,
        ffi.Pointer<ffi.Pointer<OrtAllocator>> allocator,
      )
    >
  >
  CreateAllocator;

  /// \brief Release an OrtAllocator created by the factory.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<OrtAllocator> allocator,
      )
    >
  >
  ReleaseAllocator;

  /// \brief Create an OrtDataTransferImpl instance for the factory.
  ///
  /// This is used to create an IDataTransfer implementation that can be used to copy data between devices
  /// that the execution provider supports.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[out] data_transfer The created OrtDataTransferImpl instance. Set to nullptr if not required.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtDataTransferImpl>> data_transfer,
      )
    >
  >
  CreateDataTransfer;

  /// \brief Check if execution providers created by the factory are stream aware.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \return True if the factory creates execution providers that are stream aware and it implements CreateSyncStreamForDevice.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Bool Function(ffi.Pointer<OrtEpFactory> this_ptr)>
  >
  IsStreamAware;

  /// \brief Create a synchronization stream for the given memory device.
  ///
  /// This is used to create a synchronization stream for the memory device that can be used for operations outside of
  /// a session.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] memory_device The OrtMemoryDevice to create the synchronization stream for.
  /// \param[in] stream_options Options for stream creation. May be nullptr.
  /// \param[out] stream The created OrtSyncStreamImpl instance. nullptr if the execution provider is not stream aware.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<OrtMemoryDevice> memory_device,
        ffi.Pointer<OrtKeyValuePairs> stream_options,
        ffi.Pointer<ffi.Pointer<OrtSyncStreamImpl>> stream,
      )
    >
  >
  CreateSyncStreamForDevice;

  /// \brief Check for known incompatibility reasons between a hardware device and this execution provider.
  ///
  /// This function allows an execution provider to check if a specific hardware device is compatible
  /// with the execution provider. The EP can set specific incompatibility reasons via the
  /// OrtDeviceEpIncompatibilityDetails parameter using OrtEpApi::DeviceEpIncompatibilityDetails_SetDetails.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] hw The hardware device to check for incompatibility.
  /// \param[in,out] details Pre-allocated incompatibility details object created and initialized by ORT.
  /// The EP can use OrtEpApi::DeviceEpIncompatibilityDetails_SetDetails to set
  /// incompatibility information. If the device is compatible, the EP can
  /// leave the object unchanged (it defaults to no incompatibility).
  ///
  /// \note Implementation of this function is optional.
  /// If not implemented, ORT will assume the device is compatible with this EP.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<OrtHardwareDevice> hw,
        ffi.Pointer<OrtDeviceEpIncompatibilityDetails> details,
      )
    >
  >
  GetHardwareDeviceIncompatibilityDetails;

  /// \brief Create an OrtExternalResourceImporterImpl for external resource import.
  ///
  /// This is used to create an external resource importer that enables zero-copy import of
  /// external GPU memory (e.g., D3D12 shared resources) and synchronization primitives
  /// (e.g., D3D12 timeline fences).
  ///
  /// EPs that support external resource import (via CUDA, HIP, Vulkan, or D3D12 APIs) can
  /// implement this to allow applications to share GPU resources without copies.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[in] ep_device The OrtEpDevice to create the external resource importer for.
  /// \param[out] out_importer The created OrtExternalResourceImporterImpl instance.
  /// Set to nullptr if external resource import is not supported.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \note Implementation of this function is optional.
  /// An EP factory should only implement this if it supports external resource import.
  /// If not implemented or not supported, return ORT_NOT_IMPLEMENTED or set out_importer to nullptr.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<OrtEpDevice> ep_device,
        ffi.Pointer<ffi.Pointer<OrtExternalResourceImporterImpl>> out_importer,
      )
    >
  >
  CreateExternalResourceImporterForDevice;

  /// \brief Returns the number of OrtCustomOpDomains that this factory provides.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[out] num_domains Output parameter set to the number of provided OrtCustomOpDomain instances.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<ffi.Size> num_domains,
      )
    >
  >
  GetNumCustomOpDomains;

  /// \brief Gets the EP-specific OrtCustomOpDomains.
  ///
  /// This function is used when running inference on a model that contains EP-specific custom operations.
  ///
  /// Workflow:
  /// 1. The EP factory implements this function to supply a list of OrtCustomOpDomain instances.
  /// 2. The application either 1) calls SessionOptionsAppendExecutionProvider_V2() with an OrtEpDevice containing
  /// the plugin EP's factory or 2) enables auto ep selection.
  /// 3. 1) SessionOptionsAppendExecutionProvider_V2() appends the provided OrtCustomOpDomains to the
  /// session options or 2) ORT registers the OrtCustomOpDomains provided by the EP devices
  /// that could be potentially selected.
  ///
  /// As a result, any session created from these session options will have these custom op domains registered
  /// in ORT, ensuring that the custom ops are properly recognized and validated when the model is loaded.
  ///
  /// Plugin EPs can provide two types of custom ops:
  /// 1. A full OrtCustomOp with a concrete kernel implementation
  /// - A Plugin EP can supply an OrtCustomOp and a corresponding CustomKernel::Compute() implementation.
  /// - In GetCapability(), it calls EpGraphSupportInfo_AddSingleNode() to inform ORT
  /// that the custom node should NOT be fused or compiled. Instead, ORT should invoke
  /// the custom node's Compute() function at runtime.
  ///
  /// 2. A "placeholder" OrtCustomOp with an empty kernel implementation
  /// - A compile-based Plugin EP can supply an OrtCustomOp whose CustomKernel::Compute()
  /// does nothing. The purpose is to satisfy model validation during model loading by
  /// registering the custom op as a valid operator in the session.
  /// - In GetCapability(), the EP should call EpGraphSupportInfo_AddNodesToFuse() to
  /// notify ORT that this custom node should be fused and compiled by the EP.
  /// - In Compile(), the EP executes its compiled bits to perform inference for
  /// the fused custom node.
  ///
  /// Note: The OrtCustomOpDomain instances must be valid while any session is using them.
  /// EP factory has the responsibility to release OrtCustomOpDomain instances it creates. It happens
  /// automatically if using the C++ Ort::CustomOpDomain class.
  ///
  /// \param[in] this_ptr The OrtEpFactory instance.
  /// \param[out] domains Array of `num_domains` elements pre-allocated by ORT that should be filled with
  /// OrtCustomOpDomain instances created by the EP. The `num_domains` is the value returned by
  /// GetNumCustomOpDomains().
  /// \param[in] num_domains The size of the `domains` array pre-allocated by ORT.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> this_ptr,
        ffi.Pointer<ffi.Pointer<OrtCustomOpDomain>> domains,
        ffi.Size num_domains,
      )
    >
  >
  GetCustomOpDomains;
}

/// \brief The OrtNodeFusionOptions struct specifies options for fusing nodes supported by an execution provider.
///
/// Refer to OrtEpApi::EpGraphSupportInfo_AddNodesToFuse.
///
/// \since Version 1.23.
final class OrtNodeFusionOptions extends ffi.Struct {
  /// \brief The ONNX Runtime version the OrtNodeFusionOptions was compiled with.
  ///
  /// Implementation should set to ORT_API_VERSION.
  /// ORT will use this to ensure it does not use members that were not available when the EP library was compiled.
  ///
  /// \since Version 1.23.
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief If set to true, specify that the execution provider does not require ONNX Runtime to provide constant
  /// initializers as inputs to the fused node during model inference. This is used when the execution
  /// provider saves a copy of constant initializers, and allows ONNX Runtime to release constant initializers that
  /// are not used by any execution provider.
  ///
  /// If not specified, defaults to false. That is, ONNX Runtime provides constant initializers as inputs to
  /// the fused node by default.
  ///
  /// \since Version 1.23.
  @ffi.Bool()
  external bool drop_constant_initializers;
}

/// \brief This matches OrtDevice::MemoryType values
enum OrtDeviceMemoryType {
  /// < Device memory
  OrtDeviceMemoryType_DEFAULT(0),

  /// < Shared/pinned memory for transferring between CPU and the device
  OrtDeviceMemoryType_HOST_ACCESSIBLE(5);

  final int value;
  const OrtDeviceMemoryType(this.value);

  static OrtDeviceMemoryType fromValue(int value) => switch (value) {
    0 => OrtDeviceMemoryType_DEFAULT,
    5 => OrtDeviceMemoryType_HOST_ACCESSIBLE,
    _ => throw ArgumentError('Unknown value for OrtDeviceMemoryType: $value'),
  };
}

final class OrtKernelDef extends ffi.Opaque {}

final class OrtSharedPrePackedWeightCache extends ffi.Opaque {}

/// \brief Contains functions that an OrtEp implements to specify the computation for an operator kernel.
/// \since Version 1.24.
final class OrtKernelImpl extends ffi.Struct {
  /// < Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int ort_version_supported;

  /// < EP must initialize to 0. Used internally by ORT.
  @ffi.Uint32()
  external int flags;

  /// \brief Computation function called to execute the kernel on an EP.
  ///
  /// \note Implementation of this function is required.
  ///
  /// \param[in] this_ptr The OrtKernelImpl instance.
  /// \param[in] context The OrtKernelContext instance that provides access to the inputs and outputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelImpl> this_ptr,
        ffi.Pointer<OrtKernelContext> context,
      )
    >
  >
  Compute;

  /// \brief Called by ORT to release the OrtKernelImpl instance and its resources.
  ///
  /// \note Implementation of this function is required.
  ///
  /// \param[in] this_ptr The OrtKernelImpl instance.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtKernelImpl> this_ptr)>
  >
  Release;

  /// \brief Optional function to pre-pack a constant tensor (i.e., a weight) to the kernel's preferred data layout.
  ///
  /// For example, a Conv kernel can define this function to pack input W to the channel-last data layout
  /// before inference.
  ///
  /// Pre-packing can operate in three different modes: no pre-packing mode, sharing mode, and non-sharing mode.
  /// 1) No pre-packing mode: The kernel can forgo any weight pre-packing for the given `input_index` by setting
  /// `is_packed` to false and returning a successful OrtStatus. In this mode, the kernel's
  /// OrtKernelImpl::SetSharedPrePackedWeight() function is not called for that specific
  /// `input_index`.
  /// 2) Sharing mode: Sharing is allowed if the `prepacked_weight_cache` argument is not NULL and the EP stores
  /// weight data in CPU-accessible memory. In this case, the kernel can optionally choose
  /// to share the packed weight with other kernels that use the same weight
  /// (compared by content hash). To do so, the kernel must allocate the packed weight with the
  /// provided `allocator`, then it stores the packed weight data into `prepacked_weight_cache`
  /// via SharedPrePackedWeightCache_StoreWeightData(), sets `is_packed` to true, and returns a
  /// successful OrtStatus. ORT will subsequently call OrtKernelImpl::SetSharedPrePackedWeight()
  /// to provide this kernel with the actual shared weight data, whose memory location could
  /// differ (i.e., if shared data was allocated by a previously processed kernel).
  /// 3) Non-sharing mode: In non-sharing mode, the `prepacked_weight_cache` argument is ignored. In this mode,
  /// the implementation allocates the packed data with the provided `allocator`, sets
  /// `is_packed` to true, and returns a successful OrtStatus. The kernel is ultimately
  /// responsible for releasing the packed data for the weight with `allocator`.
  /// ORT may release the original (unpacked) weight, which must not be accessed in
  /// OrtKernelImpl::Compute(). Note that in this mode, the kernel's
  /// OrtKernelImpl::SetSharedPrePackedWeight() function is not called by ORT for that specific
  /// `input_index`.
  ///
  /// \note This function is based on the internal OpKernel::PrePack() virtual function used within ORT.
  ///
  /// \param[in] this_ptr The OrtKernelImpl instance.
  /// \param[in] tensor The OrtValue instance representing the constant tensor (weight). Do not cache in the kernel.
  /// \param[in] input_index The input index of the tensor in this kernel.
  /// \param[in] allocator Allocator for allocating the pre-packed data. Its use is required in sharing mode and
  /// recommended, but not required, in the non-sharing mode. This will be an allocator set by
  /// the application for the session/environment (e.g., via CreateAndRegisterAllocator[V2]
  /// or RegisterAllocator), or an allocator on the OrtEpDevice (read-only or default) otherwise.
  /// The allocator remains valid throughout the lifetime of the OrtKernelImpl instance.
  /// \param[in] prepacked_weight_cache May be NULL. If not NULL, the kernel may choose to share a packed weight by
  /// first storing it in the OrtSharedPrePackedWeightCache instance and then
  /// receiving the actual shared weight data in the call to
  /// OrtKernelImpl::SetSharedPrePackedWeight(). See the above description for
  /// "sharing mode".
  /// \param[out] is_packed Output parameter that the implementation sets to true if the kernel packed the tensor data.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \note Implementation of this function is optional. If not implemented (set to NULL), ORT assumes the kernel
  /// does not pre-pack weight data (i.e., `is_packed` defaults to false).
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelImpl> this_ptr,
        ffi.Pointer<OrtValue> tensor,
        ffi.Int input_index,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<OrtSharedPrePackedWeightCache> prepacked_weight_cache,
        ffi.Pointer<ffi.Bool> is_packed,
      )
    >
  >
  PrePackWeight;

  /// \brief Optional function that receives data for a shared pre-packed weight from ORT.
  ///
  /// ORT calls this function after calling OrtKernelImpl::PrePackWeight for a specific `input_index` if:
  /// - OrtKernelImpl::PrePackWeight set the output parameter `is_packed` to true.
  /// - OrtKernelImpl::PrePackWeight stored weight data to share into the provided OrtSharedPrePackedWeightCache
  /// parameter (`prepacked_weight_cache`) via the API SharedPrePackedWeightCache_StoreWeightData.
  ///
  /// Refer to the description of the "sharing-mode" in the documentation for OrtKernelImpl::PrePackWeight().
  ///
  /// \note ORT will not call this function for an `input_index` that a previous call to
  /// OrtKernelImpl::PrePackWeight() did not elect to pre-pack and share.
  ///
  /// \note This function is based on the internal OpKernel::UseSharedPrePackedBuffers() virtual function used
  /// within ORT.
  ///
  /// \param[in] this_ptr The OrtKernelImpl instance.
  /// \param[in] buffer_data_ptrs An array of buffer data pointers that collectively hold the pre-packed data for a
  /// single shared weight. The buffers are provided in the same order and with the same
  /// contents (in a potentially different memory location) as the buffers
  /// passed into SharedPrePackedWeightCache_StoreWeightData() within the
  /// OrtKernelImpl::PrePackWeight() call for the same `input_index`.
  /// \param[in] buffer_data_sizes An array of buffer byte sizes, one per element in `buffer_data_ptrs`.
  /// \param[in] num_buffers The number of buffers used to store the data for the shared pre-packed weight.
  /// Specifies the number of elements in the `buffer_data_ptrs` and `buffer_data_sizes` arrays.
  /// \param[in] input_index The input index of the tensor in this kernel. This index identifies the identity of
  /// the weight.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \note Implementation of this function is generally optional. It is only required if OrtKernelImpl::PrePack()
  /// elects to share pre-packed weights.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelImpl> this_ptr,
        ffi.Pointer<ffi.Pointer<ffi.Void>> buffer_data_ptrs,
        ffi.Pointer<ffi.Size> buffer_data_sizes,
        ffi.Size num_buffers,
        ffi.Int input_index,
      )
    >
  >
  SetSharedPrePackedWeight;
}

typedef OrtKernelCreateFuncFunction =
    ffi.Pointer<OrtStatus> Function(
      ffi.Pointer<ffi.Void> kernel_create_func_state,
      ffi.Pointer<OrtKernelInfo> info,
      ffi.Pointer<ffi.Pointer<OrtKernelImpl>> kernel_out,
    );

/// \brief Type definition for a function that creates an OrtKernelImpl instance for an operator kernel.
///
/// \param[in] kernel_create_func_state Opaque state initially provided by the EP that registered the kernel.
/// Refer to OrtEpApi::KernelRegistry_AddKernel(). May be null.
/// \param[in] info The OrtKernelInfo instance that provides access to the kernel's input and output characteristics.
/// \param[out] kernel_out Output parameter set to the new OrtKernelImpl instance. On success, ownership of this
/// OrtKernelImpl instance transfers to ORT, which will call OrtKernelImpl::Release() to
/// release the instance when it is no longer used.
///
/// \snippet{doc} snippets.dox OrtStatus Return Value
///
/// \since Version 1.24.
typedef OrtKernelCreateFunc =
    ffi.Pointer<ffi.NativeFunction<OrtKernelCreateFuncFunction>>;

final class OrtKernelDefBuilder extends ffi.Opaque {}

final class OrtDataType extends ffi.Opaque {}

/// \brief Contains helper functions for a Loop OrtKernelImpl created via OrtEpApi::CreateLoopKernel.
/// \since Version 1.24.
final class OrtLoopKernelHelper extends ffi.Struct {
  /// < Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Called by ORT to release the OrtLoopKernelHelper instance and its resources.
  ///
  /// \param[in] this_ptr The OrtLoopKernelHelper instance.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtLoopKernelHelper> this_ptr)
    >
  >
  Release;

  /// \brief Helper function that concatenates OrtValue instances from each loop iteration into a single
  /// pre-allocated output buffer.
  ///
  /// \note Implementing this function is required for all Loop opset versions.
  ///
  /// \param[in] this_ptr The OrtLoopKernelHelper instance.
  /// \param[in] stream_handle Optional native stream handle that enables asynchronous operations. May be NULL.
  /// \param[in] per_iteration_outputs Array of OrtValue instances from each iteration. All OrtValue elements have the
  /// same shape.
  /// \param[in] num_per_iteration_outputs The number of OrtValue* elements in the `per_iteration_outputs` array.
  /// \param[out] output The pre-allocated output buffer. Memory is allocated on the device for the EP running the
  /// Loop node.
  /// \param[in] output_size_in_bytes The size in bytes of the `output` buffer. It is guaranteed to be large enough
  /// to hold the concatenated data of each element in `per_iteration_outputs`.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtLoopKernelHelper> this_ptr,
        ffi.Pointer<ffi.Void> stream_handle,
        ffi.Pointer<ffi.Pointer<OrtValue>> per_iteration_outputs,
        ffi.Size num_per_iteration_outputs,
        ffi.Pointer<ffi.Void> output,
        ffi.Size output_size_in_bytes,
      )
    >
  >
  ConcatOutput;
}

/// \brief Contains helper functions for a Scan OrtKernelImpl created via OrtEpApi::CreateScanKernel.
/// \since Version 1.24.
final class OrtScanKernelHelper extends ffi.Struct {
  /// < Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int ort_version_supported;

  /// \brief Called by ORT to release the OrtScanKernelHelper instance and its resources.
  ///
  /// \param[in] this_ptr The OrtScanKernelHelper instance.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtScanKernelHelper> this_ptr)
    >
  >
  Release;

  /// \brief Helper function that transposes an OrtValue instance during execution of a Scan kernel.
  ///
  /// \note Called for Scan (opset >= 9) when the 'scan_input_axes' or 'scan_output_axes' attributes contain
  /// non-zero values. Implementing this function is required for Scan opset versions >= 9.
  ///
  /// \param[in] this_ptr The OrtScanKernelHelper instance.
  /// \param[in] permutation An array of integers that defines how the input tensor's axes should be permuted.
  /// \param[in] num_permutation_elems The number of integer elements in the `permutation` array.
  /// \param[in] input The input OrtValue tensor to transpose.
  /// \param[in] stream An optional OrtSyncStream instance to be used for asynchronous operations. May be NULL.
  /// \param[out] output The pre-allocated output OrtValue instance into which to store the results of the
  /// transpose operation. Must not be released as it is owned by ORT.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtScanKernelHelper> this_ptr,
        ffi.Pointer<ffi.Size> permutation,
        ffi.Size num_permutation_elems,
        ffi.Pointer<OrtValue> input,
        ffi.Pointer<OrtSyncStream> stream,
        ffi.Pointer<OrtValue> output,
      )
    >
  >
  Transpose;
}

/// \brief The OrtEpApi struct provides functions that are relevant to the implementation of an execution provider.
///
/// \since Version 1.22.
final class OrtEpApi extends ffi.Struct {
  /// \brief Create an OrtEpDevice for the EP and an OrtHardwareDevice.
  /// \param[in] ep_factory Execution provider factory that is creating the instance.
  /// \param[in] hardware_device Hardware device that the EP can utilize.
  /// \param[in] ep_metadata Optional OrtKeyValuePairs instance for execution provider metadata that may be used
  /// during execution provider selection and passed to CreateEp.
  /// ep_device will copy this instance and the user should call ReleaseKeyValuePairs.
  /// \param[in] ep_options  Optional OrtKeyValuePairs instance for execution provider options that will be added
  /// to the Session configuration options if the execution provider is selected.
  /// ep_device will copy this instance and the user should call ReleaseKeyValuePairs.
  /// \param ep_device OrtExecutionDevice that is created.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpFactory> ep_factory,
        ffi.Pointer<OrtHardwareDevice> hardware_device,
        ffi.Pointer<OrtKeyValuePairs> ep_metadata,
        ffi.Pointer<OrtKeyValuePairs> ep_options,
        ffi.Pointer<ffi.Pointer<OrtEpDevice>> ep_device,
      )
    >
  >
  CreateEpDevice;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtEpDevice> input)>
  >
  ReleaseEpDevice;

  /// \brief Specify nodes that are supported by an OrtEp and should be fused into one node.
  ///
  /// Because the nodes will be fused into one "fused node", there must not exist an unsupported node in
  /// a path between two of the provided nodes. Otherwise, the graph will become invalid.
  ///
  /// This function can be called multiple times. A subsequent call to this function will force the next set of
  /// nodes to be fused into a different node.
  ///
  /// \param[in] graph_support_info OrtEpGraphSupportInfo instance to which to add the supported nodes.
  /// \param[in] nodes Array of nodes supported by the EP that should be fused/compiled.
  /// \param[in] num_nodes The number of supported nodes.
  /// \param[in] node_fusion_options Optional node fusion options. Ignored if set to NULL.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpGraphSupportInfo> graph_support_info,
        ffi.Pointer<ffi.Pointer<OrtNode>> nodes,
        ffi.Size num_nodes,
        ffi.Pointer<OrtNodeFusionOptions> node_fusion_options,
      )
    >
  >
  EpGraphSupportInfo_AddNodesToFuse;

  /// \brief Specify a node that is supported by an OrtEp and should be run with a registered EP kernel.
  ///
  /// \param[in] graph_support_info OrtEpGraphSupportInfo instance to which to add the supported node.
  /// \param[in] node The supported OrtNode instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpGraphSupportInfo> graph_support_info,
        ffi.Pointer<OrtNode> node,
      )
    >
  >
  EpGraphSupportInfo_AddSingleNode;

  /// \brief Query a OrtNodeComputeContext for the name of the node that encapsulates the compiled/fused node.
  ///
  /// Used in OrtNodeComputeInfo::CreateComputeState().
  ///
  /// \param[in] context The OrtNodeComputeContext instance to query.
  /// \return The node's name.
  ///
  /// \note Returned string is owned by ORT and valid only while OrtNodeComputeInfo::CreateComputeState() is called.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtNodeComputeContext> context)
    >
  >
  NodeComputeContext_NodeName;

  /// \brief Register an allocator with the OrtEpDevice.
  ///
  /// This allows an EP to provide OrtMemoryInfo for DEFAULT and HOST_ACCESSIBLE memory type as needed.
  /// The registered values will be used in calls to OrtEpFactory::CreateAllocator to ensure the required allocator/s
  /// are available for EP usage.
  ///
  /// Multiple calls for the same entry type will replace a previous entry.
  ///
  /// Available entries:
  /// - OrtDeviceAllocator with type of OrtDeviceMemoryType_DEFAULT
  /// - OrtDeviceAllocator with type of OrtDeviceMemoryType_HOST_ACCESSIBLE
  /// - OrtReadOnlyAllocator with type of OrtDeviceMemoryType_DEFAULT
  /// - if provided this allocator will only be used to copy initializers to the device the EP uses.
  /// ORT will use the OrtDeviceAllocator if not provided.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to register the OrtMemoryInfo with.
  /// \param[in] allocator_memory_info The OrtMemoryInfo information for the allocator.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpDevice> ep_device,
        ffi.Pointer<OrtMemoryInfo> allocator_memory_info,
      )
    >
  >
  EpDevice_AddAllocatorInfo;

  /// \brief Get the OrtMemoryDevice from an OrtMemoryInfo instance.
  ///
  /// This is required for OrtDataTransferImpl (which implements onnxruntime::IDataTransfer) where the OrtMemoryDevice
  /// is used in the CanCopy and CopyTensors functions.
  ///
  /// \param[in] memory_info The OrtMemoryInfo instance to get the memory device from.
  /// \return The OrtMemoryDevice associated with the OrtMemoryInfo instance.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtMemoryDevice> Function(
        ffi.Pointer<OrtMemoryInfo> memory_info,
      )
    >
  >
  MemoryInfo_GetMemoryDevice;

  /// \brief Get the OrtMemoryDevice from an OrtValue instance if it contains a Tensor.
  ///
  /// \param[in] value The OrtValue instance to get the memory device from.
  /// \return Memory device if OrtValue contains a Tensor, nullptr otherwise.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtMemoryDevice> Function(ffi.Pointer<OrtValue> value)
    >
  >
  Value_GetMemoryDevice;

  /// \brief Compare two OrtMemoryDevice instances for equality.
  ///
  /// This is used to check if two memory devices are the same.
  /// Used to implement DataTransferImpl::CanCopy.
  ///
  /// \param[in] a The first OrtMemoryDevice instance to compare.
  /// \param[in] b The second OrtMemoryDevice instance to compare.
  /// \return True if the two OrtMemoryDevice instances are equal, false otherwise.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Bool Function(
        ffi.Pointer<OrtMemoryDevice> a,
        ffi.Pointer<OrtMemoryDevice> b,
      )
    >
  >
  MemoryDevice_AreEqual;

  /// \brief Get the OrtMemoryInfoDeviceType value from an OrtMemoryDevice instance.
  ///
  /// \param[in] memory_device OrtMemoryDevice instance.
  /// \return The OrtMemoryInfoDeviceType value.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.UnsignedInt Function(ffi.Pointer<OrtMemoryDevice> memory_device)
    >
  >
  MemoryDevice_GetDeviceType;

  /// \brief Get the OrtDeviceMemoryType value from an OrtMemoryDevice instance.
  ///
  /// \param[in] memory_device OrtMemoryDevice instance.
  /// \return The OrtDeviceMemoryType value.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.UnsignedInt Function(ffi.Pointer<OrtMemoryDevice> memory_device)
    >
  >
  MemoryDevice_GetMemoryType;

  /// \brief Get the vendor ID from an OrtMemoryDevice instance.
  ///
  /// The vendor ID is used to identify the vendor of the device, and is typically set to the PCI vendor ID.
  ///
  /// If the device is not vendor specific (e.g. CPU memory) the vendor ID is set to 0.
  ///
  /// \param[in] memory_device OrtMemoryDevice instance.
  /// \return The vendor ID value.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Uint32 Function(ffi.Pointer<OrtMemoryDevice> memory_device)
    >
  >
  MemoryDevice_GetVendorId;

  /// \brief Get the device ID from an OrtMemoryDevice instance.
  ///
  /// \param[in] memory_device OrtMemoryDevice instance.
  /// \return The device ID.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Uint32 Function(ffi.Pointer<OrtMemoryDevice> memory_device)
    >
  >
  MemoryDevice_GetDeviceId;

  /// \brief Get the OrtSyncStreamImpl associated with an OrtSyncStream instance.
  ///
  /// This allows an the plugin library to connect its OrtSyncStreamImpl instance with an OrtSyncStream if needed.
  ///
  /// \param[in] stream The OrtSyncStream instance to find an OrtSyncStreamImpl for.
  /// \return The associated OrtSyncStreamImpl if found. nullptr otherwise.
  ///
  /// \since Version 1.23.
  ///
  /// \remarks There should always be an OrtSyncStreamImpl associated with an OrtSyncStream instance that the EP gets.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtSyncStreamImpl> Function(ffi.Pointer<OrtSyncStream> stream)
    >
  >
  SyncStream_GetImpl;

  /// \brief Get the current sync ID for a stream.
  ///
  /// \param[in] stream The OrtSyncStream to get the sync ID for.
  /// \return Current sync ID.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Uint64 Function(ffi.Pointer<OrtSyncStream> stream)>
  >
  SyncStream_GetSyncId;

  /// \brief Get the sync ID for the last time the consumer_stream waited on the producer_stream.
  ///
  /// When two streams are synchronized, the sync id represents the event used in that synchronization.
  ///
  /// \param[in] producer_stream The OrtSyncStream that produced the data.
  /// \param[in] consumer_stream The OrtSyncStream that waited on the producer_stream.
  /// \return ID for last sync. 0 if no sync has occurred between the two streams.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Uint64 Function(
        ffi.Pointer<OrtSyncStream> producer_stream,
        ffi.Pointer<OrtSyncStream> consumer_stream,
      )
    >
  >
  GetSyncIdForLastWaitOnSyncStream;

  /// \brief Create an OrtHardwareDevice.
  ///
  /// \note Called within OrtEpFactory::GetSupportedDevices to create a new hardware device (e.g., virtual).
  ///
  /// \param[in] type The hardware device type.
  /// \param[in] vendor_id The hardware device's vendor identifier.
  /// \param[in] device_id The hardware device's identifier.
  /// \param[in] vendor_name The hardware device's vendor name as a null-terminated string. Copied by ORT.
  /// \param[in] metadata Optional OrtKeyValuePairs instance for hardware device metadata that may be queried by
  /// applications via OrtApi::GetEpDevices().
  /// Refer to onnxruntime_ep_device_ep_metadata_keys.h for common OrtHardwareDevice metadata keys.
  /// \param[out] hardware_device Output parameter set to the new OrtHardwareDevice instance that is created.
  /// Must be release with ReleaseHardwareDevice().
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.UnsignedInt type,
        ffi.Uint32 vendor_id,
        ffi.Uint32 device_id,
        ffi.Pointer<ffi.Char> vendor_name,
        ffi.Pointer<OrtKeyValuePairs> metadata,
        ffi.Pointer<ffi.Pointer<OrtHardwareDevice>> hardware_device,
      )
    >
  >
  CreateHardwareDevice;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtHardwareDevice> input)>
  >
  ReleaseHardwareDevice;

  /// \brief Creates an empty kernel registry. A kernel registry contains kernel creation information for
  /// every operator kernel supported by an EP.
  ///
  /// \remarks Refer to OrtEp::GetKernelRegistry, which returns an EP's kernel registry to ORT.
  ///
  /// \param[out] kernel_registry Output parameter set to the new OrtKernelRegistry instance.
  /// Must be released with OrtEpApi::ReleaseKernelRegistry.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtKernelRegistry>> kernel_registry,
      )
    >
  >
  CreateKernelRegistry;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtKernelRegistry> input)>
  >
  ReleaseKernelRegistry;

  /// \brief Adds kernel creation information for a supported operator kernel to the given kernel registry.
  ///
  /// \remarks Refer to OrtEp::GetKernelRegistry, which returns an EP's kernel registry to ORT.
  ///
  /// \param[in] kernel_registry The OrtKernelRegistry instance.
  /// \param[in] kernel_def The kernel definition, which includes operator type, version, EP name, type constraints, etc.
  /// \param[in] kernel_create_func Function that creates an instance of the operator kernel as a OrtKernelImpl instance.
  /// \param[in] kernel_create_func_state Custom state passed to the kernel creation function. Can be null.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelRegistry> kernel_registry,
        ffi.Pointer<OrtKernelDef> kernel_def,
        OrtKernelCreateFunc kernel_create_func,
        ffi.Pointer<ffi.Void> kernel_create_func_state,
      )
    >
  >
  KernelRegistry_AddKernel;

  /// \brief Creates a kernel definition builder used to create instances of OrtKernelDef.
  ///
  /// \param[out] kernel_def_builder_out Output parameter set to the new OrtKernelDefBuilder instance.
  /// Must be released with OrtEpApi::ReleaseKernelDefBuilder().
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtKernelDefBuilder>> kernel_def_builder_out,
      )
    >
  >
  CreateKernelDefBuilder;

  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtKernelDefBuilder> input)
    >
  >
  ReleaseKernelDefBuilder;

  /// \brief Sets the kernel's operator type.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] op_type A null-terminated string representing the operator type.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Pointer<ffi.Char> op_type,
      )
    >
  >
  KernelDefBuilder_SetOperatorType;

  /// \brief Sets the kernel's domain.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] domain A null-terminated string representing the operator's domain.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Pointer<ffi.Char> domain,
      )
    >
  >
  KernelDefBuilder_SetDomain;

  /// \brief Sets the kernel's opset version range that is supported.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] since_version_start The starting opset version that is supported.
  /// \param[in] since_version_end The ending opset version (inclusive) that is supported.
  /// Can be set equal to the starting version to indicate that only one
  /// version is supported.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Int since_version_start,
        ffi.Int since_version_end,
      )
    >
  >
  KernelDefBuilder_SetSinceVersion;

  /// \brief Sets the name of the kernel's intended execution provider.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] ep_name A null-terminated string representing the execution provider's name.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Pointer<ffi.Char> ep_name,
      )
    >
  >
  KernelDefBuilder_SetExecutionProvider;

  /// \brief Sets the memory type for a kernel input.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] input_index The index of the input.
  /// \param[in] mem_type The input's memory type.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Size input_index,
        ffi.Int mem_type,
      )
    >
  >
  KernelDefBuilder_SetInputMemType;

  /// \brief Sets the memory type for a kernel output.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] output_index The index of the output.
  /// \param[in] mem_type The output's memory type.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Size output_index,
        ffi.Int mem_type,
      )
    >
  >
  KernelDefBuilder_SetOutputMemType;

  /// \brief Adds type constraints for a kernel argument represented as a string (e.g., "T").
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] arg_name A null-terminated string representing the argument to constrain (e.g., "T").
  /// \param[in] types Array of OrtDataType instances representing allowed types for the argument.
  /// Must contain `num_types` elements.
  /// \param[in] num_types The number of OrtDataType elements in the `types` array.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Pointer<ffi.Char> arg_name,
        ffi.Pointer<ffi.Pointer<OrtDataType>> types,
        ffi.Size num_types,
      )
    >
  >
  KernelDefBuilder_AddTypeConstraint;

  /// \brief Adds aliases for the given input and output pairs.
  ///
  /// \note Used for operators like Identity and Reshape to allow ORT to reuse the input buffer for the output
  /// without modification.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] input_indices Array of input indices. Array must contain `num_io_indices` elements.
  /// \param[in] output_indices Array of output indices. Each output index is aliased with a corresponding
  /// input index in `input_indices`. Array must contain `num_io_indices` elements.
  /// \param[in] num_io_indices The number of input/output index pairs to alias.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Pointer<ffi.Int> input_indices,
        ffi.Pointer<ffi.Int> output_indices,
        ffi.Size num_io_indices,
      )
    >
  >
  KernelDefBuilder_AddInputOutputAliases;

  /// \brief Adds mutable aliases for the given input and output pairs.
  ///
  /// \note Allows ORT to reuse and *modify* an input buffer (in-place) for the output buffer.
  /// This is also known as "MayInplace" within the ORT codebase.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[in] input_indices Array of input indices. Array must contain `num_io_indices` elements.
  /// \param[in] output_indices Array of output indices. Each output index is aliased with a corresponding
  /// input index in `input_indices`. Array must contain `num_io_indices` elements.
  /// \param[in] num_io_indices The number of input/output index pairs to alias.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Pointer<ffi.Int> input_indices,
        ffi.Pointer<ffi.Int> output_indices,
        ffi.Size num_io_indices,
      )
    >
  >
  KernelDefBuilder_AddInputOutputMutableAliases;

  /// \brief Creates a OrtKernelDef instance from the given kernel definition builder.
  ///
  /// \param[in] kernel_def_builder The OrtKernelDefBuilder instance.
  /// \param[out] kernel_def_out The new OrtKernelDef instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDefBuilder> kernel_def_builder,
        ffi.Pointer<ffi.Pointer<OrtKernelDef>> kernel_def_out,
      )
    >
  >
  KernelDefBuilder_Build;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtKernelDef> input)>
  >
  ReleaseKernelDef;

  /// \brief Returns the operator type from the kernel definition.
  ///
  /// \param[in] kernel_def The OrtKernelDef instance.
  /// \return A null-terminated string representing the operator type.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtKernelDef> kernel_def)
    >
  >
  KernelDef_GetOperatorType;

  /// \brief Returns the operator's domain from the kernel definition.
  ///
  /// \param[in] kernel_def The OrtKernelDef instance.
  /// \return A null-terminated string representing the operator's domain.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtKernelDef> kernel_def)
    >
  >
  KernelDef_GetDomain;

  /// \brief Gets the kernel's opset version range that is supported.
  ///
  /// \param[in] kernel_def The OrtKernelDef instance.
  /// \param[out] start_version Output parameter set to the starting opset version that is supported.
  /// \param[out] end_version Output parameter set to the ending opset version (inclusive) that is supported.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDef> kernel_def,
        ffi.Pointer<ffi.Int> start_version,
        ffi.Pointer<ffi.Int> end_version,
      )
    >
  >
  KernelDef_GetSinceVersion;

  /// \brief Returns the name of the kernel's intended execution provider.
  ///
  /// \param[in] kernel_def The OrtKernelDef instance.
  /// \return A null-terminated string representing the name of the execution provider.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtKernelDef> kernel_def)
    >
  >
  KernelDef_GetExecutionProvider;

  /// \brief Gets the memory type for a kernel input.
  ///
  /// \param[in] kernel_def The OrtKernelDef instance.
  /// \param[in] input_index The index of the input.
  /// \param[out] mem_type Output parameter set to the input's memory type.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDef> kernel_def,
        ffi.Size input_index,
        ffi.Pointer<ffi.Int> mem_type,
      )
    >
  >
  KernelDef_GetInputMemType;

  /// \brief Gets the memory type for a kernel output.
  ///
  /// \param[in] kernel_def The OrtKernelDef instance.
  /// \param[in] output_index The index of the output.
  /// \param[out] mem_type Output parameter set to the output's memory type.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelDef> kernel_def,
        ffi.Size output_index,
        ffi.Pointer<ffi.Int> mem_type,
      )
    >
  >
  KernelDef_GetOutputMemType;

  /// \brief Gets the OrtDataType that represents the data type for a tensor of the given element type.
  ///
  /// \param[in] elem_type The tensor's element type.
  /// \param[out] out Output parameter set to the OrtDataType. Owned by ORT and must not be released.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.UnsignedInt elem_type,
        ffi.Pointer<ffi.Pointer<OrtDataType>> out,
      )
    >
  >
  GetTensorDataType;

  /// \brief Gets the kernel definition for a given node, if any exists for the calling execution provider.
  ///
  /// Used within OrtEp::GetCapability() to get the registered kernel definition for the given node.
  /// The kernel definition is set to NULL if there is no registered kernel definition for the node
  /// and execution provider.
  ///
  /// \param[in] graph_support_info The OrtEpGraphSupportInfo instance to query.
  /// \param[in] node The node for which to look up a kernel definition.
  /// \param[out] out_kernel_def Output parameter set to the OrtKernelDef or NULL.
  /// Owned by ORT and must not be released.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpGraphSupportInfo> graph_support_info,
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<OrtKernelDef>> out_kernel_def,
      )
    >
  >
  EpGraphSupportInfo_LookUpKernel;

  /// \brief Sets one or more data buffers that collectively hold the pre-packed data for a single shared weight.
  ///
  /// \note Used within the implementation of OrtKernelImpl::PrePackWeight() when the kernel wants to share pre-packed
  /// weight data with other kernels. The buffer data MUST be allocated with the OrtAllocator provided to
  /// OrtKernelImpl::PrePack.
  ///
  /// \note Ownership of weight data transfers to the OrtSharedPrePackedWeightCache instance on success.
  /// If this function returns an error status, the caller retains ownership of the weight data.
  ///
  /// \note Subsequent calls with the same OrtSharedPrePackedWeightCache instance release and replace the old data.
  ///
  /// \param[in] prepacked_weight_cache The OrtSharedPrePackedWeightCache instance.
  /// \param[in] buffer_data_ptrs An array of buffer data pointers that collectively hold the pre-packed data for a
  /// single shared weight. Note that sometimes a single weight may have multiple pre-packed
  /// buffers and it is up to the kernel implementation to determine how to split the data
  /// into multiple buffers (if desired).
  /// \param[in] buffer_data_sizes An array of buffer byte sizes, one per element in `buffer_data_ptrs`.
  /// \param[in] num_buffers The number of buffers used to store the data for the shared pre-packed weight.
  /// Specifies the number of elements in the `buffer_data_ptrs` and `buffer_data_sizes` arrays.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSharedPrePackedWeightCache> prepacked_weight_cache,
        ffi.Pointer<ffi.Pointer<ffi.Void>> buffer_data_ptrs,
        ffi.Pointer<ffi.Size> buffer_data_sizes,
        ffi.Size num_buffers,
      )
    >
  >
  SharedPrePackedWeightCache_StoreWeightData;

  /// \brief Get the OrtEp instance to which the node is assigned from the OrtKernelInfo.
  ///
  /// \note Used within OrtKernelImpl implementations to obtain a reference to the OrtEp.
  ///
  /// \param[in] info The ::OrtKernelInfo instance.
  /// \param[out] ep Output parameter set to the OrtEp instance associated with the OrtKernelInfo.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Pointer<OrtEp>> ep,
      )
    >
  >
  KernelInfo_GetEp;

  /// \brief Set the details of an OrtDeviceEpIncompatibilityDetails instance.
  ///
  /// Used by execution provider factories to set incompatibility details in their
  /// GetHardwareDeviceIncompatibilityDetails implementation. ORT creates and initializes the object
  /// before passing it to the EP, so calling this function is optional. The EP uses this function
  /// to set incompatibility information when the device is not compatible.
  ///
  /// \param[in,out] details The OrtDeviceEpIncompatibilityDetails instance to update.
  /// \param[in] reasons_bitmask Bitmask of OrtDeviceEpIncompatibilityReason values. (0 = no incompatibility).
  /// \param[in] error_code Optional EP-specific error code (0 = no error).
  /// \param[in] notes Optional human-readable notes. Can be null.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtDeviceEpIncompatibilityDetails> details,
        ffi.Uint32 reasons_bitmask,
        ffi.Int32 error_code,
        ffi.Pointer<ffi.Char> notes,
      )
    >
  >
  DeviceEpIncompatibilityDetails_SetDetails;

  /// \brief Creates an OrtKernelImpl instance for an If operator.
  ///
  /// Control flow operators require access to ORT session internals to orchestrate subgraph operations.
  /// This function allows an EP to create a properly configured OrtKernelImpl with access to ORT internals that
  /// the EP can add to its kernel registry.
  ///
  /// An EP is required to create an OrtKernelDef that keeps input[0] ('cond') on the CPU (i.e., OrtMemTypeCPUInput)
  /// as this input is used by CPU logic. The output should remain on the device (i.e., OrtMemTypeDefault), which is
  /// the default setting, to avoid copying to/from CPU.
  ///
  /// Example kernel definition (CXX API):
  /// Ort::KernelDef kernel_def = Ort::KernelDefBuilder()
  /// .SetDomain("").SetOperatorType("If").SetSinceVersion(21, 22)
  /// .SetExecutionProvider("MyEp")
  /// .SetInputMemType(0, OrtMemTypeCPUInput) // 'cond' on CPU
  /// .SetOutputMemType(0, OrtMemTypeDefault) // output on EP device
  /// .AddTypeConstraint("B", ...)
  /// .AddTypeConstraint("V", ...).Build();
  ///
  /// \param[in] kernel_info The ::OrtKernelInfo instance for an If node. This function returns error ORT_FAIL
  /// if the opset version specified by `kernel_info` is unsupported.
  /// \param[out] kernel_out Output parameter set to the OrtKernelImpl instance for the If node.
  /// Must be released via ::ReleaseKernelImpl, unless ownership is transferred
  /// to ORT (see OrtKernelCreateFunc and ::KernelRegistry_AddKernel()).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> kernel_info,
        ffi.Pointer<ffi.Pointer<OrtKernelImpl>> kernel_out,
      )
    >
  >
  CreateIfKernel;

  /// \brief Creates an OrtKernelImpl instance for a Loop operator.
  ///
  /// Control flow operators require access to ORT session internals to orchestrate subgraph operations.
  /// This function allows an EP to create a properly configured OrtKernelImpl with access to ORT internals that
  /// the EP can add to its kernel registry.
  ///
  /// An EP is required to create an OrtKernelDef that keeps input[0] ('M') and input[1] ('cond') on the CPU
  /// (i.e., OrtMemTypeCPUInput) as these inputs are used by CPU logic. Input[2] ('v_initial') and the output should
  /// remain on the device (i.e., OrtMemTypeDefault), which is the default setting, to avoid copying to/from CPU.
  ///
  /// Example kernel definition (CXX API):
  /// Ort::KernelDef kernel_def = Ort::KernelDefBuilder()
  /// .SetDomain("").SetOperatorType("Loop").SetSinceVersion(21, 22)
  /// .SetExecutionProvider("MyEp")
  /// .SetInputMemType(0, OrtMemTypeCPUInput) // 'M' on CPU
  /// .SetInputMemType(1, OrtMemTypeCPUInput) // 'cond' on CPU
  /// .SetInputMemType(2, OrtMemTypeDefault) // 'v_initial' on EP device
  /// .SetOutputMemType(0, OrtMemTypeDefault) // output on EP device
  /// .AddTypeConstraint("I", ...)
  /// .AddTypeConstraint("B", ...)
  /// .AddTypeConstraint("V", ...).Build();
  ///
  /// \param[in] kernel_info The ::OrtKernelInfo instance for a Loop node. This function returns error ORT_FAIL
  /// if the opset version specified by `kernel_info` is unsupported.
  /// \param[in] helper A OrtLoopKernelHelper instance that contains helper functions that ORT calls during kernel
  /// execution to operate on tensors allocated with the EP's device memory.
  /// ORT will call OrtLoopKernelHelper::Release() to release the helper and its resources.
  /// \param[out] kernel_out Output parameter set to the OrtKernelImpl instance for the Loop node.
  /// Must be released via ::ReleaseKernelImpl, unless ownership is transferred
  /// to ORT (see OrtKernelCreateFunc and ::KernelRegistry_AddKernel()).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> kernel_info,
        ffi.Pointer<OrtLoopKernelHelper> helper,
        ffi.Pointer<ffi.Pointer<OrtKernelImpl>> kernel_out,
      )
    >
  >
  CreateLoopKernel;

  /// \brief Creates an OrtKernelImpl instance for a Scan operator. Does not support opset versions older than 9.
  ///
  /// Control flow operators require access to ORT session internals to orchestrate subgraph operations.
  /// This function allows an EP to create a properly configured OrtKernelImpl with access to ORT internals that
  /// the EP can add to its kernel registry.
  ///
  /// It is recommended that an EP create an OrtKernelDef that keeps the inputs and outputs on the EP's
  /// device (i.e., OrtMemTypeDefault), which is the default setting, to avoid copying to/from CPU.
  ///
  /// Example kernel definition (CXX API):
  /// Ort::KernelDef kernel_def = Ort::KernelDefBuilder()
  /// .SetDomain("").SetOperatorType("Scan").SetSinceVersion(21, 22)
  /// .SetExecutionProvider("MyEp")
  /// .SetInputMemType(0, OrtMemTypeDefault) // input[0] on EP device
  /// .SetOutputMemType(0, OrtMemTypeDefault) // output[0] on EP device
  /// .AddTypeConstraint("V", ...).Build();
  ///
  /// \param[in] kernel_info The ::OrtKernelInfo instance for a Scan node. This function returns error ORT_FAIL
  /// if the opset version specified by `kernel_info` is unsupported.
  /// \param[in] helper A OrtScanKernelHelper instance that contains helper functions that ORT calls during kernel
  /// execution to operate on tensors allocated with the EP's device memory.
  /// ORT will call OrtScanKernelHelper::Release() to release the helper and its resources.
  /// \param[out] kernel_out Output parameter set to the OrtKernelImpl instance for the Scan node.
  /// Must be released via ::ReleaseKernelImpl, unless ownership is transferred
  /// to ORT (see OrtKernelCreateFunc and ::KernelRegistry_AddKernel()).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> kernel_info,
        ffi.Pointer<OrtScanKernelHelper> helper,
        ffi.Pointer<ffi.Pointer<OrtKernelImpl>> kernel_out,
      )
    >
  >
  CreateScanKernel;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtKernelImpl> input)>
  >
  ReleaseKernelImpl;

  /// \brief Gets a new OrtKeyValuePairs instance containing a copy of all configuration entries set on the environment.
  ///
  /// \note An application provides environment-level configuration options for execution provider libraries by
  /// using keys with the prefix 'ep_factory.\\<ep_name\\>.'. Ex: the key 'ep_factory.my_ep.some_ep_key' represents
  /// a key named 'some_ep_key' that is meant to be consumed by an execution provider named 'my_ep'. Refer to
  /// the specific execution provider's documentation for valid keys and values.
  ///
  /// \note Refer to onnxruntime_env_config_keys.h for common configuration entry keys and their supported values.
  ///
  /// \param[out] config_entries Output parameter set to the OrtKeyValuePairs instance containing all configuration entries.
  /// Must be released via OrtApi::ReleaseKeyValuePairs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtKeyValuePairs>> config_entries,
      )
    >
  >
  GetEnvConfigEntries;
}

/// \brief The OrtInteropApi struct provides functions for external resource interop with execution providers.
///
/// This API enables importing external GPU resources (memory and semaphores) for zero-copy sharing
/// between ORT inference and other GPU workloads (e.g., D3D12 applications, media pipelines).
///
/// The API is designed to be EP-agnostic and can be extended to support various GPU interop mechanisms
/// (D3D12 shared handles, CUDA external memory, Vulkan, etc.).
///
/// Example usage (error handling not shown):
/// const OrtInteropApi* interop_api = ort_api->GetInteropApi();
/// OrtExternalResourceImporter* importer = NULL;
///
/// status = interop_api->CreateExternalResourceImporterForDevice(ep_device, &importer);
/// if (importer == nullptr) {
/// // External resource import is optional for EPs to implement
/// return;
/// }
/// bool can_import = false;
/// status = interop_api->CanImportMemory(importer, ORT_EXTERNAL_MEMORY_HANDLE_TYPE_D3D12_RESOURCE, &can_import);
/// if (can_import) {
/// OrtExternalMemoryHandle* mem_handle = NULL;
/// status = interop_api->ImportMemory(importer, &mem_desc, &mem_handle);
/// // ... use mem_handle to create tensors ...
/// interop_api->ReleaseExternalMemoryHandle(mem_handle);
/// }
/// interop_api->ReleaseExternalResourceImporter(importer);
///
/// \since Version 1.24.
final class OrtInteropApi extends ffi.Struct {
  /// \brief Create an external resource importer for a specific EP device.
  ///
  /// The external resource importer is a capability object that provides methods for importing
  /// external GPU memory and semaphores for zero-copy import with an execution provider.
  ///
  /// This is an optional EP capability. If the EP does not support external resource import,
  /// out_importer is set to nullptr and the function returns success (nullptr status).
  /// This allows callers to use the simple "if (status != nullptr) handle_error()" pattern
  /// and check out_importer separately for capability detection.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to create the importer for.
  /// \param[out] out_importer Output parameter set to the created OrtExternalResourceImporter instance,
  /// or nullptr if the EP does not support external resource import.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpDevice> ep_device,
        ffi.Pointer<ffi.Pointer<OrtExternalResourceImporter>> out_importer,
      )
    >
  >
  CreateExternalResourceImporterForDevice;

  /// \brief Release an OrtExternalResourceImporter instance.
  ///
  /// \param[in] input The OrtExternalResourceImporter instance to release. May be nullptr.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtExternalResourceImporter> input)
    >
  >
  ReleaseExternalResourceImporter;

  /// \brief Check if the external resource importer can import a specific memory handle type.
  ///
  /// \param[in] importer The OrtExternalResourceImporter instance.
  /// \param[in] handle_type The type of external memory handle to check.
  /// \param[out] out_supported Set to true if the handle type is supported.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporter> importer,
        ffi.UnsignedInt handle_type,
        ffi.Pointer<ffi.Bool> out_supported,
      )
    >
  >
  CanImportMemory;

  /// \brief Import external memory into the execution provider.
  ///
  /// \param[in] importer The OrtExternalResourceImporter instance.
  /// \param[in] desc Descriptor containing the external memory handle and properties.
  /// \param[out] out_handle Output parameter set to the created OrtExternalMemoryHandle.
  /// The caller owns the returned handle and must call ReleaseExternalMemoryHandle to free it.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporter> importer,
        ffi.Pointer<OrtExternalMemoryDescriptor> desc,
        ffi.Pointer<ffi.Pointer<OrtExternalMemoryHandle>> out_handle,
      )
    >
  >
  ImportMemory;

  /// \brief Release an OrtExternalMemoryHandle instance.
  ///
  /// \param[in] input The OrtExternalMemoryHandle instance to release. May be nullptr.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtExternalMemoryHandle> input)
    >
  >
  ReleaseExternalMemoryHandle;

  /// \brief Create a tensor backed by imported external memory.
  ///
  /// The created tensor is a view over the imported memory and does not copy data.
  /// The OrtExternalMemoryHandle must remain valid for the lifetime of the tensor.
  ///
  /// \param[in] importer The OrtExternalResourceImporter instance.
  /// \param[in] mem_handle The imported external memory handle.
  /// \param[in] tensor_desc Descriptor specifying tensor element type, shape, and optional offset.
  /// \param[out] out_tensor Output parameter set to the created OrtValue containing the tensor.
  /// The caller owns the returned tensor and must call ReleaseValue to free it.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporter> importer,
        ffi.Pointer<OrtExternalMemoryHandle> mem_handle,
        ffi.Pointer<OrtExternalTensorDescriptor> tensor_desc,
        ffi.Pointer<ffi.Pointer<OrtValue>> out_tensor,
      )
    >
  >
  CreateTensorFromMemory;

  /// \brief Check if the external resource importer can import a specific semaphore type.
  ///
  /// \param[in] importer The OrtExternalResourceImporter instance.
  /// \param[in] type The type of external semaphore to check.
  /// \param[out] out_supported Set to true if the semaphore type is supported.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporter> importer,
        ffi.UnsignedInt type,
        ffi.Pointer<ffi.Bool> out_supported,
      )
    >
  >
  CanImportSemaphore;

  /// \brief Import an external semaphore into the execution provider.
  ///
  /// The returned OrtExternalSemaphoreHandle can be used with WaitSemaphore and an OrtSyncStream
  /// to synchronize execution with external operations.
  ///
  /// \param[in] importer The OrtExternalResourceImporter instance.
  /// \param[in] desc Descriptor containing the external semaphore handle and type.
  /// \param[out] out_handle Output parameter set to the created OrtExternalSemaphoreHandle.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporter> importer,
        ffi.Pointer<OrtExternalSemaphoreDescriptor> desc,
        ffi.Pointer<ffi.Pointer<OrtExternalSemaphoreHandle>> out_handle,
      )
    >
  >
  ImportSemaphore;

  /// \brief Release an OrtExternalSemaphoreHandle instance.
  ///
  /// \param[in] input The OrtExternalSemaphoreHandle instance to release. May be nullptr.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtExternalSemaphoreHandle> input)
    >
  >
  ReleaseExternalSemaphoreHandle;

  /// \brief Wait on an external semaphore on the EP's stream.
  ///
  /// Inserts a wait operation into the EP's stream that blocks until the semaphore
  /// reaches the specified value. This is used to synchronize with external GPU work
  /// (e.g., D3D12 timeline fence).
  ///
  /// \param[in] importer The OrtExternalResourceImporter instance.
  /// \param[in] semaphore_handle The imported external semaphore.
  /// \param[in] stream The OrtSyncStream to wait on.
  /// \param[in] value The fence/semaphore value to wait for.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporter> importer,
        ffi.Pointer<OrtExternalSemaphoreHandle> semaphore_handle,
        ffi.Pointer<OrtSyncStream> stream,
        ffi.Uint64 value,
      )
    >
  >
  WaitSemaphore;

  /// \brief Signal an external semaphore from the EP's stream.
  ///
  /// Inserts a signal operation into the EP's stream that sets the semaphore
  /// to the specified value when reached. This is used to notify external GPU work
  /// (e.g., D3D12 timeline fence) that ORT inference is complete.
  ///
  /// \param[in] importer The OrtExternalResourceImporter instance.
  /// \param[in] semaphore_handle The imported external semaphore.
  /// \param[in] stream The OrtSyncStream to signal from.
  /// \param[in] value The fence/semaphore value to signal.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtExternalResourceImporter> importer,
        ffi.Pointer<OrtExternalSemaphoreHandle> semaphore_handle,
        ffi.Pointer<OrtSyncStream> stream,
        ffi.Uint64 value,
      )
    >
  >
  SignalSemaphore;
}

/// \brief Configuration options for creating an OrtEnv.
///
/// \note The version field must be set to ORT_API_VERSION.
/// This ensures forward compatibility as fields may be added in future versions.
///
/// \since Version 1.24.
final class OrtEnvCreationOptions extends ffi.Struct {
  /// < Must be set to ORT_API_VERSION
  @ffi.Uint32()
  external int version;

  /// \brief The logging severity level for the environment. Must be set to a value from OrtLoggingLevel.
  ///
  /// \note Logging messages which are less severe than the `logging_severity_level` are not emitted.
  ///
  /// \note Serves as the default logging severity level for session creation and runs.
  /// Use OrtApi::SetSessionLogSeverityLevel to set a logging severity level for the creation of specific session.
  /// Use OrtApi::RunOptionsSetRunLogSeverityLevel to set a logging severity level for a specific session run.
  ///
  /// \since Version 1.24.
  @ffi.Int32()
  external int logging_severity_level;

  /// \brief The log identifier. Must be set to a valid UTF-8 null-terminated string.
  ///
  /// \note This string identifier is copied by ORT.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<ffi.Char> log_id;

  /// \brief Optional custom logging function. May be set to NULL.
  ///
  /// \note The OrtEnvCreationOptions::custom_logging_param is provided as the first argument to this logging function.
  /// This allows passing custom state into the logging function.
  ///
  /// \note This function is only called when a message's severity meets or exceeds the set logging severity level.
  ///
  /// \since Version 1.24.
  external OrtLoggingFunction custom_logging_function;

  /// \brief Optional state to pass as the first argument to OrtEnvCreationOptions::custom_logger_function.
  /// May be set to NULL.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<ffi.Void> custom_logging_param;

  /// \brief Optional threading options for creating an environment with global thread pools shared across sessions.
  /// May be set to NULL.
  ///
  /// \note The OrtThreadingOptions instance is copied by ORT.
  ///
  /// \note Use OrtApi::CreateThreadingOptions() to create an instance of OrtThreadingOptions.
  ///
  /// \note Use this in conjunction with OrtApi::DisablePerSessionThreads or else the session will use its own
  /// thread pools.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<OrtThreadingOptions> threading_options;

  /// \brief Optional environment configuration entries represented as string key-value pairs. May be set to NULL.
  ///
  /// \note The OrtKeyValuePairs instance is copied by ORT.
  ///
  /// \note Refer to onnxruntime_env_config_keys.h for common config entry keys and their supported values.
  ///
  /// \note An application provides environment-level configuration options for execution provider libraries by
  /// using keys with the prefix 'ep_factory.\\<ep_name\\>.'. Ex: the key 'ep_factory.my_ep.some_ep_key' represents
  /// a key named 'some_ep_key' that is meant to be consumed by an execution provider named 'my_ep'. Refer to
  /// the specific execution provider's documentation for valid keys and values.
  ///
  /// \note An application may separately set session-level configuration options for execution providers via other APIs
  /// such as SessionOptionsAppendExecutionProvider_V2, which store configuration entries within OrtSessionOptions.
  /// If an environment-level configuration conflicts with a session-level configuration, then
  /// precedence is determined by the execution provider library itself.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<OrtKeyValuePairs> config_entries;
}

/// \brief The C API
///
/// All C API functions are defined inside this structure as pointers to functions.
/// Call OrtApiBase::GetApi to get a pointer to it
///
/// \nosubgrouping
final class OrtApi extends ffi.Struct {
  /// \brief Create an OrtStatus from a null terminated string
  ///
  /// \param[in] code
  /// \param[in] msg A null-terminated string. Its contents will be copied.
  /// \return A new OrtStatus object, must be destroyed with OrtApi::ReleaseStatus
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtStatus> Function(
        ffi.UnsignedInt code,
        ffi.Pointer<ffi.Char> msg,
      )
    >
  >
  CreateStatus;

  /// \brief Get OrtErrorCode from OrtStatus
  ///
  /// \param[in] status
  /// \return OrtErrorCode that \p status was created with
  external ffi.Pointer<
    ffi.NativeFunction<ffi.UnsignedInt Function(ffi.Pointer<OrtStatus> status)>
  >
  GetErrorCode;

  /// \brief Get error string from OrtStatus
  ///
  /// \param[in] status
  /// \return The error message inside the `status`. Do not free the returned value.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtStatus> status)
    >
  >
  GetErrorMessage;

  /// \brief Create an OrtEnv
  ///
  /// \note Invoking this function will return the same instance of the environment as that returned by a previous call
  /// to another env creation function; all arguments to this function will be ignored.
  /// \param[in] log_severity_level The log severity level.
  /// \param[in] logid The log identifier.
  /// \param[out] out Returned newly created OrtEnv. Must be freed with OrtApi::ReleaseEnv
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.UnsignedInt log_severity_level,
        ffi.Pointer<ffi.Char> logid,
        ffi.Pointer<ffi.Pointer<OrtEnv>> out,
      )
    >
  >
  CreateEnv;

  /// \brief Create an OrtEnv
  ///
  /// \note Invoking this function will return the same instance of the environment as that returned by a previous call
  /// to another env creation function; all arguments to this function will be ignored. If you want to provide your
  /// own logging function, consider setting it using the SetUserLoggingFunction API instead.
  /// \param[in] logging_function A pointer to a logging function.
  /// \param[in] logger_param A pointer to arbitrary data passed as the ::OrtLoggingFunction `param` parameter to
  /// `logging_function`. This parameter is optional.
  /// \param[in] log_severity_level The log severity level.
  /// \param[in] logid The log identifier.
  /// \param[out] out Returned newly created OrtEnv. Must be freed with OrtApi::ReleaseEnv
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        OrtLoggingFunction logging_function,
        ffi.Pointer<ffi.Void> logger_param,
        ffi.UnsignedInt log_severity_level,
        ffi.Pointer<ffi.Char> logid,
        ffi.Pointer<ffi.Pointer<OrtEnv>> out,
      )
    >
  >
  CreateEnvWithCustomLogger;

  /// \brief Enable Telemetry
  ///
  /// \note Telemetry events are on by default since they are lightweight
  /// \param[in] env
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<OrtStatusPtr Function(ffi.Pointer<OrtEnv> env)>
  >
  EnableTelemetryEvents;

  /// \brief Disable Telemetry
  ///
  /// \see OrtApi::EnableTelemetryEvents
  /// \param[in] env
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<OrtStatusPtr Function(ffi.Pointer<OrtEnv> env)>
  >
  DisableTelemetryEvents;

  /// \brief Create an OrtSession from a model file
  ///
  /// \param[in] env
  /// \param[in] model_path
  /// \param[in] options
  /// \param[out] out Returned newly created OrtSession. Must be freed with OrtApi::ReleaseSession
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// /
  /// // TODO: document the path separator convention? '/' vs '\'
  /// // TODO: should specify the access characteristics of model_path. Is this read only during the
  /// // execution of CreateSession, or does the OrtSession retain a handle to the file/directory
  /// // and continue to access throughout the OrtSession lifetime?
  /// //  What sort of access is needed to model_path : read or read/write?
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Char> model_path,
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<OrtSession>> out,
      )
    >
  >
  CreateSession;

  /// \brief Create an OrtSession from memory
  ///
  /// \param[in] env
  /// \param[in] model_data
  /// \param[in] model_data_length
  /// \param[in] options
  /// \param[out] out Returned newly created OrtSession. Must be freed with OrtApi::ReleaseSession
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Void> model_data,
        ffi.Size model_data_length,
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<OrtSession>> out,
      )
    >
  >
  CreateSessionFromArray;

  /// \brief Run the model in an ::OrtSession
  ///
  /// Will not return until the model run has completed. Multiple threads might be used to run the model based on
  /// the options in the ::OrtSession and settings used when creating the ::OrtEnv
  ///
  /// \param[in] session
  /// \param[in] run_options If nullptr, will use a default ::OrtRunOptions
  /// \param[in] input_names Array of null terminated UTF8 encoded strings of the input names
  /// \param[in] inputs Array of ::OrtValue%s of the input values
  /// \param[in] input_len Number of elements in the input_names and inputs arrays
  /// \param[in] output_names Array of null terminated UTF8 encoded strings of the output names
  /// \param[in] output_names_len Number of elements in the output_names and outputs array
  /// \param[out] outputs Array of ::OrtValue%s that the outputs are stored in. This can also be
  /// an array of nullptr values, in this case ::OrtValue objects will be allocated and pointers
  /// to them will be set into the `outputs` array.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<OrtRunOptions> run_options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> input_names,
        ffi.Pointer<ffi.Pointer<OrtValue>> inputs,
        ffi.Size input_len,
        ffi.Pointer<ffi.Pointer<ffi.Char>> output_names,
        ffi.Size output_names_len,
        ffi.Pointer<ffi.Pointer<OrtValue>> outputs,
      )
    >
  >
  Run;

  /// \brief Create an ::OrtSessionOptions object
  ///
  /// To use additional providers, you must build ORT with the extra providers enabled. Then call one of these
  /// functions to enable them in the session:<br>
  /// OrtSessionOptionsAppendExecutionProvider_CPU<br>
  /// OrtSessionOptionsAppendExecutionProvider_CUDA<br>
  /// OrtSessionOptionsAppendExecutionProvider_(remaining providers...)<br>
  /// The order they are called indicates the preference order as well. In other words call this method
  /// on your most preferred execution provider first followed by the less preferred ones.
  /// If none are called Ort will use its internal CPU execution provider.
  ///
  /// \param[out] options The newly created OrtSessionOptions. Must be freed with OrtApi::ReleaseSessionOptions
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<ffi.Pointer<OrtSessionOptions>> options)
    >
  >
  CreateSessionOptions;

  /// \brief Set filepath to save optimized model after graph level transformations
  ///
  /// \param[in] options
  /// \param[in] optimized_model_filepath
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> optimized_model_filepath,
      )
    >
  >
  SetOptimizedModelFilePath;

  /// \brief Create a copy of an existing ::OrtSessionOptions
  ///
  /// \param[in] in_options OrtSessionOptions to copy
  /// \param[out] out_options Returned newly created ::OrtSessionOptions. Must be freed with OrtApi::ReleaseSessionOptions
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> in_options,
        ffi.Pointer<ffi.Pointer<OrtSessionOptions>> out_options,
      )
    >
  >
  CloneSessionOptions;

  /// \brief Set execution mode
  ///
  /// Controls whether you want to execute operators in your graph sequentially or in parallel. Usually when the model
  /// has many branches, setting this option to ExecutionMode.ORT_PARALLEL will give you better performance.
  /// See [docs/ONNX_Runtime_Perf_Tuning.md] for more details.
  ///
  /// \param[in] options
  /// \param[in] execution_mode
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.UnsignedInt execution_mode,
      )
    >
  >
  SetSessionExecutionMode;

  /// \brief Enable profiling for a session
  ///
  /// \param[in] options
  /// \param[in] profile_file_prefix
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> profile_file_prefix,
      )
    >
  >
  EnableProfiling;

  /// \brief Disable profiling for a session
  ///
  /// \param[in] options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions> options)
    >
  >
  DisableProfiling;

  /// \brief Enable the memory pattern optimization
  ///
  /// The idea is if the input shapes are the same, we could trace the internal memory allocation
  /// and generate a memory pattern for future request. So next time we could just do one allocation
  /// with a big chunk for all the internal memory allocation.
  /// \note Memory pattern optimization is only available when Sequential Execution mode is enabled (see OrtApi::SetSessionExecutionMode)
  ///
  /// \see OrtApi::DisableMemPattern
  ///
  /// \param[in] options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions> options)
    >
  >
  EnableMemPattern;

  /// \brief Disable the memory pattern optimization
  ///
  /// \see OrtApi::EnableMemPattern
  ///
  /// \param[in] options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions> options)
    >
  >
  DisableMemPattern;

  /// \brief Enable the memory arena on CPU
  ///
  /// Arena may pre-allocate memory for future usage.
  ///
  /// \param[in] options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions> options)
    >
  >
  EnableCpuMemArena;

  /// \brief Disable the memory arena on CPU
  ///
  /// \param[in] options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions> options)
    >
  >
  DisableCpuMemArena;

  /// \brief Set session log id
  ///
  /// \param[in] options
  /// \param[in] logid The log identifier.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> logid,
      )
    >
  >
  SetSessionLogId;

  /// \brief Set session log verbosity level
  ///
  /// Applies to session load, initialization, etc
  ///
  /// \param[in] options
  /// \param[in] session_log_verbosity_level \snippet{doc} snippets.dox Log Verbosity Level
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Int session_log_verbosity_level,
      )
    >
  >
  SetSessionLogVerbosityLevel;

  /// \brief Set session log severity level
  ///
  /// \param[in] options
  /// \param[in] session_log_severity_level The log severity level (refer to ::OrtLoggingLevel for possible values).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Int session_log_severity_level,
      )
    >
  >
  SetSessionLogSeverityLevel;

  /// \brief Set the optimization level to apply when loading a graph
  ///
  /// Please see https://onnxruntime.ai/docs/performance/model-optimizations/graph-optimizations.html for an in-depth explanation
  /// \param[in,out] options The session options object
  /// \param[in] graph_optimization_level The optimization level
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.UnsignedInt graph_optimization_level,
      )
    >
  >
  SetSessionGraphOptimizationLevel;

  /// \brief Sets the number of threads used to parallelize the execution within nodes
  ///
  /// When running a single node operation, ex. add, this sets the maximum number of threads to use.
  ///
  /// \note If built with OpenMP, this has no effect on the number of threads used. In this case
  /// use the OpenMP env variables to configure the number of intra op num threads.
  ///
  /// \param[in] options
  /// \param[in] intra_op_num_threads Number of threads to use<br>
  /// A value of 0 will use the default number of threads<br>
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Int intra_op_num_threads,
      )
    >
  >
  SetIntraOpNumThreads;

  /// \brief Sets the number of threads used to parallelize the execution of the graph
  ///
  /// If nodes can be run in parallel, this sets the maximum number of threads to use to run them in parallel.
  ///
  /// \note If sequential execution is enabled this value is ignored, it acts as if it was set to 1.
  ///
  /// \param[in] options
  /// \param[in] inter_op_num_threads Number of threads to use<br>
  /// A value of 0 will use the default number of threads<br>
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Int inter_op_num_threads,
      )
    >
  >
  SetInterOpNumThreads;

  /// \brief Create a custom op domain
  ///
  /// \param[in] domain
  /// \param[out] out Newly created domain. Must be freed with OrtApi::ReleaseCustomOpDomain
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> domain,
        ffi.Pointer<ffi.Pointer<OrtCustomOpDomain>> out,
      )
    >
  >
  CreateCustomOpDomain;

  /// \brief Add a custom op to a custom op domain
  ///
  /// \note The OrtCustomOp* pointer must remain valid until the ::OrtCustomOpDomain using it is released
  ///
  /// \param[in] custom_op_domain
  /// \param[in] op
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCustomOpDomain> custom_op_domain,
        ffi.Pointer<OrtCustomOp> op,
      )
    >
  >
  CustomOpDomain_Add;

  /// \brief Add custom op domain to a session options
  ///
  /// \note The OrtCustomOpDomain* must not be deleted until all sessions using it are released
  ///
  /// \param[in] options
  /// \param[in] custom_op_domain
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtCustomOpDomain> custom_op_domain,
      )
    >
  >
  AddCustomOpDomain;

  /// \deprecated Use OrtApi::RegisterCustomOpsLibrary_V2.
  ///
  /// Registers custom ops from a shared library.
  ///
  /// Loads a shared library (dll on windows, so on linux, etc) named 'library_path' and looks for this entry point:
  /// OrtStatus* RegisterCustomOps(OrtSessionOptions * options, const OrtApiBase* api);
  /// It then passes in the provided session options to this function along with the api base.
  /// The handle to the loaded library is returned in library_handle. It can be freed by the caller after all sessions using the passed in
  /// session options are destroyed, or if an error occurs and it is non null.
  ///
  /// \param[in] options
  /// \param[in] library_path
  /// \param[out] library_handle OS specific handle to the loaded library (Use FreeLibrary on Windows, dlclose on Linux, etc.. to unload)
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> library_path,
        ffi.Pointer<ffi.Pointer<ffi.Void>> library_handle,
      )
    >
  >
  RegisterCustomOpsLibrary;

  /// \brief Get input count for a session
  ///
  /// This number must also match the number of inputs passed to OrtApi::Run
  ///
  /// \see OrtApi::SessionGetInputTypeInfo, OrtApi::SessionGetInputName, OrtApi::Session
  ///
  /// \param[in] session
  /// \param[out] out Number of inputs
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  SessionGetInputCount;

  /// \brief Get output count for a session
  ///
  /// This number must also match the number of outputs returned by OrtApi::Run
  ///
  /// \see OrtApi::SessionGetOutputTypeInfo, OrtApi::SessionGetOutputName, OrtApi::Session
  ///
  /// \param[in] session
  /// \param[out] out Number of outputs
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  SessionGetOutputCount;

  /// \brief Get overridable initializer count
  ///
  /// \see OrtApi::SessionGetOverridableInitializerTypeInfo, OrtApi::SessionGetOverridableInitializerName
  ///
  /// \param[in] session
  /// \param[in] out
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  SessionGetOverridableInitializerCount;

  /// \brief Get input type information
  ///
  /// \param[in] session
  /// \param[in] index Must be between 0 (inclusive) and what OrtApi::SessionGetInputCount returns (exclusive)
  /// \param[out] type_info Must be freed with OrtApi::ReleaseTypeInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Size index,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  SessionGetInputTypeInfo;

  /// \brief Get output type information
  ///
  /// \param[in] session
  /// \param[in] index Must be between 0 (inclusive) and what OrtApi::SessionGetOutputCount returns (exclusive)
  /// \param[out] type_info Must be freed with OrtApi::ReleaseTypeInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Size index,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  SessionGetOutputTypeInfo;

  /// \brief Get overridable initializer type information
  ///
  /// \param[in] session
  /// \param[in] index Must be between 0 (inclusive) and what OrtApi::SessionGetOverridableInitializerCount returns (exclusive)
  /// \param[out] type_info Must be freed with OrtApi::ReleaseTypeInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Size index,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  SessionGetOverridableInitializerTypeInfo;

  /// \brief Get input name
  ///
  /// \param[in] session
  /// \param[in] index Must be between 0 (inclusive) and what OrtApi::SessionGetInputCount returns (exclusive)
  /// \param[in] allocator
  /// \param[out] value Set to a null terminated UTF-8 encoded string allocated using `allocator`. Must be freed using `allocator`.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Size index,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  SessionGetInputName;

  /// \brief Get output name
  ///
  /// \param[in] session
  /// \param[in] index Must be between 0 (inclusive) and what OrtApi::SessionGetOutputCount returns (exclusive)
  /// \param[in] allocator
  /// \param[out] value Set to a null terminated UTF-8 encoded string allocated using `allocator`. Must be freed using `allocator`.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Size index,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  SessionGetOutputName;

  /// \brief Get overridable initializer name
  ///
  /// \param[in] session
  /// \param[in] index Must be between 0 (inclusive) and what OrtApi::SessionGetOverridableInitializerCount returns (exclusive)
  /// \param[in] allocator
  /// \param[out] value Set to a null terminated UTF-8 encoded string allocated using `allocator`. Must be freed using `allocator`.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Size index,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  SessionGetOverridableInitializerName;

  /// \brief Create an OrtRunOptions
  ///
  /// \param[out] out Returned newly created ::OrtRunOptions. Must be freed with OrtApi::ReleaseRunOptions
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<ffi.Pointer<OrtRunOptions>> out)
    >
  >
  CreateRunOptions;

  /// \brief Set per-run log verbosity level
  ///
  /// \see OrtApi::RunOptionsGetRunLogVerbosityLevel
  ///
  /// \param[in] options
  /// \param[in] log_verbosity_level \snippet{doc} snippets.dox Log Verbosity Level
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Int log_verbosity_level,
      )
    >
  >
  RunOptionsSetRunLogVerbosityLevel;

  /// \brief Set per-run log severity level
  ///
  /// \see OrtApi::RunOptionsGetRunLogSeverityLevel
  ///
  /// \param[in] options
  /// \param[in] log_severity_level The log severity level (refer to ::OrtLoggingLevel for possible values).
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Int log_severity_level,
      )
    >
  >
  RunOptionsSetRunLogSeverityLevel;

  /// \brief Set per-run tag
  ///
  /// This is used in a per-run log identifier.
  ///
  /// \see OrtApi::RunOptionsGetRunTag
  ///
  /// \param[in] options
  /// \param[in] run_tag The run tag.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Pointer<ffi.Char> run_tag,
      )
    >
  >
  RunOptionsSetRunTag;

  /// \brief Get per-run log verbosity level
  ///
  /// \see OrtApi::RunOptionsSetRunLogVerbosityLevel
  ///
  /// \param[in] options
  /// \param[out] log_verbosity_level \snippet{doc} snippets.dox Log Verbosity Level
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Pointer<ffi.Int> log_verbosity_level,
      )
    >
  >
  RunOptionsGetRunLogVerbosityLevel;

  /// \brief Get per-run log severity level
  ///
  /// \see OrtApi::RunOptionsSetRunLogSeverityLevel
  ///
  /// \param[in] options
  /// \param[out] log_severity_level The log severity level (refer to ::OrtLoggingLevel for possible values).
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Pointer<ffi.Int> log_severity_level,
      )
    >
  >
  RunOptionsGetRunLogSeverityLevel;

  /// \brief Get per-run tag
  ///
  /// This is used in a per-run log identifier.
  ///
  /// \see OrtApi::RunOptionsSetRunTag
  ///
  /// \param[in] options
  /// \param[out] run_tag The run tag.
  /// Do not free this value, it is owned by `options`. It will be invalidated if the run tag
  /// changes (i.e., with OrtApi::RunOptionsSetRunTag) or `options` is freed.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> run_tag,
      )
    >
  >
  RunOptionsGetRunTag;

  /// \brief Set terminate flag
  ///
  /// If a currently executing session needs to be force terminated, this can be called from another thread to force it to fail with an error.
  ///
  /// \param[in] options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtRunOptions> options)
    >
  >
  RunOptionsSetTerminate;

  /// \brief Clears the terminate flag
  ///
  /// Used so the OrtRunOptions instance can be used in a new OrtApi::Run call without it instantly terminating
  ///
  /// \param[in] options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtRunOptions> options)
    >
  >
  RunOptionsUnsetTerminate;

  /// \brief Create a tensor
  ///
  /// Create a tensor using a supplied ::OrtAllocator
  ///
  /// \param[in] allocator
  /// \param[in] shape Pointer to the tensor shape dimensions.
  /// \param[in] shape_len The number of tensor shape dimensions.
  /// \param[in] type
  /// \param[out] out Returns newly created ::OrtValue. Must be freed with OrtApi::ReleaseValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Int64> shape,
        ffi.Size shape_len,
        ffi.UnsignedInt type,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  CreateTensorAsOrtValue;

  /// \brief Create a tensor backed by a user supplied buffer
  ///
  /// Create a tensor with user's buffer. You can fill the buffer either before calling this function or after.
  /// p_data is owned by caller. ReleaseValue won't release p_data.
  ///
  /// If you wish to transfer ownership of p_data to ORT use CreateTensorWithDataAndDeleterAsOrtValue.
  ///
  /// \param[in] info Memory description of where the p_data buffer resides (CPU vs GPU etc).
  /// \param[in] p_data Pointer to the data buffer.
  /// \param[in] p_data_len The number of bytes in the data buffer.
  /// \param[in] shape Pointer to the tensor shape dimensions.
  /// \param[in] shape_len The number of tensor shape dimensions.
  /// \param[in] type The data type.
  /// \param[out] out Returns newly created ::OrtValue. Must be freed with OrtApi::ReleaseValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMemoryInfo> info,
        ffi.Pointer<ffi.Void> p_data,
        ffi.Size p_data_len,
        ffi.Pointer<ffi.Int64> shape,
        ffi.Size shape_len,
        ffi.UnsignedInt type,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  CreateTensorWithDataAsOrtValue;

  /// \brief Return if an ::OrtValue is a tensor type
  ///
  /// \param[in] value A tensor type (string tensors are not supported)
  /// \param[out] out Set to 1 iff ::OrtValue is a tensor, 0 otherwise
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Int> out,
      )
    >
  >
  IsTensor;

  /// \brief Get a pointer to the raw data inside a tensor
  ///
  /// Used to read/write/modify the internal tensor data directly.
  /// \note The returned pointer is valid until the \p value is destroyed.
  ///
  /// \param[in] value A tensor type (string tensors are not supported)
  /// \param[out] out Filled in with a pointer to the internal storage
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Pointer<ffi.Void>> out,
      )
    >
  >
  GetTensorMutableData;

  /// \brief Set all strings at once in a string tensor
  ///
  /// \param[in,out] value A tensor of type ONNX_TENSOR_ELEMENT_DATA_TYPE_STRING
  /// \param[in] s An array of strings. Each string in this array must be null terminated.
  /// \param[in] s_len Count of strings in s (Must match the size of \p value's tensor shape)
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Pointer<ffi.Char>> s,
        ffi.Size s_len,
      )
    >
  >
  FillStringTensor;

  /// \brief Get total byte length for all strings in a string tensor
  ///
  /// Typically used with OrtApi::GetStringTensorContent
  ///
  /// \param[in] value A tensor of type ONNX_TENSOR_ELEMENT_DATA_TYPE_STRING
  /// \param[out] len Total byte length of all strings (does not include trailing nulls)
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Size> len,
      )
    >
  >
  GetStringTensorDataLength;

  /// \brief Get all strings from a string tensor
  ///
  /// An example of the results:<br>
  /// Given \p value is a string tensor with the strings { "This" "is" "a" "test" }<br>
  /// \p s must have a size of 11 bytes<br>
  /// \p offsets must have 4 elements<br>
  /// After the call, these values will be filled in:<br>
  /// \p s will contain "Thisisatest"<br>
  /// \p offsets will contain { 0, 4, 6, 7 }<br>
  /// The length of the last string is just s_len - offsets[last]
  ///
  /// \param[in] value A tensor of type ONNX_TENSOR_ELEMENT_DATA_TYPE_STRING
  /// \param[in] s Buffer to sequentially write all tensor strings to. Each string is NOT null-terminated.
  /// \param[in] s_len Number of bytes of buffer pointed to by \p s (Get it from OrtApi::GetStringTensorDataLength)
  /// \param[out] offsets Array of start offsets into the strings written to \p s
  /// \param[in] offsets_len Number of elements in offsets
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Void> s,
        ffi.Size s_len,
        ffi.Pointer<ffi.Size> offsets,
        ffi.Size offsets_len,
      )
    >
  >
  GetStringTensorContent;

  /// \brief Get ::OrtTensorTypeAndShapeInfo from an ::OrtTypeInfo
  ///
  /// \param[in] type_info
  /// \param[out] out Do not free this value, it will be valid until type_info is freed.
  /// If type_info does not represent tensor, this value will be set to nullptr.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTypeInfo> type_info,
        ffi.Pointer<ffi.Pointer<OrtTensorTypeAndShapeInfo>> out,
      )
    >
  >
  CastTypeInfoToTensorInfo;

  /// \brief Get ::ONNXType from ::OrtTypeInfo
  ///
  /// \param[in] type_info
  /// \param[out] out
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTypeInfo> type_info,
        ffi.Pointer<ffi.UnsignedInt> out,
      )
    >
  >
  GetOnnxTypeFromTypeInfo;

  /// \brief Create an ::OrtTensorTypeAndShapeInfo object
  ///
  /// \param[out] out Returns newly created ::OrtTensorTypeAndShapeInfo. Must be freed with OrtApi::ReleaseTensorTypeAndShapeInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtTensorTypeAndShapeInfo>> out,
      )
    >
  >
  CreateTensorTypeAndShapeInfo;

  /// \brief Set element type in ::OrtTensorTypeAndShapeInfo
  ///
  /// \param[in] info
  /// \param[in] type
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
        ffi.UnsignedInt type,
      )
    >
  >
  SetTensorElementType;

  /// \brief Set shape information in ::OrtTensorTypeAndShapeInfo
  ///
  /// \param[in] info
  /// \param[in] dim_values Array with `dim_count` elements. Can contain negative values.
  /// \param[in] dim_count Number of elements in `dim_values`
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
        ffi.Pointer<ffi.Int64> dim_values,
        ffi.Size dim_count,
      )
    >
  >
  SetDimensions;

  /// \brief Get element type in ::OrtTensorTypeAndShapeInfo
  ///
  /// \see OrtApi::SetTensorElementType
  ///
  /// \param[in] info
  /// \param[out] out
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
        ffi.Pointer<ffi.UnsignedInt> out,
      )
    >
  >
  GetTensorElementType;

  /// \brief Get dimension count in ::OrtTensorTypeAndShapeInfo
  ///
  /// \see OrtApi::GetDimensions
  ///
  /// \param[in] info
  /// \param[out] out
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  GetDimensionsCount;

  /// \brief Get dimensions in ::OrtTensorTypeAndShapeInfo
  ///
  /// \param[in] info
  /// \param[out] dim_values Array with `dim_values_length` elements. On return, filled with the dimensions stored in the ::OrtTensorTypeAndShapeInfo
  /// \param[in] dim_values_length Number of elements in `dim_values`. Use OrtApi::GetDimensionsCount to get this value
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
        ffi.Pointer<ffi.Int64> dim_values,
        ffi.Size dim_values_length,
      )
    >
  >
  GetDimensions;

  /// \brief Get symbolic dimension names in ::OrtTensorTypeAndShapeInfo
  ///
  /// \param[in] info
  /// \param[in] dim_params Array with `dim_params_length` elements. On return filled with pointers to null terminated strings of the dimension names
  /// \param[in] dim_params_length Number of elements in `dim_params`. Use OrtApi::GetDimensionsCount to get this value
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
        ffi.Pointer<ffi.Pointer<ffi.Char>> dim_params,
        ffi.Size dim_params_length,
      )
    >
  >
  GetSymbolicDimensions;

  /// \brief Get total number of elements in a tensor shape from an ::OrtTensorTypeAndShapeInfo
  ///
  /// Return the number of elements specified by the tensor shape (all dimensions multiplied by each other).
  /// For 0 dimensions, 1 is returned. If any dimension is less than 0, the result is always -1.
  ///
  /// Examples:<br>
  /// [] = 1<br>
  /// [1,3,4] = 12<br>
  /// [2,0,4] = 0<br>
  /// [-1,3,4] = -1<br>
  ///
  /// \param[in] info
  /// \param[out] out Number of elements
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  GetTensorShapeElementCount;

  /// \brief Get type and shape information from a tensor ::OrtValue
  ///
  /// \param[in] value Must be a tensor (not a map/sequence/etc) or will return failure
  /// \param[out] out Newly created ::OrtTensorTypeAndShapeInfo. Must be freed with OrtApi::ReleaseTensorTypeAndShapeInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Pointer<OrtTensorTypeAndShapeInfo>> out,
      )
    >
  >
  GetTensorTypeAndShape;

  /// \brief Get type information of an OrtValue
  ///
  /// \param[in] value
  /// \param[out] out Newly created ::OrtTypeInfo. Must be freed with OrtApi::ReleaseTypeInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> out,
      )
    >
  >
  GetTypeInfo;

  /// \brief Get ONNXType of an ::OrtValue
  ///
  /// \param[in] value
  /// \param[out] out
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.UnsignedInt> out,
      )
    >
  >
  GetValueType;

  /// \brief Create an ::OrtMemoryInfo
  ///
  /// \param[in] name
  /// \param[in] type
  /// \param[in] id
  /// \param[in] mem_type
  /// \param[out] out Newly created ::OrtMemoryInfo. Must be freed with OrtAPi::ReleaseMemoryInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> name,
        ffi.Int type,
        ffi.Int id,
        ffi.Int mem_type,
        ffi.Pointer<ffi.Pointer<OrtMemoryInfo>> out,
      )
    >
  >
  CreateMemoryInfo;

  /// \brief Create an ::OrtMemoryInfo for CPU memory
  ///
  /// Special case version of OrtApi::CreateMemoryInfo for CPU based memory. Same as using OrtApi::CreateMemoryInfo with name = "Cpu" and id = 0.
  ///
  /// \param[in] type
  /// \param[in] mem_type
  /// \param[out] out
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Int type,
        ffi.Int mem_type,
        ffi.Pointer<ffi.Pointer<OrtMemoryInfo>> out,
      )
    >
  >
  CreateCpuMemoryInfo;

  /// \brief Compare ::OrtMemoryInfo objects for equality
  ///
  /// Compares all settings of each ::OrtMemoryInfo for equality
  ///
  /// \param[in] info1
  /// \param[in] info2
  /// \param[out] out Set to 0 if equal, -1 if not equal
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMemoryInfo> info1,
        ffi.Pointer<OrtMemoryInfo> info2,
        ffi.Pointer<ffi.Int> out,
      )
    >
  >
  CompareMemoryInfo;

  /// \brief Get name from ::OrtMemoryInfo
  ///
  /// \param[in] ptr
  /// \param[out] out Writes null terminated string to this pointer. Do NOT free the returned pointer. It is valid for the lifetime of the ::OrtMemoryInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMemoryInfo> ptr,
        ffi.Pointer<ffi.Pointer<ffi.Char>> out,
      )
    >
  >
  MemoryInfoGetName;

  /// \brief Get the device id from ::OrtMemoryInfo
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMemoryInfo> ptr,
        ffi.Pointer<ffi.Int> out,
      )
    >
  >
  MemoryInfoGetId;

  /// \brief Get the ::OrtMemType from ::OrtMemoryInfo
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMemoryInfo> ptr,
        ffi.Pointer<ffi.Int> out,
      )
    >
  >
  MemoryInfoGetMemType;

  /// \brief Get the ::OrtAllocatorType from ::OrtMemoryInfo
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMemoryInfo> ptr,
        ffi.Pointer<ffi.Int> out,
      )
    >
  >
  MemoryInfoGetType;

  /// \brief Calls OrtAllocator::Alloc function
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtAllocator> ort_allocator,
        ffi.Size size,
        ffi.Pointer<ffi.Pointer<ffi.Void>> out,
      )
    >
  >
  AllocatorAlloc;

  /// \brief Calls OrtAllocator::Free function
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtAllocator> ort_allocator,
        ffi.Pointer<ffi.Void> p,
      )
    >
  >
  AllocatorFree;

  /// \brief Calls OrtAllocator::Info function
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtAllocator> ort_allocator,
        ffi.Pointer<ffi.Pointer<OrtMemoryInfo>> out,
      )
    >
  >
  AllocatorGetInfo;

  /// \brief Get the default allocator
  ///
  /// The default allocator is a CPU based, non-arena. Always returns the same pointer to the same default allocator.
  ///
  /// \param[out] out Returned value should NOT be freed
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<ffi.Pointer<OrtAllocator>> out)
    >
  >
  GetAllocatorWithDefaultOptions;

  /// \brief Override session symbolic dimensions
  ///
  /// Override symbolic dimensions (by specific denotation strings) with actual values if known at session initialization time to enable
  /// optimizations that can take advantage of fixed values (such as memory planning, etc)
  ///
  /// \param[in] options
  /// \param[in] dim_denotation
  /// \param[in] dim_value
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> dim_denotation,
        ffi.Int64 dim_value,
      )
    >
  >
  AddFreeDimensionOverride;

  /// \brief Get non tensor data from an ::OrtValue
  ///
  /// If `value` is of type ONNX_TYPE_MAP, you need to retrieve the keys and values
  /// separately. Use index=0 to retrieve keys and index=1 to retrieve values.
  /// If `value` is of type ONNX_TYPE_SEQUENCE, use index to retrieve the index'th element
  /// of the sequence.
  ///
  /// \param[in] value
  /// \param[in] index See above for usage based on `value` type
  /// \param[in] allocator Allocator used to allocate ::OrtValue
  /// \param[out] out Created ::OrtValue that holds the element requested. Must be freed with OrtApi::ReleaseValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Int index,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  GetValue;

  /// \brief Get non tensor value count from an ::OrtValue
  ///
  /// If `value` is of type ONNX_TYPE_MAP 2 will always be returned. For ONNX_TYPE_SEQUENCE
  /// the number of elements in the sequence will be returned
  ///
  /// \param[in] value
  /// \param[out] out
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  GetValueCount;

  /// \brief Create a map or sequence ::OrtValue
  ///
  /// To construct a map (ONNX_TYPE_MAP), use num_values = 2 and `in` should be an array of 2 ::OrtValue%s
  /// representing keys and values.<br>
  ///
  /// To construct a sequence (ONNX_TYPE_SEQUENCE), use num_values = N where N is the number of the elements in the
  /// sequence. 'in' should be an array of N ::OrtValue%s.
  ///
  /// \param[in] in See above for details
  /// \param[in] num_values
  /// \param[in] value_type Must be either ONNX_TYPE_MAP or ONNX_TYPE_SEQUENCE
  /// \param[out] out Newly created ::OrtValue. Must be freed with OrtApi::ReleaseValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtValue>> in$,
        ffi.Size num_values,
        ffi.UnsignedInt value_type,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  CreateValue;

  /// \brief Create an opaque (custom user defined type) ::OrtValue
  ///
  /// Constructs an ::OrtValue that contains a value of non-standard type created for
  /// experiments or while awaiting standardization. ::OrtValue in this case would contain
  /// an internal representation of the Opaque type. Opaque types are distinguished from
  /// each other by two strings 1) domain and 2) type name. The combination of the two
  /// must be unique, so the type representation is properly identified internally. The combination
  /// must be properly registered from within ORT at both compile/run time or by another API.
  ///
  /// To construct the ::OrtValue pass domain and type names, also a pointer to a data container
  /// the type of which must be known to both ORT and the client program. That data container may or may
  /// not match the internal representation of the Opaque type. The sizeof(data_container) is passed for
  /// verification purposes.
  ///
  /// \param[in] domain_name Null terminated string of the domain name
  /// \param[in] type_name Null terminated string of the type name
  /// \param[in] data_container User pointer Data to populate ::OrtValue
  /// \param[in] data_container_size Size in bytes of what `data_container` points to
  /// \param[out] out Newly created ::OrtValue. Must be freed with OrtApi::ReleaseValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> domain_name,
        ffi.Pointer<ffi.Char> type_name,
        ffi.Pointer<ffi.Void> data_container,
        ffi.Size data_container_size,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  CreateOpaqueValue;

  /// \brief Get internal data from an opaque (custom user defined type) ::OrtValue
  ///
  /// Copies internal data from an opaque value into a user provided buffer
  ///
  /// \see OrtApi::CreateOpaqueValue
  ///
  /// \param[in] domain_name Null terminated string of the domain name
  /// \param[in] type_name Null terminated string of the type name
  /// \param[in] in The opaque ::OrtValue
  /// \param[out] data_container Buffer to copy data into
  /// \param[out] data_container_size Size in bytes of the buffer pointed to by data_container. Must match the size of the internal buffer.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> domain_name,
        ffi.Pointer<ffi.Char> type_name,
        ffi.Pointer<OrtValue> in$,
        ffi.Pointer<ffi.Void> data_container,
        ffi.Size data_container_size,
      )
    >
  >
  GetOpaqueValue;

  /// \brief Get a float stored as an attribute in the graph node
  ///
  /// \param[in] info ::OrtKernelInfo instance
  /// \param[in] name Null terminated string of the name of the attribute
  /// \param[out] out Pointer to memory where the attribute will be stored
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<ffi.Float> out,
      )
    >
  >
  KernelInfoGetAttribute_float;

  /// \brief Fetch a 64-bit int stored as an attribute in the graph node
  ///
  /// \param[in] info ::OrtKernelInfo instance
  /// \param[in] name Null terminated string of the name of the attribute
  /// \param[out] out Pointer to memory where the attribute will be stored
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<ffi.Int64> out,
      )
    >
  >
  KernelInfoGetAttribute_int64;

  /// \brief Fetch a string stored as an attribute in the graph node
  ///
  /// If `out` is nullptr, the value of `size` is set to the true size of the string
  /// attribute, and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the actual string attribute's size,
  /// the value of `size` is set to the true size of the string attribute, the provided memory
  /// is filled with the attribute's contents, and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual string attribute's size and `out`
  /// is not nullptr, the value of `size` is set to the true size of the string attribute
  /// and a failure status is returned.)
  ///
  /// \param[in] info ::OrtKernelInfo instance
  /// \param[in] name Null terminated string of the name of the attribute
  /// \param[out] out Pointer to memory where the attribute will be stored
  /// \param[in,out] size See above comments for details
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<ffi.Char> out,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  KernelInfoGetAttribute_string;

  /// \brief Used for custom operators, get the input count of a kernel
  ///
  /// \see ::OrtCustomOp
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  KernelContext_GetInputCount;

  /// \brief Used for custom operators, get the output count of a kernel
  ///
  /// \see ::OrtCustomOp
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  KernelContext_GetOutputCount;

  /// \brief Used for custom operators, get an input of a kernel
  ///
  /// The function attempts fetches the input of the kernel. If the input is optional
  /// and not present, the function returns success and out is set to nullptr.
  ///
  /// \param[in] context ::OrtKernelContext instance
  /// \param[in] index See KernelContext_GetInputCount for boundaries check.
  /// \param[out] out OrtValue if the input is present otherwise is set nullptr
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Size index,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  KernelContext_GetInput;

  /// \brief Used for custom operators, get an output of a kernel
  ///
  /// The function attempts fetches the output of the kernel. If the output is optional
  /// and not present, the function returns success and out is set to nullptr.
  ///
  /// \param[in] context ::OrtKernelContext instance
  /// \param[in] index See KernelContext_GetOutputCount for boundaries check.
  /// \param[in] dim_values output dimensions
  /// \param[in] dim_count number of dimensions
  /// \param[out] out a ptr to OrtValue to output otherwise set to nullptr
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Size index,
        ffi.Pointer<ffi.Int64> dim_values,
        ffi.Size dim_count,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  KernelContext_GetOutput;

  /// @}
  /// \name OrtEnv
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtEnv> input)>
  >
  ReleaseEnv;

  /// @}
  /// \name OrtStatus
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtStatus> input)>
  >
  ReleaseStatus;

  /// @}
  /// \name OrtMemoryInfo
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtMemoryInfo> input)>
  >
  ReleaseMemoryInfo;

  /// Don't call ReleaseSession from Dllmain (because session owns a thread pool)
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtSession> input)>
  >
  ReleaseSession;

  /// @}
  /// \name OrtValue
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtValue> input)>
  >
  ReleaseValue;

  /// @}
  /// \name OrtRunOptions
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtRunOptions> input)>
  >
  ReleaseRunOptions;

  /// @}
  /// \name OrtTypeInfo
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtTypeInfo> input)>
  >
  ReleaseTypeInfo;

  /// @}
  /// \name OrtTensorTypeAndShapeInfo
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtTensorTypeAndShapeInfo> input)
    >
  >
  ReleaseTensorTypeAndShapeInfo;

  /// @}
  /// \name OrtSessionOptions
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtSessionOptions> input)>
  >
  ReleaseSessionOptions;

  /// @}
  /// \name OrtCustomOpDomain
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtCustomOpDomain> input)>
  >
  ReleaseCustomOpDomain;

  /// \brief Get denotation from type information
  ///
  /// Augments ::OrtTypeInfo to return denotations on the type.
  ///
  /// This is used by WinML to determine if an input/output is intended to be an Image or a Tensor.
  ///
  /// \param[in] type_info
  /// \param[out] denotation Pointer to the null terminated denotation string is written to this pointer. This pointer is valid until the object is destroyed or the name is changed, do not free.
  /// \param[out] len Length in bytes of the string returned in `denotation`
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTypeInfo> type_info,
        ffi.Pointer<ffi.Pointer<ffi.Char>> denotation,
        ffi.Pointer<ffi.Size> len,
      )
    >
  >
  GetDenotationFromTypeInfo;

  /// \brief Get detailed map information from an ::OrtTypeInfo
  ///
  /// This augments ::OrtTypeInfo to return an ::OrtMapTypeInfo when the type is a map.
  /// The OrtMapTypeInfo has additional information about the map's key type and value type.
  ///
  /// This is used by WinML to support model reflection APIs.
  ///
  /// \param[out] type_info
  /// \param[out] out A pointer to the ::OrtMapTypeInfo. Do not free this value. If type_info
  /// does not contain a map, this value will be set to nullptr.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTypeInfo> type_info,
        ffi.Pointer<ffi.Pointer<OrtMapTypeInfo>> out,
      )
    >
  >
  CastTypeInfoToMapTypeInfo;

  /// \brief Cast ::OrtTypeInfo to an ::OrtSequenceTypeInfo
  ///
  /// This api augments ::OrtTypeInfo to return an ::OrtSequenceTypeInfo when the type is a sequence.
  /// The ::OrtSequenceTypeInfo has additional information about the sequence's element type.
  ///
  /// This is used by WinML to support model reflection APIs.
  ///
  /// \param[in] type_info
  /// \param[out] out A pointer to the OrtSequenceTypeInfo. Do not free this value. If type_info
  /// doesn not contain a sequence, this value will be set to nullptr.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTypeInfo> type_info,
        ffi.Pointer<ffi.Pointer<OrtSequenceTypeInfo>> out,
      )
    >
  >
  CastTypeInfoToSequenceTypeInfo;

  /// \brief Get key type from an ::OrtMapTypeInfo
  ///
  /// Key types are restricted to being scalar types.
  ///
  /// This is used by WinML to support model reflection APIs.
  ///
  /// \param[in] map_type_info
  /// \param[out] out
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMapTypeInfo> map_type_info,
        ffi.Pointer<ffi.UnsignedInt> out,
      )
    >
  >
  GetMapKeyType;

  /// \brief Get the value type from an ::OrtMapTypeInfo
  ///
  /// \param[in] map_type_info
  /// \param[out] type_info A copy of the OrtTypeInfo for the map value type.
  /// The user must free this value with ReleaseTypeInfo.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMapTypeInfo> map_type_info,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  GetMapValueType;

  /// \brief Get element type from an ::OrtSequenceTypeInfo
  ///
  /// This is used by WinML to support model reflection APIs.
  ///
  /// \param[in] sequence_type_info
  /// \param[out] type_info A copy of the OrtTypeInfo for the sequence element type.
  /// The user must free this value with ReleaseTypeInfo.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSequenceTypeInfo> sequence_type_info,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  GetSequenceElementType;

  /// @}
  /// \name OrtMapTypeInfo
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtMapTypeInfo> input)>
  >
  ReleaseMapTypeInfo;

  /// @}
  /// \name OrtSequenceTypeInfo
  /// @{
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtSequenceTypeInfo> input)
    >
  >
  ReleaseSequenceTypeInfo;

  /// \brief End profiling and return filename of the profile data
  ///
  /// Profiling is turned on through OrtApi::EnableProfiling
  ///
  /// \param[in] session
  /// \param[in] allocator
  /// \param[out] out Null terminated string of the filename, allocated using `allocator`. Must be freed using `allocator`
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> out,
      )
    >
  >
  SessionEndProfiling;

  /// \brief Get ::OrtModelMetadata from an ::OrtSession
  ///
  /// \param[in] session
  /// \param[out] out Newly created ::OrtModelMetadata. Must be freed using OrtApi::ReleaseModelMetadata
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Pointer<OrtModelMetadata>> out,
      )
    >
  >
  SessionGetModelMetadata;

  /// \brief Get `producer name` from an ::OrtModelMetadata
  ///
  /// \param[in] model_metadata
  /// \param[in] allocator
  /// \param[out] value Set to a null terminated string allocated using `allocator`. Must be freed using `allocator`
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelMetadata> model_metadata,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  ModelMetadataGetProducerName;

  /// \brief Get `graph name` from an ::OrtModelMetadata
  ///
  /// \param[in] model_metadata
  /// \param[in] allocator
  /// \param[out] value Set to a null terminated string allocated using `allocator`. Must be freed using `allocator`
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelMetadata> model_metadata,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  ModelMetadataGetGraphName;

  /// \brief Get `domain` from an ::OrtModelMetadata
  ///
  /// \param[in] model_metadata
  /// \param[in] allocator
  /// \param[out] value Set to a null terminated string allocated using `allocator`. Must be freed using `allocator`
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelMetadata> model_metadata,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  ModelMetadataGetDomain;

  /// \brief Get `description` from an ::OrtModelMetadata
  ///
  /// \param[in] model_metadata
  /// \param[in] allocator
  /// \param[out] value Set to a null terminated string allocated using `allocator`. Must be freed using `allocator`
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelMetadata> model_metadata,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  ModelMetadataGetDescription;

  /// \brief Return data for a key in the custom metadata map in an ::OrtModelMetadata
  ///
  /// \param[in] model_metadata
  /// \param[in] allocator
  /// \param[in] key Null terminated string
  /// \param[out] value Set to a null terminated string allocated using `allocator`. Must be freed using `allocator`
  /// `value` will be set to nullptr if the given key is not found in the custom metadata map.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelMetadata> model_metadata,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Char> key,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  ModelMetadataLookupCustomMetadataMap;

  /// \brief Get version number from an ::OrtModelMetadata
  ///
  /// \param[in] model_metadata
  /// \param[out] value Set to the version number
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelMetadata> model_metadata,
        ffi.Pointer<ffi.Int64> value,
      )
    >
  >
  ModelMetadataGetVersion;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtModelMetadata> input)>
  >
  ReleaseModelMetadata;

  /// \brief Create an OrtEnv
  ///
  /// Create an environment with global threadpools that will be shared across sessions.
  /// Use this in conjunction with OrtApi::DisablePerSessionThreads or else the session will use
  /// its own thread pools.
  ///
  /// \param[in] log_severity_level The log severity level.
  /// \param[in] logid The log identifier.
  /// \param[in] tp_options
  /// \param[out] out Returned newly created OrtEnv. Must be freed with OrtApi::ReleaseEnv
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.UnsignedInt log_severity_level,
        ffi.Pointer<ffi.Char> logid,
        ffi.Pointer<OrtThreadingOptions> tp_options,
        ffi.Pointer<ffi.Pointer<OrtEnv>> out,
      )
    >
  >
  CreateEnvWithGlobalThreadPools;

  /// \brief Use global thread pool on a session
  ///
  /// Disable using per session thread pool and use the shared global threadpool.
  /// This should be used in conjunction with OrtApi::CreateEnvWithGlobalThreadPools.
  ///
  /// \param[in] options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions> options)
    >
  >
  DisablePerSessionThreads;

  /// \brief Create an ::OrtThreadingOptions
  ///
  /// \param[out] out Newly created ::OrtThreadingOptions. Must be freed with OrtApi::ReleaseThreadingOptions
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<ffi.Pointer<OrtThreadingOptions>> out)
    >
  >
  CreateThreadingOptions;

  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtThreadingOptions> input)
    >
  >
  ReleaseThreadingOptions;

  /// \param[in] model_metadata
  /// \param[in] allocator
  /// \param[out] keys Array of null terminated strings (array count = num_keys) allocated using `allocator`.
  /// The strings and the pointer array must be freed using `allocator`
  /// `keys` will be set to nullptr if the custom metadata map is empty.
  /// \param[out] num_keys Set to the number of elements in the `keys` array
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelMetadata> model_metadata,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Pointer<ffi.Char>>> keys,
        ffi.Pointer<ffi.Int64> num_keys,
      )
    >
  >
  ModelMetadataGetCustomMetadataMapKeys;

  /// Override symbolic dimensions (by specific name strings) with actual values
  /// if known at session initialization time to enable optimizations that can
  /// take advantage of fixed values (such as memory planning, etc)
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> dim_name,
        ffi.Int64 dim_value,
      )
    >
  >
  AddFreeDimensionOverrideByName;

  /// \brief Get the names of all available providers
  ///
  /// \note The providers in the list are not guaranteed to be usable. They may fail to load due to missing system dependencies.
  /// For example, if the CUDA/cuDNN libraries are not installed, the CUDA provider will report an error when it is added to the session options.
  ///
  /// \param[out] out_ptr Set to a pointer to an array of null terminated strings of the available providers. The entries and the
  /// array itself must be freed using OrtApi::ReleaseAvailableProviders
  /// \param[out] provider_length Set to the number of entries in the `out_ptr` array
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<ffi.Pointer<ffi.Char>>> out_ptr,
        ffi.Pointer<ffi.Int> provider_length,
      )
    >
  >
  GetAvailableProviders;

  /// \brief Release data from OrtApi::GetAvailableProviders. This API will never fail
  /// so you can rely on it in a noexcept code.
  ///
  /// \param[in] ptr The `out_ptr` result from OrtApi::GetAvailableProviders.
  /// \param[in] providers_length The `provider_length` result from OrtApi::GetAvailableProviders
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<ffi.Char>> ptr,
        ffi.Int providers_length,
      )
    >
  >
  ReleaseAvailableProviders;

  /// \brief Get the length of a single string in a string tensor
  ///
  /// \param[in] value A string tensor
  /// \param[in] index Index of the string in the tensor
  /// \param[out] out Set to number of bytes of the string element
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Size index,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  GetStringTensorElementLength;

  /// \brief Get a single string from a string tensor
  ///
  /// \param[in] value A string tensor
  /// \param[in] s_len Number of bytes in the `s` buffer. Must match the value returned by OrtApi::GetStringTensorElementLength.
  /// \param[in] index Index of the string in the tensor
  /// \param[out] s The string element contents in UTF-8 encoding. The string is NOT null-terminated.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Size s_len,
        ffi.Size index,
        ffi.Pointer<ffi.Void> s,
      )
    >
  >
  GetStringTensorElement;

  /// \brief Set a single string in a string tensor
  ///
  /// \param[in] value A string tensor
  /// \param[in] s A null terminated UTF-8 encoded string
  /// \param[in] index Index of the string in the tensor to set
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Char> s,
        ffi.Size index,
      )
    >
  >
  FillStringTensorElement;

  /// \brief Set a session configuration entry as a pair of strings
  ///
  /// If a configuration with same key exists, this will overwrite the configuration with the given config_value.
  ///
  /// The config_key and the format of config_value are defined in onnxruntime_session_options_config_keys.h
  ///
  /// \param[in] options
  /// \param[in] config_key A null terminated string representation of the config key
  /// \param[in] config_value A null terminated string representation of the config value
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> config_key,
        ffi.Pointer<ffi.Char> config_value,
      )
    >
  >
  AddSessionConfigEntry;

  /// \brief Create an allocator for an ::OrtSession following an ::OrtMemoryInfo
  ///
  /// The allocator wraps the internal allocator from the OrtSession and becomes invalid when the session does.
  ///
  /// \param[in] session
  /// \param[in] mem_info valid ::OrtMemoryInfo instance
  /// \param[out] out Newly created ::OrtAllocator. Must be freed with OrtApi::ReleaseAllocator
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<OrtMemoryInfo> mem_info,
        ffi.Pointer<ffi.Pointer<OrtAllocator>> out,
      )
    >
  >
  CreateAllocator;

  /// \brief Release an ::OrtAllocator obtained from OrtApi::CreateAllocator
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtAllocator> input)>
  >
  ReleaseAllocator;

  /// \brief Run a model using Io Bindings for the inputs & outputs
  ///
  /// \see OrtApi::Run
  ///
  /// \param[in] session
  /// \param[in] run_options
  /// \param[in] binding_ptr
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<OrtRunOptions> run_options,
        ffi.Pointer<OrtIoBinding> binding_ptr,
      )
    >
  >
  RunWithBinding;

  /// \brief Create an ::OrtIoBinding instance
  ///
  /// An IoBinding object allows one to bind pre-allocated ::OrtValue%s to input names.
  /// Thus if you want to use a raw on device buffer as input or output you can avoid
  /// extra copy during runtime.
  ///
  /// \param[in] session
  /// \param[out] out Newly created ::OrtIoBinding. Must be freed with OrtApi::ReleaseIoBinding
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Pointer<OrtIoBinding>> out,
      )
    >
  >
  CreateIoBinding;

  /// \brief Release an ::OrtIoBinding obtained from OrtApi::CreateIoBinding
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtIoBinding> input)>
  >
  ReleaseIoBinding;

  /// \brief Bind an ::OrtValue to an ::OrtIoBinding input
  ///
  /// When using OrtApi::RunWithBinding this value is used for the named input
  ///
  /// \param[in] binding_ptr
  /// \param[in] name Name for the model input
  /// \param[in] val_ptr ::OrtValue of Tensor type.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtIoBinding> binding_ptr,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<OrtValue> val_ptr,
      )
    >
  >
  BindInput;

  /// \brief Bind an ::OrtValue to an ::OrtIoBinding output
  ///
  /// When using OrtApi::RunWithBinding this value is used for the named output
  ///
  /// \param[in] binding_ptr
  /// \param[in] name Null terminated string of the model output name
  /// \param[in] val_ptr ::OrtValue of Tensor type.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtIoBinding> binding_ptr,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<OrtValue> val_ptr,
      )
    >
  >
  BindOutput;

  /// \brief Bind an ::OrtIoBinding output to a device
  ///
  /// Binds the ::OrtValue to a device which is specified by ::OrtMemoryInfo.
  /// You can either create an instance of ::OrtMemoryInfo with a device id or obtain one from the allocator that you have created/are using
  /// This is useful when one or more outputs have dynamic shapes and, it is hard to pre-allocate and bind a chunk of
  /// memory within ::OrtValue ahead of time.
  ///
  /// \see OrtApi::RunWithBinding
  ///
  /// \param[in] binding_ptr
  /// \param[in] name Null terminated string of the device name
  /// \param[in] mem_info_ptr
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtIoBinding> binding_ptr,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<OrtMemoryInfo> mem_info_ptr,
      )
    >
  >
  BindOutputToDevice;

  /// \brief Get the names of an ::OrtIoBinding's outputs
  ///
  /// Returns the names of the outputs in the order they were bound. This is useful after running the model
  /// with bound outputs because the returned names are in order in which output ::OrtValue are returned. This is useful if
  /// the order of outputs and their names is not known.
  ///
  /// \param[in] binding_ptr
  /// \param[in] allocator Allocator used to allocate continuous buffers for output strings and lengths.
  /// \param[out] buffer Returns an array of non-null terminated UTF-8 strings. The number of strings stored is returned in the count parameter.
  /// This buffer is allocated using `allocator` and must be freed using it.
  /// \param[out] lengths Returns an array of `count` lengths of the strings returned in `buffer`
  /// This buffer is allocated using `allocator` and must be freed using it.
  /// \param[out] count Number of strings returned. If `binding_ptr` has no bound outputs, zero is returned,
  /// no memory allocation is performed and buffer and lengths are set to nullptr.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtIoBinding> binding_ptr,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> buffer,
        ffi.Pointer<ffi.Pointer<ffi.Size>> lengths,
        ffi.Pointer<ffi.Size> count,
      )
    >
  >
  GetBoundOutputNames;

  /// \brief Get the output ::OrtValue objects from an ::OrtIoBinding
  ///
  /// Returns an array of pointers to individually allocated ::OrtValue%s that contain results of a model execution with OrtApi::RunWithBinding
  /// The array contains the same number of ::OrtValue%s and they are in the same order as they were bound with OrtApi::BindOutput
  /// or OrtApi::BindOutputToDevice.
  ///
  /// The returned ::OrtValue%s must be released using OrtApi::ReleaseValue after they are no longer needed.
  /// The array is allocated using the specified instance of the allocator and must be freed using the same allocator after
  /// all the ::OrtValue%s contained therein are individually released.
  ///
  /// \param[in] binding_ptr
  /// \param[in] allocator Allocator used to allocate output array
  /// \param[out] output Set to the allocated array of allocated ::OrtValue outputs. Set to nullptr if there are 0 outputs.
  /// \param[out] output_count Set to number of ::OrtValue%s returned
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtIoBinding> binding_ptr,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Pointer<OrtValue>>> output,
        ffi.Pointer<ffi.Size> output_count,
      )
    >
  >
  GetBoundOutputValues;

  /// \brief Clears any previously set Inputs for an ::OrtIoBinding
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtIoBinding> binding_ptr)>
  >
  ClearBoundInputs;

  /// \brief Clears any previously set Outputs for an ::OrtIoBinding
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtIoBinding> binding_ptr)>
  >
  ClearBoundOutputs;

  /// \brief Direct memory access to a specified tensor element
  ///
  /// For example, given a tensor with shape of [3,224,224], a pointer to the element at location [2,150,128] can be retrieved
  ///
  /// This function only works for numeric type tensors (No strings, etc).
  /// This is a no-copy method whose returned pointer is valid until the passed in ::OrtValue is free'd.
  ///
  /// \param[in] value
  /// \param[in] location_values Pointer to an array of index values that specify an element's location relative to its shape
  /// \param[in] location_values_count Number of elements in location_values. Must match the number of elements in the tensor's shape.
  /// \param[out] out Set to a pointer to the element specified
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Int64> location_values,
        ffi.Size location_values_count,
        ffi.Pointer<ffi.Pointer<ffi.Void>> out,
      )
    >
  >
  TensorAt;

  /// \brief Create an allocator and register it with the ::OrtEnv
  ///
  /// Enables sharing the allocator between multiple sessions that use the same env instance.
  /// Lifetime of the created allocator will be valid for the duration of the environment.
  /// Returns an error if an allocator with the same ::OrtMemoryInfo is already registered.
  ///
  /// See https://onnxruntime.ai/docs/get-started/with-c.html for details.
  ///
  /// \param[in] env ::OrtEnv instance
  /// \param[in] mem_info
  /// \param[in] arena_cfg Pass nullptr for defaults
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtMemoryInfo> mem_info,
        ffi.Pointer<OrtArenaCfg> arena_cfg,
      )
    >
  >
  CreateAndRegisterAllocator;

  /// \brief Set language projection
  ///
  /// Set the language projection for collecting telemetry data when Env is created.
  ///
  /// The default is ORT_PROJECTION_C, which means it will classify the language not in the list to C also.
  ///
  /// \param[in] ort_env
  /// \param[in] projection
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> ort_env,
        ffi.UnsignedInt projection,
      )
    >
  >
  SetLanguageProjection;

  /// \brief Return the time that profiling was started
  ///
  /// \note The timer precision varies per platform. On Windows and MacOS, the precision will be ~100ns
  ///
  /// \param[in] session
  /// \param[out] out nanoseconds of profiling's start time
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Uint64> out,
      )
    >
  >
  SessionGetProfilingStartTimeNs;

  /// \brief Set global intra-op thread count
  ///
  /// This configures the global thread pool options to be used in the call to OrtApi::CreateEnvWithGlobalThreadPools
  ///
  /// \param[in] tp_options
  /// \param[in] intra_op_num_threads Number of threads, special values:<br>
  /// 0 = Use default thread count<br>
  /// 1 = The invoking thread will be used; no threads will be created in the thread pool.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtThreadingOptions> tp_options,
        ffi.Int intra_op_num_threads,
      )
    >
  >
  SetGlobalIntraOpNumThreads;

  /// \brief Set global inter-op thread count
  ///
  /// This configures the global thread pool options to be used in the call to OrtApi::CreateEnvWithGlobalThreadPools
  ///
  /// \param[in] tp_options
  /// \param[in] inter_op_num_threads Number of threads, special values:<br>
  /// 0 = Use default thread count<br>
  /// 1 = The invoking thread will be used; no threads will be created in the thread pool.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtThreadingOptions> tp_options,
        ffi.Int inter_op_num_threads,
      )
    >
  >
  SetGlobalInterOpNumThreads;

  /// \brief Set global spin control options
  ///
  /// This will configure the global thread pool options to be used in the call to OrtApi::CreateEnvWithGlobalThreadPools.
  /// Allow spinning of thread pools when their queues are empty. This will set the value for both
  /// inter_op and intra_op threadpools.
  ///
  /// \param[in] tp_options
  /// \param[in] allow_spinning Valid values are 0 or 1.<br>
  /// 0 = It won't spin (recommended if CPU usage is high)<br>
  /// 1 = Threadpool will spin to wait for queue to become non-empty
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtThreadingOptions> tp_options,
        ffi.Int allow_spinning,
      )
    >
  >
  SetGlobalSpinControl;

  /// \brief Add a pre-allocated initializer to a session
  ///
  /// If a model contains an initializer with a name that is same as the name passed to this call,
  /// ORT will use this initializer instance instead of deserializing one from the model file. This
  /// is useful when you want to share the same initializer across sessions.
  ///
  /// \param[in] options
  /// \param[in] name Null terminated string of the initializer name
  /// \param[in] val ::OrtValue containing the initializer. Its lifetime and the underlying initializer buffer must be
  /// managed by the user (created using the OrtApi::CreateTensorWithDataAsOrtValue) and it must outlive the session object
  /// to which it is added.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<OrtValue> val,
      )
    >
  >
  AddInitializer;

  /// Create a custom environment with global threadpools and logger that will be shared across sessions.
  /// Use this in conjunction with OrtApi::DisablePerSessionThreads or else the session will use
  /// its own thread pools.
  ///
  /// \param[in] logging_function A pointer to a logging function.
  /// \param[in] logger_param A pointer to arbitrary data passed as the ::OrtLoggingFunction `param` parameter to
  /// `logging_function`.
  /// \param[in] log_severity_level The log severity level.
  /// \param[in] logid The log identifier.
  /// \param[in] tp_options
  /// \param[out] out Newly created OrtEnv. Must be freed with OrtApi::ReleaseEnv
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        OrtLoggingFunction logging_function,
        ffi.Pointer<ffi.Void> logger_param,
        ffi.UnsignedInt log_severity_level,
        ffi.Pointer<ffi.Char> logid,
        ffi.Pointer<OrtThreadingOptions> tp_options,
        ffi.Pointer<ffi.Pointer<OrtEnv>> out,
      )
    >
  >
  CreateEnvWithCustomLoggerAndGlobalThreadPools;

  /// \brief Append CUDA provider to session options
  ///
  /// If CUDA is not available (due to a non CUDA enabled build, or if CUDA is not installed on the system), this function will return failure.
  ///
  /// \param[in] options
  /// \param[in] cuda_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtCUDAProviderOptions> cuda_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_CUDA;

  /// \brief Append ROCM execution provider to the session options
  ///
  /// If ROCM is not available (due to a non ROCM enabled build, or if ROCM is not installed on the system), this function will return failure.
  ///
  /// \param[in] options
  /// \param[in] rocm_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtROCMProviderOptions> rocm_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_ROCM;

  /// \brief Append OpenVINO execution provider to the session options
  ///
  /// If OpenVINO is not available (due to a non OpenVINO enabled build, or if OpenVINO is not installed on the system), this function will fail.
  ///
  /// \param[in] options
  /// \param[in] provider_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtOpenVINOProviderOptions> provider_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_OpenVINO;

  /// \brief Set threading flush-to-zero and denormal-as-zero
  ///
  /// Sets global thread pool options to be used in the call to OrtApi::CreateEnvWithGlobalThreadPools.
  /// Flush-to-zero and denormal-as-zero are applied to threads in both intra and inter global thread pool.
  /// \note This option is not needed if the models used have no denormals. Having no denormals is recommended as this option may hurt model accuracy.
  ///
  /// \param[in] tp_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtThreadingOptions> tp_options)
    >
  >
  SetGlobalDenormalAsZero;

  /// \deprecated Use OrtApi::CreateArenaCfgV2
  ///
  /// This will create the configuration of an arena that can eventually be used to define an arena based allocator's behavior
  ///
  /// \param[in] max_mem Use 0 to allow ORT to choose the default
  /// \param[in] arena_extend_strategy Use -1 to allow ORT to choose the default, 0 = kNextPowerOfTwo, 1 = kSameAsRequested
  /// \param[in] initial_chunk_size_bytes Use -1 to allow ORT to choose the default
  /// \param[in] max_dead_bytes_per_chunk Use -1 to allow ORT to choose the default
  /// \param[in] out A pointer to an OrtArenaCfg instance
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Size max_mem,
        ffi.Int arena_extend_strategy,
        ffi.Int initial_chunk_size_bytes,
        ffi.Int max_dead_bytes_per_chunk,
        ffi.Pointer<ffi.Pointer<OrtArenaCfg>> out,
      )
    >
  >
  CreateArenaCfg;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtArenaCfg> input)>
  >
  ReleaseArenaCfg;

  /// Use this to obtain the description of the graph present in the model
  /// (doc_string field of the GraphProto message within the ModelProto message).
  /// If it doesn't exist, an empty string will be returned.
  ///
  /// \param[in] model_metadata An instance of ::OrtModelMetadata
  /// \param[in] allocator Allocator used to allocate the string that will be returned back
  /// \param[out] value Set to a null terminated string allocated using `allocator`.  The caller is responsible for freeing it using `allocator`
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtModelMetadata> model_metadata,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> value,
      )
    >
  >
  ModelMetadataGetGraphDescription;

  /// \brief Append TensorRT provider to session options
  ///
  /// If TensorRT is not available (due to a non TensorRT enabled build, or if TensorRT is not installed on the system), this function will return failure.
  ///
  /// \param[in] options
  /// \param[in] tensorrt_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtTensorRTProviderOptions> tensorrt_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_TensorRT;

  /// \brief Set current GPU device ID
  ///
  /// Set the current device id of the GPU execution provider (CUDA/tensorrt/rocm). The device id should be less
  /// than the total number of devices available. This is only useful when multiple-GPUs are installed and it is
  /// required to restrict execution to a single GPU.
  ///
  /// \param[in] device_id
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<OrtStatusPtr Function(ffi.Int device_id)>
  >
  SetCurrentGpuDeviceId;

  /// \brief Get current GPU device ID
  ///
  /// Get the current device id of the GPU execution provider (CUDA/tensorrt/rocm).
  ///
  /// \see OrtApi::SetCurrentGpuDeviceId
  ///
  /// \param[out] device_id
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<OrtStatusPtr Function(ffi.Pointer<ffi.Int> device_id)>
  >
  GetCurrentGpuDeviceId;

  /// \brief Fetch an array of int64_t values stored as an attribute in the graph node
  ///
  ///
  /// If `out` is nullptr, the value of `size` is set to the true size of the attribute
  /// array's size, and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the actual attribute array's size,
  /// the value of `size` is set to the true size of the attribute array's size,
  /// the provided memory is filled with the attribute's contents,
  /// and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual attribute array's size and `out`
  /// is not nullptr, the value of `size` is set to the true size of the attribute array's size
  /// and a failure status is returned.)
  ///
  /// \param[in] info instance
  /// \param[in] name name of the attribute to be parsed
  /// \param[out] out pointer to memory where the attribute's contents are to be stored
  /// \param[in, out] size actual size of attribute array
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<ffi.Float> out,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  KernelInfoGetAttributeArray_float;

  /// \brief Fetch an array of int64_t values stored as an attribute in the graph node
  ///
  /// If `out` is nullptr, the value of `size` is set to the true size of the attribute
  /// array's size, and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the actual attribute array's size,
  /// the value of `size` is set to the true size of the attribute array's size,
  /// the provided memory is filled with the attribute's contents,
  /// and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual attribute array's size and `out`
  /// is not nullptr, the value of `size` is set to the true size of the attribute array's size
  /// and a failure status is returned.)
  ///
  /// \param[in] info instance
  /// \param[in] name name of the attribute to be parsed
  /// \param[out] out pointer to memory where the attribute's contents are to be stored
  /// \param[in, out] size actual size of attribute array
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<ffi.Int64> out,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  KernelInfoGetAttributeArray_int64;

  /// \brief Create an ::OrtArenaCfg
  ///
  /// Create the configuration of an arena that can eventually be used to define an arena based allocator's behavior.
  ///
  /// Supported keys are (See https://onnxruntime.ai/docs/get-started/with-c.html for details on what the
  /// following parameters mean and how to choose these values.):
  /// "max_mem": Maximum memory that can be allocated by the arena based allocator.
  /// Use 0 for ORT to pick the best value. Default is 0.
  /// "arena_extend_strategy": 0 = kNextPowerOfTwo, 1 = kSameAsRequested.
  /// Use -1 to allow ORT to choose the default.
  /// "initial_chunk_size_bytes": (Possible) Size of the first allocation in the arena.
  /// Only relevant if arena strategy is `kNextPowerOfTwo`. Use -1 to allow ORT to choose the default.
  /// Ultimately, the first allocation size is determined by the allocation memory request.
  /// "max_dead_bytes_per_chunk": Threshold of unused memory in an allocated chunk of arena memory after
  /// crossing which the current chunk is chunked into 2.
  /// "initial_growth_chunk_size_bytes": (Possible) Size of the second allocation in the arena.
  /// Only relevant if arena strategy is `kNextPowerOfTwo`. Use -1 to allow ORT to choose the default.
  /// "max_power_of_two_extend_bytes": The maximum extend size if arena strategy is `kNextPowerOfTwo`.
  /// It is not an allocation limit, it is only a limit for extension when requested byte is less than the limit.
  /// When requested bytes is more than the limit, allocator will still return as requested.
  /// Use -1 to allow ORT to choose the default 1GB for max_power_of_two_extend_bytes.
  /// Ultimately, the allocation size is determined by the allocation memory request.
  /// Further allocation sizes are governed by the arena extend strategy.
  ///
  /// \param[in] arena_config_keys Keys to configure the arena
  /// \param[in] arena_config_values Values to configure the arena
  /// \param[in] num_keys Number of keys in `arena_config_keys` and `arena_config_values`
  /// \param[out] out Newly created ::OrtArenaCfg. Must be freed with OrtApi::ReleaseArenaCfg
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<ffi.Char>> arena_config_keys,
        ffi.Pointer<ffi.Size> arena_config_values,
        ffi.Size num_keys,
        ffi.Pointer<ffi.Pointer<OrtArenaCfg>> out,
      )
    >
  >
  CreateArenaCfgV2;

  /// \brief Set a single run configuration entry as a pair of strings
  ///
  /// If a configuration with same key exists, this will overwrite the configuration with the given config_value
  ///
  /// The config_key and the format of config_value are defined in onnxruntime_run_options_config_keys.h
  ///
  /// \param[in] options
  /// \param[in] config_key A null terminated string representation of the config key
  /// \param[in] config_value  A null terminated string representation of the config value
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Pointer<ffi.Char> config_key,
        ffi.Pointer<ffi.Char> config_value,
      )
    >
  >
  AddRunConfigEntry;

  /// \brief Create an ::OrtPrepackedWeightsContainer
  ///
  /// This container will hold pre-packed buffers of shared initializers for sharing between sessions
  /// (i.e.) if there are shared initializers that can be shared between sessions, the pre-packed buffers
  /// of these (if any) may possibly be shared to provide memory footprint savings. Pass this container
  /// to sessions that you would like to share pre-packed buffers of shared initializers at session
  /// creation time.
  ///
  /// \param[out] out Newly created ::OrtPrepackedWeightsContainer. Must be freed with OrtApi::ReleasePrepackedWeightsContainer
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtPrepackedWeightsContainer>> out,
      )
    >
  >
  CreatePrepackedWeightsContainer;

  /// \brief Release OrtPrepackedWeightsContainer instance
  ///
  /// \note instance must not be released until the sessions using it are released
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtPrepackedWeightsContainer> input)
    >
  >
  ReleasePrepackedWeightsContainer;

  /// \brief Create session with prepacked weights container
  ///
  /// Same functionality offered by OrtApi::CreateSession except that a container that contains
  /// pre-packed weights' buffers is written into/read from by the created session.
  /// This is useful when used in conjunction with OrtApi::AddInitializer which injects
  /// shared initializer info into sessions. Wherever possible, the pre-packed versions of these
  /// shared initializers are cached in this container so that multiple sessions can just re-use
  /// these instead of duplicating these in memory.
  ///
  /// \param[in] env OrtEnv instance instance
  /// \param[in] model_path Null terminated string of the path (wchar on Windows, char otherwise)
  /// \param[in] options
  /// \param[in] prepacked_weights_container
  /// \param[out] out Newly created ::OrtSession. Must be freed with OrtApi::ReleaseSession
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Char> model_path,
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtPrepackedWeightsContainer> prepacked_weights_container,
        ffi.Pointer<ffi.Pointer<OrtSession>> out,
      )
    >
  >
  CreateSessionWithPrepackedWeightsContainer;

  /// \brief Create session from memory with prepacked weights container
  ///
  /// Same functionality offered by OrtApi::CreateSessionFromArray except that a container that contains
  /// pre-packed weights' buffers is written into/read from by the created session.
  /// This is useful when used in conjunction with OrtApi::AddInitializer which injects
  /// shared initializer info into sessions. Wherever possible, the pre-packed versions of these
  /// shared initializers are cached in this container so that multiple sessions can just re-use
  /// these instead of duplicating these in memory.
  ///
  /// \param[in] env
  /// \param[in] model_data Array of bytes holding the model
  /// \param[in] model_data_length Number of bytes in `model_data_model`
  /// \param[in] options
  /// \param[in] prepacked_weights_container
  /// \param[out] out Newly created ::OrtSession. Must be freed with OrtApi::ReleaseSession
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Void> model_data,
        ffi.Size model_data_length,
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtPrepackedWeightsContainer> prepacked_weights_container,
        ffi.Pointer<ffi.Pointer<OrtSession>> out,
      )
    >
  >
  CreateSessionFromArrayWithPrepackedWeightsContainer;

  /// \brief Append TensorRT execution provider to the session options
  ///
  /// If TensorRT is not available (due to a non TensorRT enabled build), this function will return failure.
  ///
  /// This is slightly different from OrtApi::SessionOptionsAppendExecutionProvider_TensorRT, it takes an
  /// ::OrtTensorRTProviderOptions which is publicly defined. This takes an opaque ::OrtTensorRTProviderOptionsV2
  /// which must be created with OrtApi::CreateTensorRTProviderOptions.
  ///
  /// For OrtApi::SessionOptionsAppendExecutionProvider_TensorRT, the user needs to instantiate ::OrtTensorRTProviderOptions
  /// as well as allocate/release buffers for some members of ::OrtTensorRTProviderOptions.
  /// Here, OrtApi::CreateTensorRTProviderOptions and Ortapi::ReleaseTensorRTProviderOptions will do the memory management for you.
  ///
  /// \param[in] options
  /// \param[in] tensorrt_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtTensorRTProviderOptionsV2> tensorrt_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_TensorRT_V2;

  /// \brief Create an OrtTensorRTProviderOptionsV2
  ///
  /// \param[out] out Newly created ::OrtTensorRTProviderOptionsV2. Must be released with OrtApi::ReleaseTensorRTProviderOptions
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtTensorRTProviderOptionsV2>> out,
      )
    >
  >
  CreateTensorRTProviderOptions;

  /// \brief Set options in a TensorRT Execution Provider.
  ///
  /// Please refer to https://onnxruntime.ai/docs/execution-providers/TensorRT-ExecutionProvider.html#cc
  /// to know the available keys and values. Key should be in null terminated string format of the member of ::OrtTensorRTProviderOptionsV2
  /// and value should be its related range. Recreates the options and only sets the supplied values.
  ///
  /// For example, key="trt_max_workspace_size" and value="2147483648"
  ///
  /// \param[in] tensorrt_options
  /// \param[in] provider_options_keys Array of UTF-8 null-terminated string for provider options keys
  /// \param[in] provider_options_values Array of UTF-8 null-terminated string for provider options values
  /// \param[in] num_keys Number of elements in the `provider_option_keys` and `provider_options_values` arrays
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorRTProviderOptionsV2> tensorrt_options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  UpdateTensorRTProviderOptions;

  /// \brief Get serialized TensorRT provider options string.
  ///
  /// For example, "trt_max_workspace_size=2147483648;trt_max_partition_iterations=10;trt_int8_enable=1;......"
  ///
  /// \param tensorrt_options - OrtTensorRTProviderOptionsV2 instance
  /// \param allocator - a ptr to an instance of OrtAllocator obtained with OrtApi::CreateAllocator or OrtApi::GetAllocatorWithDefaultOptions
  /// the specified allocator will be used to allocate continuous buffers for output strings and lengths.
  /// \param ptr - is a UTF-8 null terminated string allocated using 'allocator'. The caller is responsible for using the same allocator to free it.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorRTProviderOptionsV2> tensorrt_options,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> ptr,
      )
    >
  >
  GetTensorRTProviderOptionsAsString;

  /// \brief Release an ::OrtTensorRTProviderOptionsV2
  ///
  /// \note This is an exception in the naming convention of other Release* functions, as the name of the method does not have the V2 suffix, but the type does
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtTensorRTProviderOptionsV2> input)
    >
  >
  ReleaseTensorRTProviderOptions;

  /// \brief Enable custom operators
  ///
  /// See onnxruntime-extensions: https://github.com/microsoft/onnxruntime-extensions.git
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtSessionOptions> options)
    >
  >
  EnableOrtCustomOps;

  /// \brief Register a custom allocator
  ///
  /// Enables sharing between multiple sessions that use the same env instance.
  /// Returns an error if an allocator with the same ::OrtMemoryInfo is already registered.
  ///
  /// The behavior of this is exactly the same as OrtApi::CreateAndRegisterAllocator except
  /// instead of ORT creating an allocator based on provided info, in this case
  /// ORT uses the user-provided custom allocator.
  /// See https://onnxruntime.ai/docs/get-started/with-c.html for details.
  ///
  /// \param[in] env
  /// \param[in] allocator User provided allocator
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtAllocator> allocator,
      )
    >
  >
  RegisterAllocator;

  /// \brief Unregister a custom allocator
  ///
  /// It is an error if you provide an ::OrtMemoryInfo not corresponding to any
  /// registered allocators for sharing.
  ///
  /// \param[in] env
  /// \param[in] mem_info
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtMemoryInfo> mem_info,
      )
    >
  >
  UnregisterAllocator;

  /// \brief Sets *out to 1 iff an ::OrtValue is a SparseTensor, and 0 otherwise
  ///
  /// \param[in] value existing ::OrtValue
  /// \param[out] out unless an error occurs, contains 1 iff the value contains an instance
  /// of sparse tensor or 0 otherwise.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Int> out,
      )
    >
  >
  IsSparseTensor;

  /// \brief Create an ::OrtValue with a sparse tensor that is empty.
  ///
  /// Use FillSparseTensor<Format>() functions to populate sparse tensor with non-zero values and
  /// format specific indices data.
  /// Use ReleaseValue to destroy the sparse tensor, this will also release the buffer inside the output value
  /// if any was allocated.
  /// \param[in,out] allocator allocator to use when performing an allocation. Allocation will be performed
  /// by FillSparseTensor<Format>() APIs. The lifespan of the allocator instance must eclipse the lifespan
  /// this sparse tensor instance as the same allocator will be used to free memory.
  /// \param[in] dense_shape shape of the original dense tensor
  /// \param[in] dense_shape_len number of shape dimensions being passed
  /// \param[in] type must be one of TENSOR_ELEMENT_DATA_TYPE_xxxx
  /// \param[out] out Should be freed by calling ReleaseValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Int64> dense_shape,
        ffi.Size dense_shape_len,
        ffi.UnsignedInt type,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  CreateSparseTensorAsOrtValue;

  /// This fills populates an empty tensor that was created using OrtApi::CreateSparseTensorAsOrtValue.
  /// This will allocate required memory and copy the supplied NNZ values and COO indices into that memory allocation.
  /// Memory allocation is performed using the allocator that was specified with OrtApi::CreateSparseTensorAsOrtValue.
  ///
  /// \param[in,out] ort_value ::OrtValue to populate with data
  /// \param[in] data_mem_info serves to identify the location of the data to be copied. If the allocator specified
  /// at the creation time has memory info that is not the same as mem_info argument to this function a X-device copy will be performed.
  /// String data is assumed to be on CPU and will only be copied into a CPU allocated buffer.
  /// \param[in] values_shape pointer to values shape array
  /// \param[in] values_shape_len length of the values_shape
  /// \param[in] values pointer to an array of values. For strings, pass const char**.
  /// \param[in] indices_data pointer to a location of COO indices
  /// \param[in] indices_num number of COO indices
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<OrtMemoryInfo> data_mem_info,
        ffi.Pointer<ffi.Int64> values_shape,
        ffi.Size values_shape_len,
        ffi.Pointer<ffi.Void> values,
        ffi.Pointer<ffi.Int64> indices_data,
        ffi.Size indices_num,
      )
    >
  >
  FillSparseTensorCoo;

  /// This fills populates an empty tensor that was created using OrtApi::CreateSparseTensorAsOrtValue.
  /// This will allocate required memory and copy the supplied NNZ values and CSR indices into that memory allocation.
  /// Memory allocation is performed using the allocator that was specified with OrtApi::CreateSparseTensorAsOrtValue.
  ///
  /// \param[in,out] ort_value ::OrtValue to populate with data
  /// \param[in] data_mem_info serves to identify the location of the data to be copied. If the allocator specified
  /// at the creation time has memory info that is not the same as mem_info argument to this function a X-device copy will be performed.
  /// String data is assumed to be on CPU and will only be copied into a CPU allocated buffer.
  /// \param[in] values_shape pointer to values shape array
  /// \param[in] values_shape_len length of the values_shape
  /// \param[in] values - pointer to an array of values. For strings, pass const char**.
  /// \param[in] inner_indices_data pointer to a location of CSR inner indices
  /// \param[in] inner_indices_num number of CSR inner indices
  /// \param[in] outer_indices_data pointer to a location of CSR outer indices
  /// \param[in] outer_indices_num number of CSR outer indices
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<OrtMemoryInfo> data_mem_info,
        ffi.Pointer<ffi.Int64> values_shape,
        ffi.Size values_shape_len,
        ffi.Pointer<ffi.Void> values,
        ffi.Pointer<ffi.Int64> inner_indices_data,
        ffi.Size inner_indices_num,
        ffi.Pointer<ffi.Int64> outer_indices_data,
        ffi.Size outer_indices_num,
      )
    >
  >
  FillSparseTensorCsr;

  /// This fills populates an empty tensor that was created using OrtApi::CreateSparseTensorAsOrtValue.
  /// This will allocate required memory and copy the supplied NNZ values and BlockSparse indices into that memory allocation.
  /// Memory allocation is performed using the allocator that was specified with OrtApi::CreateSparseTensorAsOrtValue.
  ///
  /// \param[in,out] ort_value ::OrtValue to populate with data
  /// \param[in] data_mem_info serves to identify the location of the data to be copied. If the allocator specified
  /// at the creation time has memory info that is not the same as mem_info argument to this function a X-device copy will be performed.
  /// String data is assumed to be on CPU and will only be copied into a CPU allocated buffer.
  /// \param[in] values_shape
  /// \param[in] values_shape_len
  /// \param[in] values structure with values information
  /// \param[in] indices_shape_data pointer to a location of indices shape
  /// \param[in] indices_shape_len length of the block sparse indices shape
  /// \param[in] indices_data pointer to a location of indices data. Shape will determine the length of the indices data.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<OrtMemoryInfo> data_mem_info,
        ffi.Pointer<ffi.Int64> values_shape,
        ffi.Size values_shape_len,
        ffi.Pointer<ffi.Void> values,
        ffi.Pointer<ffi.Int64> indices_shape_data,
        ffi.Size indices_shape_len,
        ffi.Pointer<ffi.Int32> indices_data,
      )
    >
  >
  FillSparseTensorBlockSparse;

  /// Create an ::OrtValue with a sparse tensor. This is the first step.
  /// Next, use Use<Format>Indices() functions to supply sparse tensor with
  /// format specific indices data and set its sparse format to a specific enum value.
  /// This will not perform memory allocations. It will
  /// use supplied user buffer which should outlive the created sparse tensor.
  /// Use OrtApi::ReleaseValue to destroy the sparse tensor. It would not release the supplied values buffer.
  /// This function can not be used to map strings from the user allocated memory. Strings must always be copied
  /// and have UTF-8 encoding. Therefore, use OrtApi::CreateSparseTensorAsOrtValue above and then fill it with data
  /// using appropriate Make*() function.
  ///
  /// \param[in] info memory info where sparse values reside.
  /// \param[in,out] p_data pointer to a user allocated buffer with values. To create a full sparse tensor with no non-zero
  /// values, pass nullptr
  /// \param[in] dense_shape shape of the original dense tensor
  /// \param[in] dense_shape_len number of shape dimensions being passed
  /// \param[in] values_shape shape of the values data. To create a fully sparse tensor with no non-zero values,
  /// pass {0} shape.
  /// \param[in] values_shape_len number of values shape dimensions
  /// \param[in] type must be one of TENSOR_ELEMENT_DATA_TYPE_xxxx
  /// \param[out] out Should be freed by calling ReleaseValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtMemoryInfo> info,
        ffi.Pointer<ffi.Void> p_data,
        ffi.Pointer<ffi.Int64> dense_shape,
        ffi.Size dense_shape_len,
        ffi.Pointer<ffi.Int64> values_shape,
        ffi.Size values_shape_len,
        ffi.UnsignedInt type,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  CreateSparseTensorWithValuesAsOrtValue;

  /// This assigns Coo format indices to the SparseTensor that was created by
  /// OrtApi::CreateSparseTensorWithValuesAsOrtValue above. It also sets OrtSparseFormat to
  /// ORT_SPARSE_COO. This will not allocate any additional memory for data. The life span of
  /// indices_data buffer should eclipse the life span of this ::OrtValue.
  ///
  /// \param[in,out] ort_value ::OrtValue instance constructed with OrtApi::CreateSparseTensorWithValuesAsOrtValue
  /// \param[in,out] indices_data pointer to a user pre-allocated buffer or nullptr for fully sparse tensors.
  /// \param[in] indices_num  number of COO indices. Should either be 0 for fully sparse tensors, be equal
  /// to the number of nnz values specified to OrtApi::CreateSparseTensorWithValuesAsOrtValue for 1-D {nnz} indices or
  /// be twice as number of nnz values for a  2-D indices {nnz, 2}
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<ffi.Int64> indices_data,
        ffi.Size indices_num,
      )
    >
  >
  UseCooIndices;

  /// The assigns CSR format indices to the SparseTensor that was created by
  /// OrtApi::CreateSparseTensorWithValuesAsOrtValue above. It also sets OrtSparseFormat to
  /// ORT_SPARSE_CSRC. This will not allocate any additional memory for data. The life spans of
  /// inner_data and outer_data buffers should eclipse the life span of this ::OrtValue.
  ///
  /// \param[in,out] ort_value ::OrtValue instance constructed with OrtApi::CreateSparseTensorWithValuesAsOrtValue
  /// \param[in,out] inner_data pointer to a user pre-allocated buffer or nullptr for fully sparse tensors.
  /// \param[in] inner_num  number of inner CSR indices. Should either be 0 for fully sparse tensors or be equal
  /// to the number of nnz values specified to OrtApi::CreateSparseTensorWithValuesAsOrtValue.
  /// \param[in,out] outer_data pointer to user pre-allocated buffer or nullptr for fully sparse tensors.
  /// \param[in] outer_num number of CSR outer indices. Should either be 0 for fully sparse tensors or
  /// equal to rows + 1 of the dense shape.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<ffi.Int64> inner_data,
        ffi.Size inner_num,
        ffi.Pointer<ffi.Int64> outer_data,
        ffi.Size outer_num,
      )
    >
  >
  UseCsrIndices;

  /// The assigns BlockSparse format indices to the SparseTensor that was created by
  /// OrtApi::CreateSparseTensorWithValuesAsOrtValue above. It also sets OrtSparseFormat to
  /// ORT_SPARSE_BLOCK_SPARSE. This will not allocate any additional memory for data. The life span of
  /// indices_data buffer must eclipse the lifespan of this ::OrtValue.
  ///
  /// \param[in,out] ort_value OrtValue instance constructed with OrtApi::CreateSparseTensorWithValuesAsOrtValue
  /// \param[in] indices_shape pointer to indices shape. Use {0} for fully sparse tensors
  /// \param[in] indices_shape_len length of the indices shape
  /// \param[in,out] indices_data pointer to user pre-allocated buffer or nullptr for fully sparse tensors.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<ffi.Int64> indices_shape,
        ffi.Size indices_shape_len,
        ffi.Pointer<ffi.Int32> indices_data,
      )
    >
  >
  UseBlockSparseIndices;

  /// \brief Returns sparse tensor format enum iff a given ort value contains an instance of sparse tensor.
  ///
  /// \param[in] ort_value ::OrtValue that contains an instance of sparse tensor
  /// \param[out] out pointer to out parameter
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<ffi.UnsignedInt> out,
      )
    >
  >
  GetSparseTensorFormat;

  /// \brief Returns data type and shape of sparse tensor values (nnz) iff ::OrtValue contains a SparseTensor.
  ///
  /// \param[in] ort_value An ::OrtValue that contains a fully constructed sparse tensor
  /// \param[out] out Must be freed by OrtApi::ReleaseTensorTypeAndShapeInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<ffi.Pointer<OrtTensorTypeAndShapeInfo>> out,
      )
    >
  >
  GetSparseTensorValuesTypeAndShape;

  /// \brief Returns numeric data for sparse tensor values (nnz). For string values use GetStringTensor*().
  ///
  /// \param[in] ort_value an instance of ::OrtValue containing sparse tensor
  /// \param[out] out returns a pointer to values data.  Do not attempt to free this ptr.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<ffi.Pointer<ffi.Void>> out,
      )
    >
  >
  GetSparseTensorValues;

  /// \brief Returns data type, shape for the type of indices specified by indices_format.
  ///
  /// \param[in] ort_value ::OrtValue containing sparse tensor.
  /// \param[in] indices_format One of the indices formats. It is an error to request a format that the sparse
  /// tensor does not contain.
  /// \param[out] out an instance of ::OrtTensorTypeAndShapeInfo. Must be freed by OrtApi::ReleaseTensorTypeAndShapeInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.UnsignedInt indices_format,
        ffi.Pointer<ffi.Pointer<OrtTensorTypeAndShapeInfo>> out,
      )
    >
  >
  GetSparseTensorIndicesTypeShape;

  /// \brief Returns indices data for the type of the indices specified by indices_format
  ///
  /// \param[in] ort_value ::OrtValue containing sparse tensor.
  /// \param[in] indices_format One of the indices formats. It is an error to request a format that the sparse tensor does not contain.
  /// \param[out] num_indices Pointer to where the number of indices entries is returned
  /// \param[out] indices Returned pointer to the indices data. Do not free the returned pointer as it refers to internal data owned by the ::OrtValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.UnsignedInt indices_format,
        ffi.Pointer<ffi.Size> num_indices,
        ffi.Pointer<ffi.Pointer<ffi.Void>> indices,
      )
    >
  >
  GetSparseTensorIndices;

  /// \brief Sets out to 1 iff an optional type OrtValue has an element, 0 otherwise (OrtValue is None)
  /// Use this API to find if the optional type OrtValue is None or not.
  /// If the optional type OrtValue is not None, use the OrtValue just like any other OrtValue.
  /// For example, if you get an OrtValue that corresponds to Optional(tensor) and
  /// if HasValue() returns true, use it as tensor and so on.
  ///
  /// \param[in] value Input OrtValue.
  /// \param[out] out indicating if the input OrtValue contains data (1) or if it is a None (0)
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Int> out,
      )
    >
  >
  HasValue;

  /// \brief Used for custom operators, gets the GPU compute stream to use to launch the custom a GPU kernel
  /// \see ::OrtCustomOp
  /// \param[in]  context OrtKernelContext instance
  /// \param[out] out Returns pointer to a GPU compute stream that can be used to launch the custom GPU kernel.
  /// If retrieving the GPU compute stream is not relevant (GPU not enabled in the build, kernel partitioned to
  /// some other EP), then a nullptr is returned as the output param.
  /// Do not free or mutate the returned pointer as it refers to internal data owned by the underlying session.
  /// Only use it for custom kernel launching.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Pointer<ffi.Pointer<ffi.Void>> out,
      )
    >
  >
  KernelContext_GetGPUComputeStream;

  /// @}
  /// \name GetTensorMemoryInfo
  /// @{
  ///   /** \brief Returns a pointer to the ::OrtMemoryInfo of a Tensor
  ///    * \param[in] value ::OrtValue containing tensor.
  ///    * \param[out] mem_info ::OrtMemoryInfo of the tensor. Do NOT free the returned pointer. It is valid for the lifetime of the ::OrtValue
  ///    *
  ///    * \snippet{doc} snippets.dox OrtStatus Return Value
  ///    */
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Pointer<OrtMemoryInfo>> mem_info,
      )
    >
  >
  GetTensorMemoryInfo;

  /// @}
  /// \name GetExecutionProviderApi
  /// @{
  ///   /** \brief Get a pointer to the requested version of the Execution Provider specific
  ///    * API extensions to the OrtApi
  ///    * \param[in] provider_name The name of the execution provider name. Currently only the following
  ///    * values are supported: "DML".
  ///    * \param[in] version Must be ::ORT_API_VERSION.
  ///    * \param[out] provider_api A void pointer containing a reference to the execution provider versioned api structure.
  ///    * For example, the provider_api pointer can be cast to the OrtDmlApi* when the provider_name is "DML".
  ///    *
  ///    * \snippet{doc} snippets.dox OrtStatus Return Value
  ///    */
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> provider_name,
        ffi.Uint32 version,
        ffi.Pointer<ffi.Pointer<ffi.Void>> provider_api,
      )
    >
  >
  GetExecutionProviderApi;

  /// \name SessionOptions
  /// @{
  ///   /** \brief Set custom thread creation function
  ///    *
  ///    * \param[in] options Session options
  ///    * \param[in] ort_custom_create_thread_fn Custom thread creation function
  ///    *
  ///    * \snippet{doc} snippets.dox OrtStatus Return Value
  ///    */
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        OrtCustomCreateThreadFn ort_custom_create_thread_fn,
      )
    >
  >
  SessionOptionsSetCustomCreateThreadFn;

  /// \brief Set creation options for custom thread
  ///
  /// \param[in] options Session options
  /// \param[in] ort_custom_thread_creation_options Custom thread creation options (can be nullptr)
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Void> ort_custom_thread_creation_options,
      )
    >
  >
  SessionOptionsSetCustomThreadCreationOptions;

  /// \brief Set custom thread join function
  ///
  /// \param[in] options Session options
  /// \param[in] ort_custom_join_thread_fn Custom join thread function, must not be nullptr when ort_custom_create_thread_fn is set
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        OrtCustomJoinThreadFn ort_custom_join_thread_fn,
      )
    >
  >
  SessionOptionsSetCustomJoinThreadFn;

  /// \name OrtThreadingOptions
  /// @{
  ///   /** \brief Set custom thread creation function for global thread pools
  ///    *
  ///    * \param[inout] tp_options
  ///    * \param[in] ort_custom_create_thread_fn Custom thread creation function
  ///    *
  ///    * \snippet{doc} snippets.dox OrtStatus Return Value
  ///    */
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtThreadingOptions> tp_options,
        OrtCustomCreateThreadFn ort_custom_create_thread_fn,
      )
    >
  >
  SetGlobalCustomCreateThreadFn;

  /// \brief Set custom thread creation options for global thread pools
  ///
  /// \param[inout] tp_options
  /// \param[in] ort_custom_thread_creation_options Custom thread creation options (can be nullptr)
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtThreadingOptions> tp_options,
        ffi.Pointer<ffi.Void> ort_custom_thread_creation_options,
      )
    >
  >
  SetGlobalCustomThreadCreationOptions;

  /// \brief Set custom thread join function for global thread pools
  ///
  /// \param[inout] tp_options
  /// \param[in] ort_custom_join_thread_fn Custom thread join function, must not be nullptr when global ort_custom_create_thread_fn is set
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtThreadingOptions> tp_options,
        OrtCustomJoinThreadFn ort_custom_join_thread_fn,
      )
    >
  >
  SetGlobalCustomJoinThreadFn;

  /// \brief Synchronize bound inputs. The call may be necessary for some providers, such as cuda,
  /// in case the system that allocated bound memory operated on a different stream. However, the
  /// operation is provider specific and could be a no-op.
  ///
  /// \param[inout] binding_ptr
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtIoBinding> binding_ptr)
    >
  >
  SynchronizeBoundInputs;

  /// \brief Synchronize bound outputs. The call may be necessary for some providers, such as cuda,
  /// in case the system that allocated bound memory operated on a different stream. However, the
  /// operation is provider specific and could be a no-op.
  ///
  /// \param[inout] binding_ptr
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(ffi.Pointer<OrtIoBinding> binding_ptr)
    >
  >
  SynchronizeBoundOutputs;

  /// \brief Append CUDA execution provider to the session options
  ///
  /// If CUDA is not available (due to a non CUDA enabled build), this function will return failure.
  ///
  /// This is slightly different from OrtApi::SessionOptionsAppendExecutionProvider_CUDA, it takes an
  /// ::OrtCUDAProviderOptions which is publicly defined. This takes an opaque ::OrtCUDAProviderOptionsV2
  /// which must be created with OrtApi::CreateCUDAProviderOptions.
  ///
  /// For OrtApi::SessionOptionsAppendExecutionProvider_CUDA, the user needs to instantiate ::OrtCUDAProviderOptions
  /// as well as allocate/release buffers for some members of ::OrtCUDAProviderOptions.
  /// Here, OrtApi::CreateCUDAProviderOptions and Ortapi::ReleaseCUDAProviderOptions will do the memory management for you.
  ///
  /// \param[in] options
  /// \param[in] cuda_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.11.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtCUDAProviderOptionsV2> cuda_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_CUDA_V2;

  /// \brief Create an OrtCUDAProviderOptionsV2
  ///
  /// \param[out] out Newly created ::OrtCUDAProviderOptionsV2. Must be released with OrtApi::ReleaseCudaProviderOptions
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.11.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtCUDAProviderOptionsV2>> out,
      )
    >
  >
  CreateCUDAProviderOptions;

  /// \brief Set options in a CUDA Execution Provider.
  ///
  /// Please refer to https://onnxruntime.ai/docs/execution-providers/CUDA-ExecutionProvider.html#configuration-options
  /// to know the available keys and values. Key should be in null terminated string format of the member of ::OrtCUDAProviderOptionsV2
  /// and value should be its related range. Recreates the options and only sets the supplied values.
  ///
  /// For example, key="device_id" and value="0"
  ///
  /// \param[in] cuda_options
  /// \param[in] provider_options_keys Array of UTF-8 null-terminated string for provider options keys
  /// \param[in] provider_options_values Array of UTF-8 null-terminated string for provider options values
  /// \param[in] num_keys Number of elements in the `provider_option_keys` and `provider_options_values` arrays
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.11.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCUDAProviderOptionsV2> cuda_options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  UpdateCUDAProviderOptions;

  /// Get serialized CUDA provider options string.
  ///
  /// For example, "device_id=0;arena_extend_strategy=0;......"
  ///
  /// \param cuda_options - OrtCUDAProviderOptionsV2 instance
  /// \param allocator - a ptr to an instance of OrtAllocator obtained with CreateAllocator() or GetAllocatorWithDefaultOptions()
  /// the specified allocator will be used to allocate continuous buffers for output strings and lengths.
  /// \param ptr - is a UTF-8 null terminated string allocated using 'allocator'. The caller is responsible for using the same allocator to free it.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.11.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCUDAProviderOptionsV2> cuda_options,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> ptr,
      )
    >
  >
  GetCUDAProviderOptionsAsString;

  /// \brief Release an ::OrtCUDAProviderOptionsV2
  ///
  /// \note This is an exception in the naming convention of other Release* functions, as the name of the method does not have the V2 suffix, but the type does
  ///
  /// \since Version 1.11.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtCUDAProviderOptionsV2> input)
    >
  >
  ReleaseCUDAProviderOptions;

  /// \brief Append MIGraphX provider to session options
  ///
  /// If MIGraphX is not available (due to a non MIGraphX enabled build, or if MIGraphX is not installed on the system), this function will return failure.
  ///
  /// \param[in] options
  /// \param[in] migraphx_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.11.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtMIGraphXProviderOptions> migraphx_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_MIGraphX;

  /// \brief Replace initialized Tensors with external data with the data provided in initializers.
  ///
  /// The function will find the initialized TensorProtos with external data in the graph with the provided names and
  /// replace them with the provided tensors. The API verifies that the TensorProto being replaced
  /// has an external data reference and has the same name, dimensions and data type as its replacement. The replacement
  /// will occur before any of the optimizations take place. The data will be copied into the graph
  /// since TensorProto can't refer to the user provided buffers.
  ///
  /// Once the model has been loaded, the OrtValue(s) added to SessionOptions instance will be removed
  /// from the internal SessionOptions copy to save memory, the user provided buffers can then be deallocated
  /// and the SessionOptions instance that refers to them can be destroyed.
  ///
  /// \param[in] options
  /// \param[in] initializer_names Array of null terminated UTF-8 encoded strings of the initializers names.
  /// \param[in] initializers Array of ::OrtValue type
  /// \param[in] num_initializers Number of elements in the initializer_names and initializers
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> initializer_names,
        ffi.Pointer<ffi.Pointer<OrtValue>> initializers,
        ffi.Size num_initializers,
      )
    >
  >
  AddExternalInitializers;

  /// \brief: Create attribute of onnxruntime operator
  ///
  /// \param[in] name Name of the attribute
  /// \param[in] data Data content of the attribute
  /// \param[in] len Number of bytes stored in data for ORT_OP_ATTR_STRING.
  /// Number of elements if data represents an array (e.g., ORT_OP_ATTR_INTS). Otherwise, set to 1.
  /// \param[in] type Data type
  /// \param[out] op_attr Attribute that has been created, which must be released by OrtApi::ReleaseOpAttr
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<ffi.Void> data,
        ffi.Int len,
        ffi.UnsignedInt type,
        ffi.Pointer<ffi.Pointer<OrtOpAttr>> op_attr,
      )
    >
  >
  CreateOpAttr;

  /// \brief: Release op attribute
  ///
  /// \param[in] opAttr Attribute created by OrtApi::CreateOpAttr
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtOpAttr> input)>
  >
  ReleaseOpAttr;

  /// \brief: Create onnxruntime native operator
  ///
  /// \param[in] info Kernel info
  /// \param[in] op_name Operator name
  /// \param[in] domain Operator domain
  /// \param[in] version Operator opset version
  /// \param[in] type_constraint_names Name of the type constraints, such as "T" or "T1"
  /// \param[in] type_constraint_values Type of each constraints
  /// \param[in] type_constraint_count Number of constraints
  /// \param[in] attr_values Attributes used to initialize the operator
  /// \param[in] attr_count Number of the attributes
  /// \param[in] input_count Number of inputs
  /// \param[in] output_count Number of outputs
  /// \param[out] ort_op Operator that has been created
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> op_name,
        ffi.Pointer<ffi.Char> domain,
        ffi.Int version,
        ffi.Pointer<ffi.Pointer<ffi.Char>> type_constraint_names,
        ffi.Pointer<ffi.UnsignedInt> type_constraint_values,
        ffi.Int type_constraint_count,
        ffi.Pointer<ffi.Pointer<OrtOpAttr>> attr_values,
        ffi.Int attr_count,
        ffi.Int input_count,
        ffi.Int output_count,
        ffi.Pointer<ffi.Pointer<OrtOp>> ort_op,
      )
    >
  >
  CreateOp;

  /// \brief: Invoke the operator created by OrtApi::CreateOp
  /// The inputs must follow the order as specified in onnx specification
  ///
  /// \param[in] context Kernel context
  /// \param[in] ort_op Operator that has been created
  /// \param[in] input_values Array of inputs
  /// \param[in] input_count Number of inputs
  /// \param[in] output_values Array of outputs
  /// \param[in] output_count Number of outputs
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Pointer<OrtOp> ort_op,
        ffi.Pointer<ffi.Pointer<OrtValue>> input_values,
        ffi.Int input_count,
        ffi.Pointer<ffi.Pointer<OrtValue>> output_values,
        ffi.Int output_count,
      )
    >
  >
  InvokeOp;

  /// \brief: Release an onnxruntime operator
  ///
  /// \param[in] Op Operator created by OrtApi::CreateOp
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtOp> input)>
  >
  ReleaseOp;

  /// \brief: Append execution provider to the session options.
  /// \param[in] options
  /// \param[in] provider_name - provider to add.
  /// \param[in] provider_options_keys - keys to configure the provider options
  /// \param[in] provider_options_values - values to configure the provider options
  /// \param[in] num_keys - number of keys passed in
  ///
  /// Currently supported provider names:
  /// QNNExecutionProvider (or QNN)
  /// OpenVINOExecutionProvider (or OpenVINO)
  /// XnnpackExecutionProvider (or XNNPACK)
  /// WebNNExecutionProvider (or WEBNN)
  /// WebGpuExecutionProvider (or WebGPU)
  /// AzureExecutionProvider (or AZURE)
  /// JsExecutionProvider (or JS)
  /// VitisAIExecutionProvider (or VitisAI)
  /// CoreMLExecutionProvider (or CoreML)
  ///
  /// Note: If an execution provider has a dedicated SessionOptionsAppendExecutionProvider_<provider name> function
  /// that should be used to add it.
  ///
  /// QNN supported keys:
  /// "backend_type": Type of QNN backend. Specifies a backend path that is the associated QNN backend library file
  /// name. E.g., given backend type "htp", on Windows, the backend path would be "QnnHtp.dll", and on other
  /// platforms, it would be "libQnnHtp.so". Mutually exclusive with "backend_path".
  /// Available options:
  /// -# "cpu"
  /// -# "gpu"
  /// -# "htp": Default.
  /// -# "saver"
  /// -# "ir"
  /// "backend_path": File path to QNN backend library. Mutually exclusive with "backend_type".
  /// "profiling_level": QNN profiling level.
  /// Available options:
  /// -# "off": Default.
  /// -# "basic"
  /// -# "detailed"
  /// "profiling_file_path": QNN profiling file path if ETW not enabled.
  /// "rpc_control_latency": QNN RPC control latency.
  /// "vtcm_mb": QNN VTCM size in MB. default to 0(not set).
  /// "htp_performance_mode": QNN performance mode.
  /// Available options:
  /// -# "burst"
  /// -# "balanced"
  /// -# "default": Default.
  /// -# "high_performance"
  /// -# "high_power_saver"
  /// -# "low_balanced"
  /// -# "extreme_power_saver"
  /// -# "low_power_saver"
  /// -# "power_saver"
  /// -# "sustained_high_performance"
  /// "dump_qnn_ir_dlc": Use the QnnIr backend library to write .dlc files for each subgraph dispatched to QNN. When
  /// enabled, inference results will be incorrect. Use only for debugging.
  /// -# "0": Default: disabled
  /// -# "1": enabled
  /// "dump_qnn_ir_dlc_dir": Set the directory into which QnnIr will be configured to write QNN graphs as .dlc files.
  /// Default is current working directory.
  /// "qnn_ir_backend_path": File path to the QnnIr backend library. If "dump_qnn_ir_dlc" is enabled, use this path
  /// instead of looking for the Ir backend in the standard location.
  /// "qnn_saver_path": File path to the QNN Saver backend library. If specified, QNN Saver will be enabled and will
  /// dump QNN API calls to disk for replay/debugging. QNN Saver produces incorrect model inference results and
  /// may alter model/EP partitioning. Use only for debugging.
  /// "qnn_context_priority": QNN context priority.
  /// Available options:
  /// -# "low"
  /// -# "normal": Default.
  /// -# "normal_high"
  /// -# "high"
  /// "htp_graph_finalization_optimization_mode": Set the optimization mode for graph finalization on the HTP backend.
  /// Available options:
  /// -# "0": Default.
  /// -# "1": Faster preparation time, less optimal graph.
  /// -# "2": Longer preparation time, more optimal graph.
  /// -# "3": Longest preparation time, most likely even more optimal graph. See QNN SDK documentation for specific
  /// details.
  /// "soc_model": The SoC model number. Refer to the QNN SDK documentation for valid values.
  /// Defaults to "0" (unknown).
  /// "htp_arch": The minimum HTP architecture the driver will use to select compatible QNN operators.
  /// Available options:
  /// -# "0": Default (none).
  /// -# "68"
  /// -# "69"
  /// -# "73"
  /// -# "75"
  /// -# "81"
  /// "device_id": The ID of the device to use when setting 'htp_arch'. Defaults to "0" (for single device).
  /// "enable_htp_fp16_precision": Used for float32 model for HTP backend.
  /// Enable the float32 model to be inferenced with fp16 precision. Otherwise, it will be fp32 precision.
  /// -# "0": With fp32 precision.
  /// -# "1": Default. With fp16 precision.
  /// "offload_graph_io_quantization": Offload graph input quantization and graph output dequantization to another
  /// execution provider (typically CPU EP).
  /// -# "0": Disabled. QNN EP will handle quantization and dequantization of graph I/O.
  /// -# "1": Enabled. This is the default value.
  /// "enable_htp_spill_fill_buffer": Enable HTP spill fill buffer setting. The flag is used while generating context
  /// binary.
  /// -# "0": Default. Disabled.
  /// -# "1": Enabled.
  /// "enable_htp_shared_memory_allocator": Enable the QNN HTP shared memory allocator. Requires libcdsprpc.so/dll to
  /// be available.
  /// -# "0": Default. Disabled.
  /// -# "1": Enabled.
  /// "dump_json_qnn_graph": Set to "1" to dump QNN graphs generated by QNN EP as JSON files. Each graph partition
  /// assigned to QNN EP is dumped to a separate file.
  /// "json_qnn_graph_dir": Directory in which to dump QNN JSON graphs. If not specified, QNN graphs are dumped in the
  /// program's current working directory. Ignored if "dump_json_qnn_graph" is not set.
  /// "op_packages": QNN UDO op_package for QNN EP, allowed format:
  /// "<op_type>:<op_package_path>:<interface>[:<target>],<op_type2>:<op_package_path2>:<interface2>[:<target>]",
  /// where op_type is the name of the operation, op_package_path is the path to the op package shared library,
  /// interface is the symbol name to register the op life cycle functions, and target is the backend type. For more
  /// details, refer to: https://docs.qualcomm.com/bundle/publicresource/topics/80-63442-50/op_packages.html
  /// [Advanced] "skip_qnn_version_check": Set to "1" to allow a different version of QNN to be used than what was compiled
  /// into ONNX Runtime. Differences in operator support, accuracy, performance, and QNN's ABI may lead to crashes, inaccurate
  /// results, and poor performance. Use with caution and test thoroughly.
  ///
  /// XNNPACK supported keys:
  /// "intra_op_num_threads": number of thread-pool size to use for XNNPACK execution provider.
  /// default value is 0, which means to use the session thread-pool size.
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> provider_name,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  SessionOptionsAppendExecutionProvider;

  /// \brief: Get a copy of kernel info
  ///
  /// \param[in] info Kernel info
  /// \param[out] info_copy Copy of kernel info
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Pointer<OrtKernelInfo>> info_copy,
      )
    >
  >
  CopyKernelInfo;

  /// \brief: Release kernel info
  ///
  /// \param[in] KernelInfo A copy of kernel info returned by CopyKernelInfo
  ///
  /// \since Version 1.12.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtKernelInfo> input)>
  >
  ReleaseKernelInfo;

  /// \name Ort Training
  /// @{
  ///   /** \brief Gets the Training C Api struct
  ///    *
  ///    * Call this function to access the ::OrtTrainingApi structure that holds pointers to functions that enable
  ///    * training with onnxruntime.
  ///    * \note A NULL pointer will be returned and no error message will be printed if the training api
  ///    * is not supported with this build. A NULL pointer will be returned and an error message will be
  ///    * printed if the provided version is unsupported, for example when using a runtime older than the
  ///    * version created with this header file.
  ///    *
  ///    * \param[in] version Must be ::ORT_API_VERSION
  ///    * \return The ::OrtTrainingApi struct for the version requested.
  ///    *
  ///    * \since Version 1.13
  ///    */
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Pointer<OrtTrainingApi> Function(ffi.Uint32 version)>
  >
  GetTrainingApi;

  /// \brief Append CANN provider to session options
  ///
  /// If CANN is not available (due to a non CANN enabled build, or if CANN is not installed on the system), this function will return failure.
  ///
  /// \param[in] options
  /// \param[in] cann_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.13.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtCANNProviderOptions> cann_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_CANN;

  /// \brief Create an OrtCANNProviderOptions
  ///
  /// \param[out] out created ::OrtCANNProviderOptions. Must be released with OrtApi::ReleaseCANNProviderOptions
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.13.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtCANNProviderOptions>> out,
      )
    >
  >
  CreateCANNProviderOptions;

  /// \brief Set options in a CANN Execution Provider.
  ///
  /// \param[in] cann_options
  /// \param[in] provider_options_keys Array of UTF-8 null-terminated string for provider options keys
  /// \param[in] provider_options_values Array of UTF-8 null-terminated string for provider options values
  /// \param[in] num_keys Number of elements in the `provider_option_keys` and `provider_options_values` arrays
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.13.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCANNProviderOptions> cann_options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  UpdateCANNProviderOptions;

  /// \brief Get serialized CANN provider options string.
  ///
  /// \param[in] cann_options OrtCANNProviderOptions instance
  /// \param[in] allocator a ptr to an instance of OrtAllocator obtained with CreateAllocator()
  /// or GetAllocatorWithDefaultOptions(), the specified allocator will be used to allocate
  /// continuous buffers for output strings and lengths.
  /// \param[out] ptr is a UTF-8 null terminated string allocated using 'allocator'.
  /// The caller is responsible for using the same allocator to free it.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.13.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCANNProviderOptions> cann_options,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> ptr,
      )
    >
  >
  GetCANNProviderOptionsAsString;

  /// \brief Release an OrtCANNProviderOptions
  ///
  /// \param[in] input The pointer of OrtCANNProviderOptions which will been deleted
  ///
  /// \since Version 1.13.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtCANNProviderOptions> input)
    >
  >
  ReleaseCANNProviderOptions;

  /// \brief Get OrtDevice type from MemoryInfo
  ///
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtMemoryInfo> ptr,
        ffi.Pointer<ffi.UnsignedInt> out,
      )
    >
  >
  MemoryInfoGetDeviceType;

  /// \brief Update the OrtEnv instance with custom log severity level
  ///
  /// \param[in] ort_env The OrtEnv instance being used
  /// \param[in] log_severity_level The log severity level.
  ///
  /// \since Version 1.14.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> ort_env,
        ffi.UnsignedInt log_severity_level,
      )
    >
  >
  UpdateEnvWithCustomLogLevel;

  /// \brief Set affinities for intra op threads
  ///
  /// Affinity string follows format:
  /// logical_processor_id,logical_processor_id;logical_processor_id,logical_processor_id
  /// Semicolon isolates configurations among threads, while comma split processors where ith thread expected to attach to.
  /// e.g. 1,2,3;4,5
  /// specifies affinities for two threads, with the 1st thread attach to the 1st, 2nd, and 3rd processor, and 2nd thread to the 4th and 5th.
  /// To ease the configuration, an "interval" is also allowed:
  /// e.g. 1-8;8-16;17-24
  /// orders that the 1st thread runs on first eight processors, 2nd thread runs on next eight processors, and so forth.
  /// Note:
  /// 1. Once set, the number of thread affinities must equal to intra_op_num_threads - 1,
  /// ort does not set affinity on the main thread which is started and managed by the calling app;
  /// 2. For windows, ort will infer the group id from a logical processor id, for example, assuming there are two groups with each has 64 logical processors,
  /// an id of 64 will be inferred as the last processor of the 1st group, while 65 will be interpreted as the 1st processor of the second group.
  /// Hence 64-65 is an invalid configuration, because a windows thread cannot be attached to processors across group boundary.
  ///
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtThreadingOptions> tp_options,
        ffi.Pointer<ffi.Char> affinity_string,
      )
    >
  >
  SetGlobalIntraOpThreadAffinity;

  /// \brief Register custom ops from a shared library.
  ///
  /// Loads a shared library (.dll on windows, .so on linux, etc) named 'library_name' and looks for this entry point:
  /// OrtStatus* RegisterCustomOps(OrtSessionOptions * options, const OrtApiBase* api);
  /// It then passes in the provided session options to this function along with the api base.
  ///
  /// The handle to the loaded library is automatically released by ORT when the last OrtSession that references the
  /// library handle is released. If no OrtSession is created, then the library handle is released when the provided
  /// OrtSessionOptions is released.
  ///
  /// \param[in] options The session options.
  /// \param[in] library_name The name of the shared library to load and register. Refer to OS-specific dynamic library
  /// loading utilities (e.g., LoadLibraryEx on Windows or dlopen on Linux/MacOS) for information
  /// on the format of library names and search paths.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> library_name,
      )
    >
  >
  RegisterCustomOpsLibrary_V2;

  /// \brief Register custom ops by calling a RegisterCustomOpsFn function.
  ///
  /// Searches for registration_func_name and if found calls it.
  ///
  /// The library containing the function must either be linked against or previously loaded by the executable.
  ///
  /// If you want ONNX Runtime to load the library and manage its lifetime, use RegisterCustomOpsLibrary_V2.
  ///
  /// RegisterCustomOpsUsingFunction can be used in scenarios where it may not be possible for ONNX Runtime to load
  /// the library from a path. e.g. mobile platforms where the library must be linked into the app.
  ///
  /// The registration function must have the signature of RegisterCustomOpsFn:
  /// OrtStatus* (*fn)(OrtSessionOptions* options, const OrtApiBase* api);
  ///
  /// See https://onnxruntime.ai/docs/reference/operators/add-custom-op.html for details on how the registration
  /// function should be implemented.
  ///
  /// \param[in] options OrtSessionOptions that is passed through as the first argument in the call to the
  /// registration function.
  /// \param[in] registration_func_name Name of registration function to use.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> registration_func_name,
      )
    >
  >
  RegisterCustomOpsUsingFunction;

  /// \brief Get the number of inputs from ::OrtKernelInfo.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to query the number of inputs
  /// during kernel/session creation.
  ///
  /// \param[in] info Instance of ::OrtKernelInfo.
  /// \param[out] out Pointer to variable assigned with the result on success.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  KernelInfo_GetInputCount;

  /// \brief Get the number of outputs from ::OrtKernelInfo.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to query the number of outputs
  /// during kernel/session creation.
  ///
  /// \param[in] info Instance of ::OrtKernelInfo.
  /// \param[out] out Pointer to variable assigned with the result on success.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  KernelInfo_GetOutputCount;

  /// \brief Get the name of a ::OrtKernelInfo's input.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to query an input's name
  /// during kernel/session creation.
  ///
  /// If `out` is nullptr, the value of `size` is set to the size of the name
  /// string (including null-terminator), and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the name string's size and `out` is not nullptr,
  /// the value of `size` is set to the true size of the string (including null-terminator),
  /// the provided memory is filled with the string's contents, and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual string's size and `out`
  /// is not nullptr, the value of `size` is set to the true size of the string
  /// and a failure status is returned.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[in] index The index of the input name to get. Returns a failure status if out-of-bounds.
  /// \param[out] out Memory location into which to write the UTF-8 null-terminated string representing the input's name.
  /// \param[in,out] size Pointer to the size of the `out` buffer. See above comments for details.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Size index,
        ffi.Pointer<ffi.Char> out,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  KernelInfo_GetInputName;

  /// \brief Get the name of a ::OrtKernelInfo's output.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to query an output's name
  /// during kernel/session creation.
  ///
  /// If `out` is nullptr, the value of `size` is set to the size of the name
  /// string (including null-terminator), and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the name string's size and `out` is not nullptr,
  /// the value of `size` is set to the true size of the string (including null-terminator),
  /// the provided memory is filled with the string's contents, and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual string's size and `out`
  /// is not nullptr, the value of `size` is set to the true size of the string
  /// and a failure status is returned.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[in] index The index of the output name to get. Returns a failure status if out-of-bounds.
  /// \param[out] out Memory location into which to write the UTF-8 null-terminated string representing the output's
  /// name.
  /// \param[in,out] size Pointer to the size of the `out` buffer. See above comments for details.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Size index,
        ffi.Pointer<ffi.Char> out,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  KernelInfo_GetOutputName;

  /// \brief Get the type information for a ::OrtKernelInfo's input.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to query the shape and type information
  /// of an input during kernel/session creation.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[in] index Which input to get the type information for
  /// \param[out] type_info Pointer set to the resulting ::OrtTypeInfo. Must be freed with OrtApi::ReleaseTypeInfo.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Size index,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  KernelInfo_GetInputTypeInfo;

  /// \brief Get the type information for a ::OrtKernelInfo's output.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to query the shape and type information
  /// of an output during kernel/session creation.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[in] index Which input to get the type information for
  /// \param[out] type_info Pointer set to the resulting ::OrtTypeInfo. Must be freed with OrtApi::ReleaseTypeInfo.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Size index,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  KernelInfo_GetOutputTypeInfo;

  /// \brief Get a ::OrtValue tensor stored as an attribute in the graph node.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to get a tensor attribute.
  ///
  /// \param[in] info ::OrtKernelInfo instance.
  /// \param[in] name UTF-8 null-terminated string representing the attribute's name.
  /// \param[in] allocator Allocator used to allocate the internal tensor state.
  /// \param[out] out Returns newly created ::OrtValue. Must be freed with OrtApi::ReleaseValue,
  /// which will also free internal tensor state allocated with the provided allocator.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> name,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  KernelInfoGetAttribute_tensor;

  /// \brief Checks if the given session configuration entry exists.
  ///
  /// The config_key formats are defined in onnxruntime_session_options_config_keys.h
  ///
  /// Can be used in a custom operator library to check for session configuration entries
  /// that target one or more custom operators in the library. Example: The config entry
  /// custom_op.myop.some_key targets a custom op named "myop".
  ///
  /// \param[in] options The ::OrtSessionOptions instance.
  /// \param[in] config_key A null-terminated UTF-8 string representation of the configuration key.
  /// \param[out] out Pointer set to 1 if the entry exists and 0 otherwise.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> config_key,
        ffi.Pointer<ffi.Int> out,
      )
    >
  >
  HasSessionConfigEntry;

  /// \brief Get a session configuration value.
  ///
  /// Returns a failure status if the configuration key does not exist.
  /// The config_key and the format of config_value are defined in onnxruntime_session_options_config_keys.h
  ///
  /// If `config_value` is nullptr, the value of `size` is set to the true size of the string
  /// value (including null-terminator), and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the actual string value's size,
  /// the value of `size` is set to the true size of the string value, the provided memory
  /// is filled with the value's contents, and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual string value's size and `config_value`
  /// is not nullptr, the value of `size` is set to the true size of the string value
  /// and a failure status is returned.
  ///
  /// Can be used in a custom operator library to get session configuration entries
  /// that target one or more custom operators in the library. Example: The config entry
  /// custom_op.myop.some_key targets a custom op named "myop".
  ///
  /// \param[in] options The session options.
  /// \param[in] config_key A null-terminated UTF-8 string representation of the config key.
  /// \param[in] config_value Pointer to memory where the null-terminated UTF-8 string value will be stored.
  /// \param[in,out] size Pointer to the size of the `config_value` buffer. See above comments for details.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.14
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Char> config_key,
        ffi.Pointer<ffi.Char> config_value,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  GetSessionConfigEntry;

  /// \brief Append dnnl provider to session options
  ///
  /// If oneDNN is not available, this function will return failure.
  ///
  /// \param[in] options
  /// \param[in] dnnl_options
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<OrtDnnlProviderOptions> dnnl_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_Dnnl;

  /// \brief Create an OrtDnnlProviderOptions
  ///
  /// \param[out] out Newly created ::OrtDnnlProviderOptions. Must be released with OrtApi::ReleaseDnnlProviderOptions
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtDnnlProviderOptions>> out,
      )
    >
  >
  CreateDnnlProviderOptions;

  /// \brief Set options in a oneDNN Execution Provider.
  ///
  /// Key should be in null terminated string format of the member of ::OrtDnnlProviderOptions
  /// and value should be its related range.
  ///
  /// For example, key="use_arena" and value="1"
  ///
  /// \param[in] dnnl_options
  /// \param[in] provider_options_keys Array of UTF-8 null-terminated string for provider options keys
  /// \param[in] provider_options_values Array of UTF-8 null-terminated string for provider options values
  /// \param[in] num_keys Number of elements in the `provider_option_keys` and `provider_options_values` arrays
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtDnnlProviderOptions> dnnl_options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  UpdateDnnlProviderOptions;

  /// Get serialized oneDNN provider options string.
  ///
  /// For example, "use_arena=1;......"
  ///
  /// \param dnnl_options - OrtDnnlProviderOptions instance
  /// \param allocator - a ptr to an instance of OrtAllocator obtained with CreateAllocator() or GetAllocatorWithDefaultOptions()
  /// the specified allocator will be used to allocate continuous buffers for output strings and lengths.
  /// \param ptr - is a UTF-8 null terminated string allocated using 'allocator'. The caller is responsible for using the same allocator to free it.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtDnnlProviderOptions> dnnl_options,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> ptr,
      )
    >
  >
  GetDnnlProviderOptionsAsString;

  /// \brief Release an ::OrtDnnlProviderOptions
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtDnnlProviderOptions> input)
    >
  >
  ReleaseDnnlProviderOptions;

  /// \brief Get the graph node name from ::OrtKernelInfo.
  ///
  /// If `out` is nullptr, the value of `size` is set to the size of the name
  /// string (including null-terminator), and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the name string's size and `out` is not nullptr,
  /// the value of `size` is set to the true size of the string (including null-terminator),
  /// the provided memory is filled with the string's contents, and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual string's size and `out`
  /// is not nullptr, the value of `size` is set to the true size of the string
  /// and a failure status is returned.
  ///
  /// Can be used in a custom operator's CreateKernel callback to get the name of the operator's node name in the graph.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[out] out Memory location into which to write the UTF-8 null-terminated string representing the name.
  /// \param[in,out] size Pointer to the size of the `out` buffer. See above comments for details.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.15
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> out,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  KernelInfo_GetNodeName;

  /// \brief Get the session logger from ::OrtKernelInfo.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to get a logger that can be used to log
  /// messages.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[out] logger Pointer set to the session's ::OrtLogger. Owned by ONNX Runtime, so do not free.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.15
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Pointer<OrtLogger>> logger,
      )
    >
  >
  KernelInfo_GetLogger;

  /// \brief Get the runtime logger from ::OrtKernelContext.
  ///
  /// Used in the KernelCompute callback of an OrtCustomOp to get a logger that can be used to log
  /// messages during inference.
  ///
  /// \param[in] context An instance of ::OrtKernelContext.
  /// \param[out] logger Pointer set to the kernel context's ::OrtLogger. Owned by ONNX Runtime, so do not free.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.15
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Pointer<ffi.Pointer<OrtLogger>> logger,
      )
    >
  >
  KernelContext_GetLogger;

  /// \brief Logs a message at the given severity level using the provided ::OrtLogger.
  ///
  /// Only messages with a severity level equal or greater than the ::OrtLogger's logging severity level
  /// are logged. Use OrtApi::Logger_GetLoggingSeverityLevel to get the ::OrtLogger's logging severity
  /// level.
  ///
  /// Can be used in custom operators to log messages with the logger retrieved via OrtApi::KernelInfo_GetLogger.
  ///
  /// \param[in] logger The ::OrtLogger instance.
  /// \param[in] log_severity_level The message's severity level.
  /// \param[in] message The message to log.
  /// \param[in] file_path The filepath of the file in which the message is logged. Usually the value of ORT_FILE.
  /// \param[in] line_number The file line number in which the message is logged. Usually the value of __LINE__.
  /// \param[in] func_name The name of the function in which the message is logged. Usually the value of __FUNCTION__.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.15
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtLogger> logger,
        ffi.UnsignedInt log_severity_level,
        ffi.Pointer<ffi.Char> message,
        ffi.Pointer<ffi.Char> file_path,
        ffi.Int line_number,
        ffi.Pointer<ffi.Char> func_name,
      )
    >
  >
  Logger_LogMessage;

  /// \brief Get the logging severity level of the ::OrtLogger.
  ///
  /// Can be used in a custom operator to get the logging severity level of the ::OrtLogger associated with
  /// the ::OrtKernelInfo.
  ///
  /// \param[in] logger The ::OrtLogger instance.
  /// \param[out] out Pointer to variable assigned with the logging severity level on success.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.15
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtLogger> logger,
        ffi.Pointer<ffi.UnsignedInt> out,
      )
    >
  >
  Logger_GetLoggingSeverityLevel;

  /// \brief Get a ::OrtValue tensor stored as a constant initializer in the graph node.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to get a tensor value.
  ///
  /// \param[in] info ::OrtKernelInfo instance.
  /// \param[in] index The node index.
  /// \param[out] is_constant Is it a constant node input or not.
  /// \param[out] out The OrtValue tensor value.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Size index,
        ffi.Pointer<ffi.Int> is_constant,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  KernelInfoGetConstantInput_tensor;

  /// \brief Get Optional Type information from an ::OrtTypeInfo
  ///
  /// This augments ::OrtTypeInfo to return an ::OrtOptionalTypeInfo when the type is optional.
  /// The OrtOptionalTypeInfo also has a nested ::OrtTypeInfo that describes the type of the optional value.
  /// ::OrtOptionalTypeInfo type can only appear within model metadata to describe inputs/outputs.
  /// The actual OrtValues that are supplied in place of optional type inputs should contain
  /// specific type that is described by ::OrtOptionalTypeInfo.
  ///
  /// So the picture: ::OrtTypeInfo -> ::OrtOptionalTypeInfo -> ::OrtTypeInfo (describes the type that can be supplied
  /// in place of the optional type when creating the actual ::OrtValue).
  ///
  /// \param[in] type_info
  /// \param[out] out A pointer to the ::OrtOptionalTypeInfo. Do not free this value,
  /// it is owned by OrtTypeInfo instance. When the type_info does not represent
  /// optional type, nullptr is returned in out.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTypeInfo> type_info,
        ffi.Pointer<ffi.Pointer<OrtOptionalTypeInfo>> out,
      )
    >
  >
  CastTypeInfoToOptionalTypeInfo;

  /// \brief Get OrtTypeInfo for the allowed contained type from an ::OrtOptionalTypeInfo.
  ///
  /// This augments ::OrtOptionalTypeInfo to return an ::OrtTypeInfo for the contained type.
  /// The OrtOptionalTypeInfo has a nested ::OrtTypeInfo that describes the type of the optional value.
  /// ::OrtOptionalTypeInfo type can only appear within model metadata to describe inputs/outputs.
  /// The actual OrtValues that are supplied in place of optional type inputs should contain
  /// specific type that is described by the returned ::OrtTypeInfo.
  ///
  /// \param[in] optional_type_info
  /// \param[out] out A copy of ::OrtTypeInfo for what the optional value could be.
  /// The user must free this value with ReleaseTypeInfo.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtOptionalTypeInfo> optional_type_info,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> out,
      )
    >
  >
  GetOptionalContainedTypeInfo;

  /// \brief Set a single string in a string tensor
  /// Do not zero terminate the string data.
  ///
  /// \param[in] value A string tensor
  /// \param[in] index - flat index of the element
  /// \param[in] length_in_bytes length of the buffer in utf-8 bytes (without the null terminator)
  /// \param[inout] buffer - address of return value
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Size index,
        ffi.Size length_in_bytes,
        ffi.Pointer<ffi.Pointer<ffi.Char>> buffer,
      )
    >
  >
  GetResizedStringTensorElementBuffer;

  /// \brief Get Allocator from KernelContext for a specific memoryInfo. Please use C API ReleaseAllocator to release out object
  ///
  /// \param[in] context OrtKernelContext instance
  /// \param[in] mem_info OrtMemoryInfo instance
  /// \param[out] out A pointer to OrtAllocator. Must be released with OrtApi::ReleaseAllocator.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.15.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Pointer<OrtMemoryInfo> mem_info,
        ffi.Pointer<ffi.Pointer<OrtAllocator>> out,
      )
    >
  >
  KernelContext_GetAllocator;

  /// \brief Returns a null terminated string of the build info including git info and cxx flags
  ///
  /// \return UTF-8 encoded version string. Do not deallocate the returned buffer.
  ///
  /// \since Version 1.15.
  external ffi.Pointer<ffi.NativeFunction<ffi.Pointer<ffi.Char> Function()>>
  GetBuildInfoString;

  /// \brief Create an OrtROCMProviderOptions
  ///
  /// \param[out] out Newly created ::OrtROCMProviderOptions. Must be released with OrtApi::ReleaseROCMProviderOptions
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtROCMProviderOptions>> out,
      )
    >
  >
  CreateROCMProviderOptions;

  /// \brief Set options in a ROCm Execution Provider.
  ///
  /// Please refer to https://onnxruntime.ai/docs/execution-providers/ROCm-ExecutionProvider.html
  /// to know the available keys and values. Key should be in null terminated string format of the member of
  /// ::OrtROCMProviderOptions and value should be its related range.
  ///
  /// For example, key="device_id" and value="0"
  ///
  /// \param[in] rocm_options
  /// \param[in] provider_options_keys Array of UTF-8 null-terminated string for provider options keys
  /// \param[in] provider_options_values Array of UTF-8 null-terminated string for provider options values
  /// \param[in] num_keys Number of elements in the `provider_option_keys` and `provider_options_values` arrays
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtROCMProviderOptions> rocm_options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  UpdateROCMProviderOptions;

  /// Get serialized ROCm provider options string.
  ///
  /// For example, "device_id=0;arena_extend_strategy=0;......"
  ///
  /// \param rocm_options - OrtROCMProviderOptions instance
  /// \param allocator - a ptr to an instance of OrtAllocator obtained with CreateAllocator() or GetAllocatorWithDefaultOptions()
  /// the specified allocator will be used to allocate continuous buffers for output strings and lengths.
  /// \param ptr - is a UTF-8 null terminated string allocated using 'allocator'. The caller is responsible for using the same allocator to free it.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtROCMProviderOptions> rocm_options,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> ptr,
      )
    >
  >
  GetROCMProviderOptionsAsString;

  /// \brief Release an ::OrtROCMProviderOptions
  ///
  /// \note This is an exception in the naming convention of other Release* functions, as the name of the method does not have the V2 suffix, but the type does
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtROCMProviderOptions> input)
    >
  >
  ReleaseROCMProviderOptions;

  /// \brief Create an allocator with specific type and register it with the ::OrtEnv
  /// This API enhance CreateAndRegisterAllocator that it can create an allocator with specific type, not just CPU allocator
  /// Enables sharing the allocator between multiple sessions that use the same env instance.
  /// Lifetime of the created allocator will be valid for the duration of the environment.
  /// Returns an error if an allocator with the same ::OrtMemoryInfo is already registered.
  /// \param[in] env OrtEnv instance
  /// \param[in] provider_type ExecutionProvider type
  /// \param[in] mem_info OrtMemoryInfo instance
  /// \param[in] arena_cfg Arena configuration
  /// \param[in] provider_options_keys key of the provider options map
  /// \param[in] provider_options_values value of the provider options map
  /// \param[in] num_keys Length of the provider options map
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Char> provider_type,
        ffi.Pointer<OrtMemoryInfo> mem_info,
        ffi.Pointer<OrtArenaCfg> arena_cfg,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  CreateAndRegisterAllocatorV2;

  /// \brief Run the model asynchronously in a thread owned by intra op thread pool
  ///
  /// \param[in] session
  /// \param[in] run_options If nullptr, will use a default ::OrtRunOptions
  /// \param[in] input_names Array of null terminated UTF8 encoded strings of the input names
  /// \param[in] input Array of ::OrtValue%s of the input values
  /// \param[in] input_len Number of elements in the input_names and inputs arrays
  /// \param[in] output_names Array of null terminated UTF8 encoded strings of the output names
  /// \param[in] output_names_len Number of elements in the output_names and outputs array
  /// \param[out] output OrtValue* array of size output_names_len.
  /// On calling RunAsync, output[i] could either be a null or a pointer to a preallocated OrtValue.
  /// Later, the output array will be passed to run_async_callback with all null(s) filled with valid
  /// OrtValue pointer(s) allocated by onnxruntime.
  /// NOTE: it is customer's duty to finally release the output array and each of its member,
  /// regardless of whether the member (OrtValue*) is allocated by onnxruntime or preallocated by the customer.
  /// \param[in] run_async_callback Callback function on model run completion
  /// \param[in] user_data User data that pass back to run_async_callback
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<OrtRunOptions> run_options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> input_names,
        ffi.Pointer<ffi.Pointer<OrtValue>> input,
        ffi.Size input_len,
        ffi.Pointer<ffi.Pointer<ffi.Char>> output_names,
        ffi.Size output_names_len,
        ffi.Pointer<ffi.Pointer<OrtValue>> output,
        RunAsyncCallbackFn run_async_callback,
        ffi.Pointer<ffi.Void> user_data,
      )
    >
  >
  RunAsync;

  /// Update TensorRT EP provider option where its data type is pointer, for example 'user_compute_stream'.
  /// If the data type of the provider option can be represented by string please use UpdateTensorRTProviderOptions.
  ///
  /// Note: It's caller's responsibility to properly manage the lifetime of the instance pointed by this pointer.
  ///
  /// \param tensorrt_options - OrtTensorRTProviderOptionsV2 instance
  /// \param key - Name of the provider option
  /// \param value - A pointer to the instance that will be assigned to this provider option
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorRTProviderOptionsV2> tensorrt_options,
        ffi.Pointer<ffi.Char> key,
        ffi.Pointer<ffi.Void> value,
      )
    >
  >
  UpdateTensorRTProviderOptionsWithValue;

  /// Get TensorRT EP provider option where its data type is pointer.
  /// If the data type of the provider option can be represented by string please use GetTensorRTProviderOptionsAsString.
  ///
  /// \param tensorrt_options - OrtTensorRTProviderOptionsV2 instance
  /// \param key - Name of the provider option
  /// \param ptr - A pointer to the instance that is kept by the provider option
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorRTProviderOptionsV2> tensorrt_options,
        ffi.Pointer<ffi.Char> key,
        ffi.Pointer<ffi.Pointer<ffi.Void>> ptr,
      )
    >
  >
  GetTensorRTProviderOptionsByName;

  /// Update CUDA EP provider option where its data type is pointer, for example 'user_compute_stream'.
  /// If the data type of the provider option can be represented by string please use UpdateCUDAProviderOptions.
  ///
  /// Note: It's caller's responsibility to properly manage the lifetime of the instance pointed by this pointer.
  ///
  /// \param cuda_options - OrtCUDAProviderOptionsV2 instance
  /// \param key - Name of the provider option
  /// \param value - A pointer to the instance that will be assigned to this provider option
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCUDAProviderOptionsV2> cuda_options,
        ffi.Pointer<ffi.Char> key,
        ffi.Pointer<ffi.Void> value,
      )
    >
  >
  UpdateCUDAProviderOptionsWithValue;

  /// Get CUDA EP provider option where its data type is pointer.
  /// If the data type of the provider option can be represented by string please use GetCUDAProviderOptionsAsString.
  ///
  /// \param cuda_options - OrtCUDAProviderOptionsV2 instance
  /// \param key - Name of the provider option
  /// \param ptr - A pointer to the instance that is kept by the provider option
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCUDAProviderOptionsV2> cuda_options,
        ffi.Pointer<ffi.Char> key,
        ffi.Pointer<ffi.Pointer<ffi.Void>> ptr,
      )
    >
  >
  GetCUDAProviderOptionsByName;

  /// Get a EP resource.
  /// E.g. a cuda stream or a cublas handle
  ///
  /// \param context - Kernel context
  /// \param resource_version - Version of the resource
  /// \param resource_id - Type of resource
  /// \param resource - A pointer to returned resource
  ///
  /// \since Version 1.16.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Int resource_version,
        ffi.Int resource_id,
        ffi.Pointer<ffi.Pointer<ffi.Void>> resource,
      )
    >
  >
  KernelContext_GetResource;

  /// \brief Set user logging function
  ///
  /// By default the logger created by the CreateEnv* functions is used to create the session logger as well.
  /// This function allows a user to override this default session logger with a logger of their own choosing. This way
  /// the user doesn't have to create a separate environment with a custom logger. This addresses the problem when
  /// the user already created an env but now wants to use a different logger for a specific session (for debugging or
  /// other reasons).
  ///
  /// \param[in] options
  /// \param[in] user_logging_function A pointer to a logging function.
  /// \param[in] user_logging_param A pointer to arbitrary data passed as the ::OrtLoggingFunction `param` parameter to
  /// `user_logging_function`. This parameter is optional.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        OrtLoggingFunction user_logging_function,
        ffi.Pointer<ffi.Void> user_logging_param,
      )
    >
  >
  SetUserLoggingFunction;

  /// Get number of input from OrtShapeInferContext
  ///
  /// \param[in] context
  /// \param[out] out The number of inputs
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtShapeInferContext> context,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  ShapeInferContext_GetInputCount;

  /// Get type and shape info of an input
  ///
  /// \param[in] context
  /// \param[in] index The index of the input
  /// \param[out] info Type shape info of the input
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtShapeInferContext> context,
        ffi.Size index,
        ffi.Pointer<ffi.Pointer<OrtTensorTypeAndShapeInfo>> info,
      )
    >
  >
  ShapeInferContext_GetInputTypeShape;

  /// Get attribute from OrtShapeInferContext. Note that OrtShapeInferContext is a per-node context, one could only read attribute from current node.
  ///
  /// \param[in] context
  /// \param[in] attr_name Name of the attribute
  /// \param[out] attr Handle of the attribute fetched
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtShapeInferContext> context,
        ffi.Pointer<ffi.Char> attr_name,
        ffi.Pointer<ffi.Pointer<OrtOpAttr>> attr,
      )
    >
  >
  ShapeInferContext_GetAttribute;

  /// Set type and shape info of an output
  ///
  /// \param[in] context
  /// \param[in] index The index of the output
  /// \param[out] info Type shape info of the output
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtShapeInferContext> context,
        ffi.Size index,
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
      )
    >
  >
  ShapeInferContext_SetOutputTypeShape;

  /// Set symbolic shape to type shape info
  ///
  /// \param[in] info Type shape info
  /// \param[in] dim_params Symbolic strings
  /// \param[in] dim_params_length Number of strings
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtTensorTypeAndShapeInfo> info,
        ffi.Pointer<ffi.Pointer<ffi.Char>> dim_params,
        ffi.Size dim_params_length,
      )
    >
  >
  SetSymbolicDimensions;

  /// Read contents of an attribute to data
  ///
  /// \param[in] op_attr
  /// \param[in] type Attribute type
  /// \param[out] data Memory address to save raw content of the attribute
  /// \param[in] len Number of bytes allowed to store in data
  /// \param[out] out Number of bytes required to save the data when the call failed, or the real number of bytes saved to data on success
  ///
  /// \note Does not support reading graph attributes. Refer to Node_GetSubgraphs.
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtOpAttr> op_attr,
        ffi.UnsignedInt type,
        ffi.Pointer<ffi.Void> data,
        ffi.Size len,
        ffi.Pointer<ffi.Size> out,
      )
    >
  >
  ReadOpAttr;

  /// \brief Set whether to use deterministic compute.
  ///
  /// Default is false. If set to true, this will enable deterministic compute for GPU kernels where possible.
  /// Note that this most likely will have a performance cost.
  ///
  /// \param[in] options
  /// \param[in] value
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Bool value,
      )
    >
  >
  SetDeterministicCompute;

  /// Run fn in parallel
  ///
  /// \param[in] context
  /// \param[in] fn Function accepting usr_data and an integer as iterator
  /// \param[in] total The number of times fn is to be invoked
  /// \param[in] num_batch Number of batches by which the "total" is to be divided in maximum. When zero, there is no limit
  /// \param[in] usr_data User data to be passed back to fn
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Pointer<
          ffi.NativeFunction<ffi.Void Function(ffi.Pointer<ffi.Void>, ffi.Size)>
        >
        fn,
        ffi.Size total,
        ffi.Size num_batch,
        ffi.Pointer<ffi.Void> usr_data,
      )
    >
  >
  KernelContext_ParallelFor;

  /// \brief Append OpenVINO execution provider to the session options
  ///
  /// If OpenVINO is not available (due to a non OpenVINO enabled build, or if OpenVINO is not installed on the system), this function will fail.
  ///
  /// \param[in] options
  /// \param[in] provider_options_keys
  /// \param[in] provider_options_values
  /// \param[in] num_keys
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.17.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_OpenVINO_V2;

  /// \brief Append VitisAI provider to session options
  ///
  /// If VitisAI is not available (due to a non VitisAI enabled build, or if VitisAI is not installed on the system), this function will return failure.
  ///
  /// \param[in] options
  /// \param[in] provider_options_keys
  /// \param[in] provider_options_values
  /// \param[in] num_keys
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.18.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> provider_options_values,
        ffi.Size num_keys,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_VitisAI;

  /// \brief Get scratch buffer from the corresponding allocator under the specific OrtMemoryInfo object.
  /// NOTE: callers are responsible to release this scratch buffer from the corresponding allocator
  /// \param[in] context OrtKernelContext instance
  /// \param[in] mem_info OrtMemoryInfo instance
  /// \param[in] count_or_bytes How many bytes is this scratch buffer
  /// \param[out] out A pointer to the scratch buffer
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.18.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelContext> context,
        ffi.Pointer<OrtMemoryInfo> mem_info,
        ffi.Size count_or_bytes,
        ffi.Pointer<ffi.Pointer<ffi.Void>> out,
      )
    >
  >
  KernelContext_GetScratchBuffer;

  /// \brief Get allocator from KernelInfo for a specific memory type. Please use C API ReleaseAllocator to release out object
  ///
  /// \param[in] info OrtKernelInfo instance
  /// \param[in] mem_type OrtMemType object
  /// \param[out] out A pointer to OrtAllocator
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.18.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Int mem_type,
        ffi.Pointer<ffi.Pointer<OrtAllocator>> out,
      )
    >
  >
  KernelInfoGetAllocator;

  /// \brief Replace initialized Tensors with external data with the provided files in memory
  ///
  /// The function will find the initialized TensorProtos with external data in the graph with the provided
  /// external file names and the file content in memory. The API gets the external file name, offset, data length
  /// from TensorProto, and locate the tensor data from the file in memory buffer.
  /// It creates a Tensor to replace the existing Tensor in graph. The replacement
  /// will occur before any of the optimizations take place. The data will be copied into the graph
  /// since TensorProto can't refer to the user provided buffers.
  ///
  /// \param[in] options
  /// \param[in] external_initializer_file_names Array of null terminated UTF-8 encoded strings of the file names
  /// which holds the external initializers.
  /// \param[in] external_initializer_file_buffer_array Array of pointers to the buffer of the file content.
  /// The buffer can be freed after session creation.
  /// \param[in] external_initializer_file_lengths Array of size_t to indicate the length of file content
  /// \param[in] num_external_initializer_files Number of external files
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.18.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<ffi.Char>> external_initializer_file_names,
        ffi.Pointer<ffi.Pointer<ffi.Char>>
        external_initializer_file_buffer_array,
        ffi.Pointer<ffi.Size> external_initializer_file_lengths,
        ffi.Size num_external_initializer_files,
      )
    >
  >
  AddExternalInitializersFromFilesInMemory;

  /// \brief Create an OrtLoraAdapter
  ///
  /// The function attempts to locate file specified by adapter_file_path, read it and create an OrtLoraAdapter
  /// instance. The adapter_file_path should be a valid path to a file that contains a valid Lora Adapter
  /// format. The function attempts to validate the format at load time. The file will always be memory mapped, unless
  /// the platform does not support memory mapping, in which case the file will be read into memory.
  ///
  /// \param[in] adapter_file_path adapter file path.
  /// \param[in] allocator optional pointer to a device allocator. If specified
  /// data is copied to the device at some point before Run() is invoked. If nullptr, data stays on CPU.
  /// The data would still be copied to device if required by the model at inference time.
  /// \param[out] out A pointer to a newly created OrtLoraAdapter instance. Must be released with
  /// OrtApi::ReleaseLoraAdapter.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.20.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> adapter_file_path,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<OrtLoraAdapter>> out,
      )
    >
  >
  CreateLoraAdapter;

  /// \brief Create an OrtLoraAdapter
  ///
  /// The function copies the bytes from the array and creates an OrtLoraAdapter instance.
  ///
  ///
  /// \param[in] bytes pointer to a valid Lora Adapter format buffer.
  /// \param[in] num_bytes length of bytes buffer.
  /// \param[in] allocator optional pointer to a device allocator. If specified
  /// data is copied to the device at some point before Run() is invoked. If nullptr, data stays on CPU.
  /// The data would still be copied to device if required by the model at inference time.
  /// \param[out] out A pointer to a newly created OrtLoraAdapter instance. Must be released with
  /// OrtApi::ReleaseLoraAdapter.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.20.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Void> bytes,
        ffi.Size num_bytes,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<OrtLoraAdapter>> out,
      )
    >
  >
  CreateLoraAdapterFromArray;

  /// \brief Release an ::OrtLoraAdapter obtained from OrtApi::CreateLoraAdapter
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtLoraAdapter> input)>
  >
  ReleaseLoraAdapter;

  /// \brief Add the Lora Adapter to the list of active adapters.
  ///
  /// The function adds the Lora Adapter to the list of active adapters. The Lora Adapter must be created with
  /// OrtApi::CreateLoraAdapter or FromArray. The Lora Adapter will be used by the session to run the model.
  /// The instance of the OrtRunOptions can then be used to customize the Run() calls.
  /// More than one OrtLoraAdapter can be active at the same time. Lora Parameters that belong to different
  /// Lora adapters that will be active at the same time must not overlap.
  /// This setting does not affect RunWithBinding.
  ///
  /// \param[in] options OrtRunOptions instance
  /// \param[in] adapter OrtLoraAdapter instance
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.20.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Pointer<OrtLoraAdapter> adapter,
      )
    >
  >
  RunOptionsAddActiveLoraAdapter;

  /// \brief Set DynamicOptions for EPs (Execution Providers)
  ///
  /// Valid options can be found in `include\onnxruntime\core\session\onnxruntime_session_options_config_keys.h`
  /// Look for `kOrtEpDynamicOptions`
  ///
  /// \param[in] sess OrtSession
  /// \param[in] keys Array of null terminated UTF8 encoded strings of EP dynamic option keys
  /// \param[in] values Array of null terminated UTF8 encoded string of EP dynamic option values
  /// \param[in] kv_len Number of elements in the keys and values arrays
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.20.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> sess,
        ffi.Pointer<ffi.Pointer<ffi.Char>> keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> values,
        ffi.Size kv_len,
      )
    >
  >
  SetEpDynamicOptions;

  /// \brief Release an OrtValueInfo instance if it was not added to an OrtGraph.
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtValueInfo> input)>
  >
  ReleaseValueInfo;

  /// \brief Release an OrtNode if it was not added to an OrtGraph.
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtNode> input)>
  >
  ReleaseNode;

  /// \brief Release an OrtGraph.
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtGraph> input)>
  >
  ReleaseGraph;

  /// \brief Release an OrtModel.
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtModel> input)>
  >
  ReleaseModel;

  /// \brief Get the value name from an OrtValueInfo instance.
  /// \param[in] value_info The OrtValueInfo instance.
  /// \param[out] name The name of the OrtValueInfo
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Pointer<ffi.Char>> name,
      )
    >
  >
  GetValueInfoName;

  /// \brief Get the type information from an OrtValueInfo instance.
  /// \param[in] value_info The OrtValueInfo instance.
  /// \param[out] type_info The type info of the OrtValueInfo
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Pointer<OrtTypeInfo>> type_info,
      )
    >
  >
  GetValueInfoTypeInfo;

  /// \brief Get the Model Editor API instance
  ///
  /// Get the Model Editor API instance to create a new model or augment an existing model.
  ///
  /// \return Model Editor API struct
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Pointer<OrtModelEditorApi> Function()>
  >
  GetModelEditorApi;

  /// \brief Create an OrtValue for a Tensor that uses pre-existing memory.
  ///
  /// ORT will take ownership of the memory and free it using the provided deleter when no longer in use.
  ///
  /// \param[in] deleter OrtAllocator instance that will be used to free the memory.
  /// Only the OrtAllocator:Info and OrtAllocator::Release functions are required.
  /// The OrtMemoryInfo returned by OrtAllocator::Info must match the location of p_data.
  /// \param[in] p_data Pointer to the memory that will be used by the Tensor. ORT will take ownership of the memory.
  /// \param[in] p_data_len Length of the memory in bytes.
  /// \param[in] shape Dimensions of the Tensor. All values should be > 0.
  /// \param[in] shape_len Number of dimensions in the shape array.
  /// \param[in] type Data type of the Tensor.
  /// \param[out] out Newly created ::OrtValue. Must be freed with OrtApi::ReleaseValue
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtAllocator> deleter,
        ffi.Pointer<ffi.Void> p_data,
        ffi.Size p_data_len,
        ffi.Pointer<ffi.Int64> shape,
        ffi.Size shape_len,
        ffi.UnsignedInt type,
        ffi.Pointer<ffi.Pointer<OrtValue>> out,
      )
    >
  >
  CreateTensorWithDataAndDeleterAsOrtValue;

  /// \brief sets load cancellation flag to abort session loading process.
  ///
  /// \param[in] options instance that was passed to the session at creation time.
  /// \param[in] cancel setting this to true after model loading process was initiated will
  /// attempt to cancel the loading process. If cancellation is successful, CreateSession()
  /// CreateSessionFromArray() or any other session creation API that take session options as an
  /// argument will return an OrtStatus indicating that session loading was canceled at user request,
  /// error code ORT_MODEL_LOAD_CANCELED.
  /// The APIs above would not return any valid Session instance. This is the best case effort and the result
  /// is not guaranteed. The session may have already been created and initialized
  /// before the cancellation request was issued.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Bool cancel,
      )
    >
  >
  SessionOptionsSetLoadCancellationFlag;

  /// \brief Get the Compile API instance.
  ///
  /// Get the Compile API instance to compile ONNX models. Execution providers that support compilation fuse a subgraph
  /// into an EPContext node that wraps a provider-specific binary representation of the subgraph.
  /// For more details about the EPContext design, refer to:
  /// \htmlonly
  /// <a href="https://onnxruntime.ai/docs/execution-providers/EP-Context-Design.html">EPContext design document.</a>
  /// \endhtmlonly
  ///
  /// \return Compile API struct instance.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Pointer<OrtCompileApi> Function()>
  >
  GetCompileApi;

  /// \brief Create an OrtKeyValuePairs instance.
  ///
  /// \param[out] out A pointer to a newly created OrtKeyValuePairs instance.
  ///
  /// \note Must be released by calling ReleaseKeyValuePairs.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<ffi.Pointer<OrtKeyValuePairs>> out)
    >
  >
  CreateKeyValuePairs;

  /// \brief Add a key-value pair to the OrtKeyValuePairs instance.
  ///
  /// If a pair with the same key already exists, it is overwritten.
  ///
  /// \param[in] kvps OrtKeyValuePairs instance.
  /// \param[in] key Key to be added.
  /// \param[in] value Value to be added.
  ///
  /// \note The `key` and `value` are copied internally.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtKeyValuePairs> kvps,
        ffi.Pointer<ffi.Char> key,
        ffi.Pointer<ffi.Char> value,
      )
    >
  >
  AddKeyValuePair;

  /// \brief Get the value associated with a key in the OrtKeyValuePairs instance.
  ///
  /// \param[in] kvps OrtKeyValuePairs instance.
  /// \param[in] key Key to be searched.
  ///
  /// \return The value associated with the key, or nullptr if the key does not exist.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(
        ffi.Pointer<OrtKeyValuePairs> kvps,
        ffi.Pointer<ffi.Char> key,
      )
    >
  >
  GetKeyValue;

  /// \brief Get all the key-value pairs from the OrtKeyValuePairs instance.
  ///
  /// \param[in] kvps OrtKeyValuePairs instance.
  /// \param[out] keys Array of keys from `kvps`.
  /// \param[out] values Array of values from `kvps`.
  /// \param[out] num_entries Number of entries in `keys` and `values`.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtKeyValuePairs> kvps,
        ffi.Pointer<ffi.Pointer<ffi.Pointer<ffi.Char>>> keys,
        ffi.Pointer<ffi.Pointer<ffi.Pointer<ffi.Char>>> values,
        ffi.Pointer<ffi.Size> num_entries,
      )
    >
  >
  GetKeyValuePairs;

  /// \brief Remove a key-value pair from the OrtKeyValuePairs instance.
  ///
  /// \param[in] kvps OrtKeyValuePairs instance.
  /// \param[in] key Key to be removed. No error if not found.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtKeyValuePairs> kvps,
        ffi.Pointer<ffi.Char> key,
      )
    >
  >
  RemoveKeyValuePair;

  /// \brief Release an OrtKeyValuePairs instance.
  ///
  /// \param[in] input OrtKeyValuePairs instance to be released.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtKeyValuePairs> input)>
  >
  ReleaseKeyValuePairs;

  /// \brief Register an execution provider library with ORT.
  ///
  /// The library must export 'CreateEpFactories' and 'ReleaseEpFactory' functions.
  /// See OrtEpApi for more details.
  ///
  /// \param[in] env The OrtEnv instance to register the library in.
  /// \param[in] registration_name The name to register the execution provider library under.
  /// \param[in] path The path to the execution provider library.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Char> registration_name,
        ffi.Pointer<ffi.Char> path,
      )
    >
  >
  RegisterExecutionProviderLibrary;

  /// \brief Unregister an execution provider library with ORT.
  ///
  /// ORT will call ReleaseEpFactory for all factories created by the library, and unload the library.
  ///
  /// You <b>MUST</b> ensure there are no Session instances using execution providers created by the library
  /// before calling this function.
  ///
  /// \param[in] env The OrtEnv instance to unregister the library from.
  /// \param[in] registration_name The name the execution provider library was registered under.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Char> registration_name,
      )
    >
  >
  UnregisterExecutionProviderLibrary;

  /// \brief Get the list of available OrtEpDevice instances.
  ///
  /// Each OrtEpDevice instance contains details of the execution provider and the device it will use.
  ///
  /// \param[in] env The OrtEnv instance to query.
  /// \param[out] ep_devices The OrtEpDevice instances that the execution provider will use.
  /// \param[out] num_ep_devices The number of OrtEpDevice instances returned.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Pointer<ffi.Pointer<OrtEpDevice>>> ep_devices,
        ffi.Pointer<ffi.Size> num_ep_devices,
      )
    >
  >
  GetEpDevices;

  /// \brief Append the execution provider that is responsible for the selected OrtEpDevice instances
  /// to the session options.
  ///
  /// \param[in] session_options Session options to add execution provider to.
  /// \param[in] env Environment that execution providers were registered with.
  /// \param[in] ep_devices One or more OrtEpDevice instances to create an execution provider for.
  /// Obtain from GetEpDevices. All OrtEpDevice instances must be from the same execution
  /// provider. It is only necessary to provide multiple OrtEpDevices if you want to use the
  /// same execution provider for multiple devices.
  /// e.g. the EP is capable of running on GPU and NPU.
  /// \param[in] num_ep_devices Number of OrtEpDevice instances.
  /// \param[in] ep_option_keys Optional keys to configure the execution provider.
  /// \param[in] ep_option_vals Optional values to configure the execution provider.
  /// \param[in] num_ep_options Number of execution provide options to add.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> session_options,
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Pointer<OrtEpDevice>> ep_devices,
        ffi.Size num_ep_devices,
        ffi.Pointer<ffi.Pointer<ffi.Char>> ep_option_keys,
        ffi.Pointer<ffi.Pointer<ffi.Char>> ep_option_vals,
        ffi.Size num_ep_options,
      )
    >
  >
  SessionOptionsAppendExecutionProvider_V2;

  /// \brief Set the execution provider selection policy for the session.
  ///
  /// Allows users to specify a device selection policy for automatic execution provider (EP) selection.
  /// If custom selection is required please use SessionOptionsSetEpSelectionPolicyDelegate instead.
  ///
  /// \param[in] session_options The OrtSessionOptions instance.
  /// \param[in] policy The device selection policy to use (see OrtExecutionProviderDevicePolicy).
  ///
  /// \since Version 1.22
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> session_options,
        ffi.UnsignedInt policy,
      )
    >
  >
  SessionOptionsSetEpSelectionPolicy;

  /// \brief Set the execution provider selection policy delegate for the session.
  ///
  /// Allows users to provide a custom device selection policy for automatic execution provider (EP) selection.
  ///
  /// \param[in] session_options The OrtSessionOptions instance.
  /// \param[in] delegate Delegate callback for custom selection.
  /// \param[in] delegate_state Optional state that will be passed to the delegate callback. nullptr if not required.
  ///
  /// \since Version 1.22
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> session_options,
        EpSelectionDelegate delegate,
        ffi.Pointer<ffi.Void> delegate_state,
      )
    >
  >
  SessionOptionsSetEpSelectionPolicyDelegate;

  /// \brief Get the hardware device type.
  ///
  /// \param[in] device The OrtHardwareDevice instance to query.
  /// \return The hardware device type.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.UnsignedInt Function(ffi.Pointer<OrtHardwareDevice> device)
    >
  >
  HardwareDevice_Type;

  /// \brief Get the hardware device's vendor identifier.
  ///
  /// \param[in] device The OrtHardwareDevice instance to query.
  /// \return The hardware device vendor identifier.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Uint32 Function(ffi.Pointer<OrtHardwareDevice> device)
    >
  >
  HardwareDevice_VendorId;

  /// \brief Get the hardware device's vendor name.
  ///
  /// \param[in] device The OrtHardwareDevice instance to query.
  /// \return The hardware device's vendor name.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtHardwareDevice> device)
    >
  >
  HardwareDevice_Vendor;

  /// \brief Get the hardware device's unique identifier.
  ///
  /// \param[in] device The OrtHardwareDevice instance to query.
  /// \return The device id.
  ///
  /// \note This is not a unique identifier. It identifies the hardware type when combined with vendor id.
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Uint32 Function(ffi.Pointer<OrtHardwareDevice> device)
    >
  >
  HardwareDevice_DeviceId;

  /// \brief Get hardware device metadata.
  ///
  /// \param[in] device The OrtHardwareDevice instance to query.
  /// \return An OrtKeyValuePairs instance containing the metadata for the device.
  /// Note: ORT owns the instance so the user must not call ReleaseKeyValuePairs with it.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtKeyValuePairs> Function(
        ffi.Pointer<OrtHardwareDevice> device,
      )
    >
  >
  HardwareDevice_Metadata;

  /// \brief Get the execution provider name.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to query.
  /// \return The execution provider name.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtEpDevice> ep_device)
    >
  >
  EpDevice_EpName;

  /// \brief Get the execution provider's vendor name.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to query.
  /// \return The execution provider's vendor name.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtEpDevice> ep_device)
    >
  >
  EpDevice_EpVendor;

  /// \brief Get the metadata for the OrtEpDevice.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to query.
  /// \return An OrtKeyValuePairs instance containing the metadata for the device.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtKeyValuePairs> Function(ffi.Pointer<OrtEpDevice> ep_device)
    >
  >
  EpDevice_EpMetadata;

  /// \brief Get the execution provider options for the OrtEpDevice.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to query.
  /// \return An OrtKeyValuePairs instance containing the execution provider options for the device.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtKeyValuePairs> Function(ffi.Pointer<OrtEpDevice> ep_device)
    >
  >
  EpDevice_EpOptions;

  /// \brief Get the OrtHardwareDevice instance for the OrtEpDevice.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to query.
  /// \return The OrtHardwareDevice instance for the device.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtHardwareDevice> Function(
        ffi.Pointer<OrtEpDevice> ep_device,
      )
    >
  >
  EpDevice_Device;

  /// \brief Get the OrtEpApi instance for implementing an execution provider.
  ///
  /// \since Version 1.22.
  external ffi.Pointer<ffi.NativeFunction<ffi.Pointer<OrtEpApi> Function()>>
  GetEpApi;

  /// \brief Compute total size in bytes of the tensor data contained in an OrtValue.
  ///
  /// Returns the total number of bytes used to store the tensor data. For numeric tensors,
  /// this is sizeof(element_type) * total_element_count. OrtValues that are not tensors or
  /// that are tensors that contain strings will cause an error to be returned.
  ///
  /// \param[in] ort_value OrtValue instance containing a tensor
  /// \param[out] size The total size of the tensor data in bytes
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> ort_value,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  GetTensorSizeInBytes;

  /// \brief Calls OrtAllocator::GetStats function
  ///
  /// Return a pointer to the OrtKeyValuePairs structure that contains the statistics of the allocator
  /// and the user should call OrtApi::ReleaseKeyValuePairs.
  ///
  /// NOTE: If the allocator does not implement this function, the OrtKeyValuePairs instance will be empty.
  ///
  /// \param[in] ort_allocator The allocator to get stats from
  /// \param[out] out A pointer to the OrtKeyValuePairs instance that contains the stats
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtAllocator> ort_allocator,
        ffi.Pointer<ffi.Pointer<OrtKeyValuePairs>> out,
      )
    >
  >
  AllocatorGetStats;

  /// \brief Create an ::OrtMemoryInfo
  ///
  /// \param[in] name Arbitrary name.
  /// \param[in] device_type Device type.
  /// \param[in] vendor_id PCI Vendor ID. Use 0 for a generic allocator (e.g. WebGPU).
  /// \param[in] device_id Device ID if there are multiple devices of the same type. e.g. 2 GPU devices.
  /// \param[in] mem_type Memory type. Use OrtDeviceMemoryType_DEFAULT for device memory, and
  /// OrtDeviceMemoryType_HOST_ACCESSIBLE (if applicable) for memory used to transfer between the
  /// device and the CPU. Use the device_type and device_id of the GPU/NPU that the memory is also
  /// accessible to.
  /// \param[in] alignment Alignment of the memory if required. Pass 0 for default alignment.
  /// \param[in] allocator_type Allocator type. If OrtAllocatorType::OrtArenaAllocator, the ORT arena will be used.
  /// Caveat: Support for OrtArenaAllocator is currently limited to usage of internal ORT
  /// allocators via CreateAllocator/CreateAndRegisterAllocator/CreateAndRegisterAllocatorV2.
  /// \param[out] out Newly created ::OrtMemoryInfo. Must be freed with OrtApi::ReleaseMemoryInfo
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> name,
        ffi.UnsignedInt device_type,
        ffi.Uint32 vendor_id,
        ffi.Int32 device_id,
        ffi.UnsignedInt mem_type,
        ffi.Size alignment,
        ffi.Int allocator_type,
        ffi.Pointer<ffi.Pointer<OrtMemoryInfo>> out,
      )
    >
  >
  CreateMemoryInfo_V2;

  /// \brief Get the device memory type from ::OrtMemoryInfo
  ///
  /// \param[in] ptr The OrtMemoryInfo instance to query.
  /// \return The device memory type.
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<ffi.UnsignedInt Function(ffi.Pointer<OrtMemoryInfo> ptr)>
  >
  MemoryInfoGetDeviceMemType;

  /// \brief Get the vendor id from ::OrtMemoryInfo
  ///
  /// \param[in] ptr The OrtMemoryInfo instance to query.
  /// \return The vendor id.
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Uint32 Function(ffi.Pointer<OrtMemoryInfo> ptr)>
  >
  MemoryInfoGetVendorId;

  /// \brief Get the OrtNode that produces the value represented by the given OrtValueInfo.
  /// Optionally returns the associated output index.
  ///
  /// \param[in] value_info The OrtValueInfo instance.
  /// \param[out] producer_node Output parameter set to the OrtNode that produces the OrtValueInfo.
  /// \param[out] producer_output_index Optional output parameter set to the OrtNode instance's output index
  /// that produces the value. Ignored if set to NULL.
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Pointer<OrtNode>> producer_node,
        ffi.Pointer<ffi.Size> producer_output_index,
      )
    >
  >
  ValueInfo_GetValueProducer;

  /// \brief Get the number of consumers of a value as a node input.
  ///
  /// Only nodes are considered "consumers" by this function. To check if an OrtValueInfo is a graph output,
  /// call ValueInfo_IsGraphOutput().
  ///
  /// A single OrtNode may use a single value for more than one input (e.g., Mul(x, x)), so the returned
  /// `num_consumers` may be larger than the number of unique OrtNode instances that consume the value.
  ///
  /// \param[in] value_info The OrtValueInfo instance.
  /// \param[out] num_consumers Output parameter set to the number of consumers of the value.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Size> num_consumers,
      )
    >
  >
  ValueInfo_GetValueNumConsumers;

  /// \brief Returns information (OrtNode and input index) for all consumer nodes that use the value as an input.
  ///
  /// Only nodes are considered "consumers" by this function.
  ///
  /// Caller provides 2 pre-allocated arrays that will be filled with the OrtNode and input index values.
  /// Use ValueInfo_GetValueNumConsumers() to get the number of consumers of the value.
  ///
  /// An OrtNode instance may appear multiple times if it uses the given value more than once.
  /// Example: For a node MulNode(x, x) that consumes the value 'x' twice, the following is returned:
  /// - nodes: [MulNode, MulNode]
  /// - input_indices: [0, 1]
  ///
  /// \param[in] value_info The OrtValueInfo instance.
  /// \param[out] nodes Pre-allocated array of size `num_consumers` that is filled with OrtNode instances.
  /// \param[out] input_indices Pre-allocated array of `num_consumers` elements that is filled
  /// with input indices. Index is set to -1 for an "implicit" input to a consumer node
  /// that contains a subgraph (e.g., If, Loop) with nodes that use the value internally.
  /// \param[in] num_consumers The size of the `consumer_nodes` and `consumer_input_indices` arrays.
  /// Typical usage sets this to the value of ValueInfo_GetValueNumConsumers().
  /// An error status is returned if `num_consumers` is less than the number of actual
  /// consumers.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Pointer<OrtNode>> nodes,
        ffi.Pointer<ffi.Int64> input_indices,
        ffi.Size num_consumers,
      )
    >
  >
  ValueInfo_GetValueConsumers;

  /// \brief Get the underlying initializer value, as an OrtValue, from the given OrtValueInfo.
  ///
  /// Sets the output parameter to NULL if the given OrtValueInfo does not represent an initializer.
  /// Does not return an error status in this case.
  ///
  /// Supports initializers defined in an outer scope (i.e., a parent graph).
  ///
  /// Supports initializers stored in an external file. For external initializers, ORT memory maps
  /// the initializer data on the first call to this function. If caller needs custom memory mapping,
  /// use ValueInfo_GetExternalInitializerInfo to get the location of the initializer data.
  ///
  /// \param[in] value_info The OrtValueInfo instance.
  /// \param[out] initializer_value Output parameter set to the initializer value or NULL. Do not cache the OrtValue
  /// as it is released when the owning OrtGraph is released.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Pointer<OrtValue>> initializer_value,
      )
    >
  >
  ValueInfo_GetInitializerValue;

  /// \brief Get information about an external initializer (e.g., filepath, file offset, byte size).
  ///
  /// Sets the output parameter `info` to NULL if the given OrtValueInfo does not represent an initializer
  /// with external data. In this case, a NULL status (non-error) is returned.
  ///
  /// \param[in] value_info The OrtValueInfo instance.
  /// \param[out] info Output parameter set to an OrtExternalInitializerInfo instance that can be used to query
  /// file path, file offset, etc. ORT sets this to NULL if the OrtValueInfo does not represent
  /// an external initializer.
  /// Must release with ReleaseExternalInitializerInfo.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Pointer<OrtExternalInitializerInfo>> info,
      )
    >
  >
  ValueInfo_GetExternalInitializerInfo;

  /// \brief Returns a boolean indicating if the given value is a required graph input.
  ///
  /// For ONNX IR version < 4, all graph inputs without a matching initializer are required.
  ///
  /// For ONNX IR version >=4, a graph input with a matching initializer is an optional graph input
  /// with the initializer serving as the default value.
  ///
  /// \param[in] value_info The OrtValueInfo instance representing the graph value.
  /// \param[out] is_required_graph_input Output parameter set to true if the graph value is a required graph input.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Bool> is_required_graph_input,
      )
    >
  >
  ValueInfo_IsRequiredGraphInput;

  /// \brief Returns a boolean indicating if the given value is an optional graph input.
  ///
  /// Optional graph inputs were introduced in ONNX IR version 4. For ONNX IR version >=4, a graph input with a
  /// matching initializer is an optional graph input with the initializer serving as the default value.
  /// The matching initializer is also known as a non-constant initializer.
  ///
  /// \param[in] value_info The OrtValueInfo instance representing the graph value.
  /// \param[out] is_optional_graph_input Output parameter set to true if the graph value is an optional graph input.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Bool> is_optional_graph_input,
      )
    >
  >
  ValueInfo_IsOptionalGraphInput;

  /// \brief Returns a boolean indicating if the given value is a graph output.
  ///
  /// \param[in] value_info The OrtValueInfo instance representing the graph value.
  /// \param[out] is_graph_output Output parameter set to true if the graph value is a graph output.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Bool> is_graph_output,
      )
    >
  >
  ValueInfo_IsGraphOutput;

  /// \brief Returns a boolean indicating if the given value is a constant initializer.
  ///
  /// For ONNX IR version < 4, all initializers are constant.
  ///
  /// For ONNX IR version >=4, an initializer that serves as the default value for a matching graph input is not a
  /// constant initializer.
  ///
  /// \param[in] value_info The OrtValueInfo instance representing the graph value.
  /// \param[out] is_constant_initializer Output parameter set to true if the graph value is a constant initializer.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Bool> is_constant_initializer,
      )
    >
  >
  ValueInfo_IsConstantInitializer;

  /// \brief Returns a boolean indicating if the given value is defined in an outer scope.
  ///
  /// Certain operator types (e.g., If and Loop) contain nested subgraphs. This function enables
  /// determining whether a value is defined in a parent node's graph.
  ///
  /// \param[in] value_info The OrtValueInfo instance representing the graph value.
  /// \param[out] is_from_outer_scope Output parameter set to true if the value is defined in an outer
  /// scope (i.e., a parent graph).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValueInfo> value_info,
        ffi.Pointer<ffi.Bool> is_from_outer_scope,
      )
    >
  >
  ValueInfo_IsFromOuterScope;

  /// \brief Returns a graph's name.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] graph_name Output parameter set to the graph's name.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<ffi.Char>> graph_name,
      )
    >
  >
  Graph_GetName;

  /// \brief Get the filepath to the model from which an OrtGraph is constructed.
  ///
  /// \note The model's filepath is empty if the filepath is unknown, such as when the model is loaded from bytes
  /// via CreateSessionFromArray.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] model_path Output parameter set to the model's null-terminated filepath.
  /// Set to an empty path string if unknown.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<ffi.Char>> model_path,
      )
    >
  >
  Graph_GetModelPath;

  /// \brief Returns the ONNX IR version.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] onnx_ir_version Output parameter set to the ONNX IR version.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Int64> onnx_ir_version,
      )
    >
  >
  Graph_GetOnnxIRVersion;

  /// \brief Returns the number of operator sets that the graph's model uses.
  ///
  /// \note An operator set is uniquely identified by the (domain, opset_version) pair. All models must have at
  /// least one entry that specifies which entry of the ONNX operator set is used. The ONNX domain is represented by
  /// an empty string.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] num_operator_sets Output parameter set to the number of operator sets that the graph's model uses.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Size> num_operator_sets,
      )
    >
  >
  Graph_GetNumOperatorSets;

  /// \brief Returns the operator sets that the graph's model uses.
  ///
  /// \note An operator set is uniquely identified by the (domain, opset_version) pair. All models must have at
  /// least one entry that specifies which entry of the ONNX operator set is used. The ONNX domain is represented by
  /// an empty string.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] domains Pre-allocated array of `num_operator_sets` elements that is filled with
  /// null-terminated domain names.
  /// \param[out] opset_versions Pre-allocated array of `num_operator_sets` elements that is filled with
  /// the opset version of the corresponding domain in the `domains` array.
  /// \param[in] num_operator_sets The size of the `domains` and `opset_versions` arrays.
  /// Typical usage sets this to the result of Graph_GetNumOperatorSets().
  /// An error status is returned if `num_operator_sets` is less than the actual number
  /// of operator sets.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<ffi.Char>> domains,
        ffi.Pointer<ffi.Int64> opset_versions,
        ffi.Size num_operator_sets,
      )
    >
  >
  Graph_GetOperatorSets;

  /// \brief Returns the number of graph inputs.
  ///
  /// \note The count includes initializers that are included in the list of graph inputs.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] num_inputs Output parameter set to the number of graph inputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Size> num_inputs,
      )
    >
  >
  Graph_GetNumInputs;

  /// \brief Returns the graph's inputs as OrtValueInfo instances.
  ///
  /// \note The result includes initializers that are included in the list of graph inputs.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] inputs Pre-allocated array of `num_inputs` elements that is filled with the graph's inputs.
  /// \param[in] num_inputs The size of the `inputs` array.
  /// Typical usage sets this to the result of Graph_GetNumInputs(). An error status is
  /// returned if `num_inputs` is less than the number of graph inputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> inputs,
        ffi.Size num_inputs,
      )
    >
  >
  Graph_GetInputs;

  /// \brief Returns the number of graph outputs.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] num_outputs Output parameter set to the number of graph outputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Size> num_outputs,
      )
    >
  >
  Graph_GetNumOutputs;

  /// \brief Returns the graph's outputs as OrtValueInfo instances.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] outputs Pre-allocated array of `num_outputs` elements that is filled with the graph's outputs.
  /// \param[in] num_outputs The size of the `outputs` array.
  /// Typical usage sets this to the result of Graph_GetNumOutputs(). An error status is
  /// returned if `num_outputs` is less than the number of graph outputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> outputs,
        ffi.Size num_outputs,
      )
    >
  >
  Graph_GetOutputs;

  /// \brief Returns the number of graph initializers.
  ///
  /// Counts constant and non-constant initializers.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] num_initializers Output parameter set to the number of graph initializers.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Size> num_initializers,
      )
    >
  >
  Graph_GetNumInitializers;

  /// \brief Returns the graph's initializers as OrtValueInfo instances.
  ///
  /// Includes constant and non-constant initializers.
  ///
  /// For ONNX IR version < 4, all initializers are constant.
  ///
  /// For ONNX IR version >= 4, an initializer with a name that matches a graph input is considered a
  /// non-constant initializer.
  ///
  /// Call ValueInfo_GetInitializerValue to get the initializer's data.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] initializers Pre-allocated array of `num_outputs` elements that is filled with the initializers.
  /// \param[in] num_initializers The size of the `initializers` array. Typical usage sets this to the
  /// result of Graph_GetNumInitializers(). An error status is returned if
  /// `num_initializers` is less than the number of graph initializers.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> initializers,
        ffi.Size num_initializers,
      )
    >
  >
  Graph_GetInitializers;

  /// \brief Returns the number of graph nodes.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] num_nodes Output parameter set to the number of graph nodes.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Size> num_nodes,
      )
    >
  >
  Graph_GetNumNodes;

  /// \brief Returns the graph's nodes as OrtNode instances.
  ///
  /// The nodes are sorted using a stable topological ordering. Callers are responsible for maintaining their
  /// own node ordering if a different order is required.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] nodes Pre-allocated array of `num_nodes` elements that is filled with the graph's nodes.
  /// \param[in] num_nodes The size of the `nodes` array. Typical usage sets this to the
  /// result of Graph_GetNumNodes(). An error status is returned if
  /// `num_nodes` is less than the number of graph nodes.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<OrtNode>> nodes,
        ffi.Size num_nodes,
      )
    >
  >
  Graph_GetNodes;

  /// \brief Get the parent node for the given graph, if any exists.
  ///
  /// Certain operator types (e.g., If and Loop) contain nested subgraphs. This function enables
  /// access to the parent node (e.g., the If and Loop node) from a nested subgraph.
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] node Output parameter that is set to the graph's parent node.
  /// Set to NULL if a parent node does not exist (e.g., for a top-level graph).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<OrtNode>> node,
      )
    >
  >
  Graph_GetParentNode;

  /// \brief Returns an OrtGraph that contains a subset of nodes in the source OrtGraph.
  ///
  /// \note The lifetime of "dst_graph" is tied to that of "src_graph", as they both internally reference
  /// the same underlying graph. "dst_graph" preserves the input order of "src_graph", and
  /// its output order corresponds to the outputs produced by the nodes in "nodes" with the given order.
  ///
  /// \param[in] src_graph The source OrtGraph instance.
  /// \param[in] nodes A subset of the nodes/OrtNodes in 'graph'.
  /// \param[in] num_nodes Number of nodes.
  /// \param[out] dst_graph An OrtGraph created from a given set of nodes. Must be released by calling ReleaseGraph.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> src_graph,
        ffi.Pointer<ffi.Pointer<OrtNode>> nodes,
        ffi.Size num_nodes,
        ffi.Pointer<ffi.Pointer<OrtGraph>> dst_graph,
      )
    >
  >
  Graph_GetGraphView;

  /// \brief Returns a node's identifier.
  ///
  /// The node's identifier is only unique in the node's parent graph. Different nested subgraphs
  /// (e.g., subgraphs contained by If and Loop nodes) may reuse identifiers.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] node_id Output parameter set to the node's identifier.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Size> node_id,
      )
    >
  >
  Node_GetId;

  /// \brief Returns a node's name. Can be an empty string.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] node_name Output parameter set to the node's name.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<ffi.Char>> node_name,
      )
    >
  >
  Node_GetName;

  /// \brief Returns a node's operator type (e.g., "Conv").
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] operator_type Output parameter set to the name of the node's operator type.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<ffi.Char>> operator_type,
      )
    >
  >
  Node_GetOperatorType;

  /// \brief Returns a node's domain name.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] domain_name Output parameter set to the node's domain name.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<ffi.Char>> domain_name,
      )
    >
  >
  Node_GetDomain;

  /// \brief Get the opset version in which the given node's operator type was first defined.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] since_version The opset version in which the node's operator type was first defined.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Int> since_version,
      )
    >
  >
  Node_GetSinceVersion;

  /// \brief Returns the number of node inputs.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] num_inputs Output parameter set to the number of node inputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Size> num_inputs,
      )
    >
  >
  Node_GetNumInputs;

  /// \brief Returns the node's inputs as OrtValueInfo instances.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] inputs Pre-allocated array of `num_inputs` elements that is filled with the node's inputs.
  /// \param[in] num_inputs The size of the `inputs` array.
  /// Typical usage sets this to the result of Node_GetNumInputs(). An error status is
  /// returned if `num_inputs` is less than the number of node inputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> inputs,
        ffi.Size num_inputs,
      )
    >
  >
  Node_GetInputs;

  /// \brief Returns the number of node outputs.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] num_outputs Output parameter set to the number of node outputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Size> num_outputs,
      )
    >
  >
  Node_GetNumOutputs;

  /// \brief Returns the node's outputs as OrtValueInfo instances.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] outputs Pre-allocated array of `num_outputs` elements that is filled with the node's outputs.
  /// \param[in] num_outputs The size of the `outputs` array.
  /// Typical usage sets this to the result of Node_GetNumOutputs(). An error status is
  /// returned if `num_outputs` is less than the number of node outputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> outputs,
        ffi.Size num_outputs,
      )
    >
  >
  Node_GetOutputs;

  /// \brief Returns the number of node implicit inputs.
  ///
  /// Certain operator types (e.g., If and Loop) contain nested subgraphs. The internal nodes within the nested subgraphs
  /// may use values from the outer scope. Those "outer scope" values are considered implicit inputs to the node that
  /// contains the subgraphs (e.g., the If or Loop node).
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] num_implicit_inputs Output parameter set to the number of node implicit inputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Size> num_implicit_inputs,
      )
    >
  >
  Node_GetNumImplicitInputs;

  /// \brief Get the implicit inputs, as OrtValueInfo instances, that are used within the given node's subgraphs.
  ///
  /// \note Only certain operator types (e.g., If and Loop) contain nested subgraphs.
  /// The internal nodes within the nested subgraphs may use values from the outer scope. Those "outer scope" values
  /// are considered implicit inputs to the node that contains the subgraphs (e.g., the If or Loop node).
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] implicit_inputs Pre-allocated array of `num_implicit_inputs` elements that is filled the node's
  /// implicit inputs.
  /// \param[in] num_implicit_inputs The size of the `implicit_inputs` array. Typical usage sets this to the result
  /// of Node_GetNumImplicitInputs(). An error status is returned if
  /// `num_implicit_inputs` is less than the number of node implicit inputs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<OrtValueInfo>> implicit_inputs,
        ffi.Size num_implicit_inputs,
      )
    >
  >
  Node_GetImplicitInputs;

  /// \brief Returns the number of node attributes.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] num_attributes Output parameter set to the number of node attributes.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Size> num_attributes,
      )
    >
  >
  Node_GetNumAttributes;

  /// \brief Returns a node's attributes as OrtOpAttr instances.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] attributes Pre-allocated array of `num_attributes` elements that is filled with the node's attributes.
  /// \param[in] num_attributes The size of the `num_attributes` array.
  /// Typical usage sets this to the result of Node_GetNumAttributes(). An error status is
  /// returned if `num_attributes` is less than the number of node attributes.
  ///
  /// \note ONNX Runtime automatically sets optional (unset) attributes to their default values if the default value
  /// is a constant expression that does not depend on other tensor/model characteristics. Conv's 'kernel_shape'
  /// attribute is an example of an optional attribute that does not have a constant default value. This function
  /// does not provide any unset optional attributes without a constant default value.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<OrtOpAttr>> attributes,
        ffi.Size num_attributes,
      )
    >
  >
  Node_GetAttributes;

  /// \brief Gets the OrtNode's attribute as OrtOpAttr by name.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[in] attribute_name The name of the attribute
  /// \param[out] attribute Output parameter set to the OrtOpAttr instance if an attribute by the given name exists.
  /// For an unset optional attribute, `attribute` is set to NULL and a non-error status is
  /// returned. For an invalid attribute name, `attribute` is set to NULL and an error status with
  /// code ORT_NOT_FOUND is returned.
  ///
  /// \note ONNX Runtime automatically sets optional (unset) attributes to their default values if the default value
  /// is a constant expression that does not depend on other tensor/model characteristics. Conv's 'kernel_shape'
  /// attribute is an example of an optional attribute that does not have a constant default value. This function
  /// does not provide any unset optional attributes without a constant default value.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Char> attribute_name,
        ffi.Pointer<ffi.Pointer<OrtOpAttr>> attribute,
      )
    >
  >
  Node_GetAttributeByName;

  /// \brief Get the OrtNode's 'TENSOR' attribute as an OrtValue.
  ///
  /// \param[in] attribute The OrtOpAttr instance.
  /// \param[out] attr_tensor If successful, contains the 'TENSOR' attribute as a newly created OrtValue.
  /// Must be freed with OrtApi::ReleaseValue.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtOpAttr> attribute,
        ffi.Pointer<ffi.Pointer<OrtValue>> attr_tensor,
      )
    >
  >
  OpAttr_GetTensorAttributeAsOrtValue;

  /// \brief Get the attribute type as OrtOpAttrType from an OrtOpAttr.
  ///
  /// \param[in] attribute The OrtOpAttr instance.
  /// \param[out] type Output the attribute type as OrtOpAttrType.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtOpAttr> attribute,
        ffi.Pointer<ffi.UnsignedInt> type,
      )
    >
  >
  OpAttr_GetType;

  /// \brief Get the attribute name from an OrtOpAttr.
  ///
  /// \param[in] attribute The OrtOpAttr instance.
  /// \param[out] name Output parameter set to the attribute's name. The name is a null-terminated string.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtOpAttr> attribute,
        ffi.Pointer<ffi.Pointer<ffi.Char>> name,
      )
    >
  >
  OpAttr_GetName;

  /// \brief Returns the number of subgraphs contained by the given node.
  ///
  /// \note Only certain operator types (e.g., If and Loop) contain nested subgraphs.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] num_subgraphs Output parameter set to the number of node subgraphs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Size> num_subgraphs,
      )
    >
  >
  Node_GetNumSubgraphs;

  /// \brief Get the subgraphs, as OrtGraph instances, contained by the given node.
  ///
  /// \note Only certain operator types (e.g., If and Loop) contain nested subgraphs. ONNX nodes store subgraphs in
  /// their attributes, however, this function must be used to obtain subgraphs from an OrtNode.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] subgraphs Pre-allocated array of `num_subgraphs` elements that is filled with the node's subgraphs.
  /// \param[in] num_subgraphs The size of the `num_subgraphs` array.
  /// Typical usage sets this to the result of Node_GetNumSubgraphs(). An error status is
  /// returned if `num_subgraphs` is less than the number of node subgraphs.
  /// \param[out] attribute_names Optional pre-allocated array of `num_subgraphs` elements that is filled with the
  /// attribute names that correspond to the subgraphs. Ignored if set to NULL.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<OrtGraph>> subgraphs,
        ffi.Size num_subgraphs,
        ffi.Pointer<ffi.Pointer<ffi.Char>> attribute_names,
      )
    >
  >
  Node_GetSubgraphs;

  /// \brief Get the node's parent OrtGraph instance.
  ///
  /// Can return NULL if the OrtNode was created without an owning graph.
  /// In another case, this API may also return NULL if `node` is obtained by calling Graph_GetParentNode()
  /// on an OrtGraph that is a subgraph of a control-flow op, and the parent graph has not been created yet,
  /// for example during ORT's GetCapability() when processing the innermost subgraph.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] graph Output parameter set to the node's OrtGraph. Can be set to NULL
  /// if the node is not currently contained by a graph.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<OrtGraph>> graph,
      )
    >
  >
  Node_GetGraph;

  /// \brief Returns the execution provider name that this node is assigned to run on.
  /// Returns NULL if the node has not been assigned to any execution provider yet.
  /// For plugin execution providers, the name is the one returned by OrtEp::GetName.
  ///
  /// \param[in] node The OrtNode instance.
  /// \param[out] out Output execution provider type and can be NULL if node has not been assigned.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtNode> node,
        ffi.Pointer<ffi.Pointer<ffi.Char>> out,
      )
    >
  >
  Node_GetEpName;

  /// \brief Release an OrtExternalInitializerInfo instance.
  ///
  /// \param[in] input OrtExternalInitializerInfo instance to be released.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtExternalInitializerInfo> input)
    >
  >
  ReleaseExternalInitializerInfo;

  /// \brief Get the relative path to the file that stores the initializer's data.
  ///
  /// \note The path is relative to the filesystem directory where the ONNX model was stored.
  /// Caller can use Graph_GetModelPath to get the model's full path and construct the absolute path to the
  /// external initializer file if necessary.
  ///
  /// \param[in] info The OrtExternalInitializerInfo instance.
  /// \return The relative path to the file that stores the initializer's data. Do NOT free this pointer.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(
        ffi.Pointer<OrtExternalInitializerInfo> info,
      )
    >
  >
  ExternalInitializerInfo_GetFilePath;

  /// \brief Get the byte offset within the file where the initializer's data is stored.
  ///
  /// \param[in] info The OrtExternalInitializerInfo instance.
  /// \return The byte offset where the initializer's data is stored within the file.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Int64 Function(ffi.Pointer<OrtExternalInitializerInfo> info)
    >
  >
  ExternalInitializerInfo_GetFileOffset;

  /// \brief Get the size in bytes of the initializer's data within the file.
  ///
  /// \param[in] info The OrtExternalInitializerInfo instance.
  /// \return The size in bytes of the initializer's data within the file.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Size Function(ffi.Pointer<OrtExternalInitializerInfo> info)
    >
  >
  ExternalInitializerInfo_GetByteSize;

  /// \brief Get a run configuration entry.
  ///
  /// If a run configuration entry with key `config_key` doesn't exist, `config_value` will be set to NULL.
  ///
  /// `config_key`s are defined in onnxruntime_run_options_config_keys.h.
  ///
  /// \param[in] options The OrtRunOptions instance.
  /// \param[in] config_key The configuration entry key. A null-terminated string.
  /// \return The configuration entry value. Either a null-terminated string if the entry was found. nullptr otherwise.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Pointer<ffi.Char> config_key,
      )
    >
  >
  GetRunConfigEntry;

  /// \brief Get the OrtMemoryInfo for the device.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to query.
  /// \param[in] memory_type The memory type to return.
  /// \return A pointer to the OrtMemoryInfo for the device. This may be nullptr if not set.
  /// If memory_type is OrtDeviceMemoryType_DEFAULT and nullptr is returned the EP uses CPU memory.
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<OrtMemoryInfo> Function(
        ffi.Pointer<OrtEpDevice> ep_device,
        ffi.UnsignedInt memory_type,
      )
    >
  >
  EpDevice_MemoryInfo;

  /// \brief Create/replace a shared allocator for the OrtEpDevice in the OrtEnv.
  ///
  /// OrtEpDevice maps to the EP factory, and the factory provides the allocator implementation.
  ///
  /// Both OrtDeviceMemoryType_DEFAULT and OrtDeviceMemoryType_HOST_ACCESSIBLE are optional for an EP to provide.
  /// It is EP implementation dependent as to what is available.
  ///
  /// If a shared allocator already exists for the OrtEpDevice and OrtDeviceMemoryType, it is replaced. This allows
  /// changing the shared allocator configuration from the default. e.g. adding an arena.
  ///
  /// \param[in] env The OrtEnv instance to create the shared allocator in.
  /// \param[in] ep_device The OrtEpDevice instance to create the shared allocator for.
  /// \param[in] mem_type The memory type to use for the shared allocator.
  /// \param[in] allocator_type The type of allocator to create. Only OrtDeviceAllocator is valid currently.
  /// \param[in] allocator_options Optional key-value pairs to configure the allocator. If arena based, see
  /// include/onnxruntime/core/framework/allocator.h for the keys and values that can be
  /// used.
  /// \param[out] allocator A pointer to the created shared allocator. Owned by the OrtEnv instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtEpDevice> ep_device,
        ffi.UnsignedInt mem_type,
        ffi.Int allocator_type,
        ffi.Pointer<OrtKeyValuePairs> allocator_options,
        ffi.Pointer<ffi.Pointer<OrtAllocator>> allocator,
      )
    >
  >
  CreateSharedAllocator;

  /// \brief Get a shared allocator from the OrtEnv.
  ///
  /// By default there is a shared allocator created for all OrtEpDevice instances, so if you get the OrtMemoryInfo
  /// from the OrtEpDevice using EpDevice_MemoryInfo a shared allocator is guaranteed to exist.
  ///
  /// This will also match and return custom allocators added with RegisterAllocator.
  ///
  /// It is not an error to not find a matching allocator.
  ///
  /// \param[in] env The OrtEnv instance to get the shared allocator from.
  /// \param[in] mem_info The OrtMemoryInfo instance to get the shared allocator for.
  /// \param[out] allocator A pointer to the shared allocator, or nullptr if no shared allocator exists for
  /// the given memory info.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtMemoryInfo> mem_info,
        ffi.Pointer<ffi.Pointer<OrtAllocator>> allocator,
      )
    >
  >
  GetSharedAllocator;

  /// \brief Release a shared allocator from the OrtEnv for the OrtEpDevice and memory type.
  ///
  /// This will release the shared allocator for the given OrtEpDevice and memory type.
  /// If no shared allocator exists, this is a no-op.
  ///
  /// \param[in] env The OrtEnv instance to release the shared allocator from.
  /// \param[in] ep_device The OrtEpDevice instance to release the shared allocator for.
  /// \param[in] mem_type The memory type of the shared allocator to release.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<OrtEpDevice> ep_device,
        ffi.UnsignedInt mem_type,
      )
    >
  >
  ReleaseSharedAllocator;

  /// \brief Get a const pointer to the raw data inside a tensor
  ///
  /// Used to read the internal tensor data directly.
  /// \note The returned pointer is valid until the OrtValue is destroyed.
  ///
  /// \param[in] value A tensor type (string tensors are not supported)
  /// \param[out] out Filled in with a pointer to the internal storage
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.Pointer<ffi.Void>> out,
      )
    >
  >
  GetTensorData;

  /// \brief Get Session configuration entries.
  ///
  /// \param[in] options The session options.
  /// \param[out] out A pointer to a newly created OrtKeyValuePairs instance.
  ///
  /// An OrtKeyValuePairs instance containing all session configuration entries.
  /// Note: the user should call OrtApi::ReleaseKeyValuePairs.
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSessionOptions> options,
        ffi.Pointer<ffi.Pointer<OrtKeyValuePairs>> out,
      )
    >
  >
  GetSessionOptionsConfigEntries;

  /// \brief Get the OrtMemoryInfo for each input of the session.
  ///
  /// The memory info can be used to determine where the input tensors are required.
  ///
  /// The session must be fully initialized before calling this function as the input locations are not known until
  /// this has occurred.
  ///
  /// \param[in] session The OrtSession instance.
  /// \param[out] inputs_memory_info Pre-allocated array of size `num_inputs` that will be filled with the
  /// OrtMemoryInfo* value for each input.
  /// The order is the same as returned by SessionGetInputName.
  /// \param[in] num_inputs The number of inputs in the session. Must match SessionGetInputCount.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Pointer<OrtMemoryInfo>> inputs_memory_info,
        ffi.Size num_inputs,
      )
    >
  >
  SessionGetMemoryInfoForInputs;

  /// \brief Get the OrtMemoryInfo for each output of the session.
  ///
  /// The memory info can be used to determine the device the output tensors are produced on.
  /// The user can pre-allocate an OrtValue using this information or use IOBinding to keep the data on the device.
  /// ORT will copy the output to CPU otherwise.
  ///
  /// The session must be fully initialized before calling this function as the output locations are not known until
  /// this has occurred.
  ///
  /// \param[in] session The OrtSession instance.
  /// \param[out] outputs_memory_info Pre-allocated array of size `num_outputs` that will be filled with
  /// OrtMemoryInfo* values for each output.
  /// The order is the same as returned by SessionGetOutputName.
  /// \param[in] num_outputs The number of outputs in the session. Must match SessionGetOutputCount.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Pointer<OrtMemoryInfo>> outputs_memory_info,
        ffi.Size num_outputs,
      )
    >
  >
  SessionGetMemoryInfoForOutputs;

  /// \brief Get the OrtEpDevice (if available) for each input of the session.
  ///
  /// An OrtEpDevice will be available if auto EP selection is enabled by calling
  /// SessionOptionsSetEpSelectionPolicy or SessionOptionsSetEpSelectionPolicyDelegate,
  /// or if the OrtEpDevice was manually added to the session using SessionOptionsAppendExecutionProvider_V2.
  ///
  /// If an OrtEpDevice is not available for the input a nullptr is returned.
  ///
  /// The returned OrtEpDevice can be used to create an OrtSyncStream via CreateSyncStreamForEpDevice to asynchronously
  /// provide input to the inference session Run.
  ///
  /// The session must be fully initialized before calling this function as the assigned EPs are not known until
  /// this has occurred.
  ///
  /// \param[in] session The OrtSession instance.
  /// \param[out] inputs_ep_devices Pre-allocated array of size `num_inputs` that will be filled with
  /// OrtEpDevice* values for each input.
  /// The order is the same as returned by SessionGetInputName.
  /// \param[in] num_inputs The number of inputs in the session. Must match SessionGetInputCount.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Pointer<OrtEpDevice>> inputs_ep_devices,
        ffi.Size num_inputs,
      )
    >
  >
  SessionGetEpDeviceForInputs;

  /// \brief Create an OrtSyncStream for the given OrtEpDevice.
  ///
  /// The OrtSyncStream can be used to enable asynchronous operations.
  /// e.g. async usage of CopyTensors to provide input to an OrtSession Run call.
  ///
  /// An error code of ORT_NOT_IMPLEMENTED will be returned if the EP does not support OrtSyncStream.
  ///
  /// \param[in] ep_device The OrtEpDevice instance to create the sync stream for.
  /// \param[in] stream_options Options for OrtSyncStream creation. May be nullptr.
  /// \param[out] stream Output parameter set to the created OrtSyncStream instance.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpDevice> ep_device,
        ffi.Pointer<OrtKeyValuePairs> stream_options,
        ffi.Pointer<ffi.Pointer<OrtSyncStream>> stream,
      )
    >
  >
  CreateSyncStreamForEpDevice;

  /// \brief Get the native handle of the sync stream.
  ///
  /// This returns the native handle for the stream. e.g. cudaStream_t for CUDA streams.
  ///
  /// \param[in] stream The OrtSyncStream instance to get the handle from.
  ///
  /// \returns The native handle of the stream.
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Void> Function(ffi.Pointer<OrtSyncStream> stream)
    >
  >
  SyncStream_GetHandle;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<OrtSyncStream> input)>
  >
  ReleaseSyncStream;

  /// \brief Copy OrtValue instances containing Tensors between devices.
  ///
  /// The overall copy must be between a single source device and a single destination device. i.e.
  /// - all src_tensors must have matching OrtMemoryInfo,
  /// - all dst_tensors must have matching OrtMemoryInfo.
  ///
  /// OrtValue instances can be created by:
  /// - Use GetSharedAllocator to get the shared allocator for the OrtMemoryInfo if you need to allocate memory
  /// on the device.
  /// - Use CreateTensorAsOrtValue, CreateTensorWithDataAsOrtValue or CreateTensorWithDataAndDeleterAsOrtValue
  /// to create an OrtValue containing a tensor depending on whether you have existing data or not, and whether
  /// you want ORT to free the existing data once it is done with the OrtValue.
  ///
  /// \param[in] env The OrtEnv instance to use. The data transfer implementation is provided by an execution provider
  /// that is registered in this OrtEnv.
  /// \param[in] src_tensors Array of OrtValue instances containing the source tensors to copy.
  /// \param[in] dst_tensors Array of OrtValue instances to copy the source tensors to.
  /// \param[in] stream Optional OrtSyncStream that can be used to perform the copy asynchronously. May be nullptr.
  /// \param[in] num_tensors The number of tensors to copy. The size of `src_tensors` and `dst_tensors` must match.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Pointer<OrtValue>> src_tensors,
        ffi.Pointer<ffi.Pointer<OrtValue>> dst_tensors,
        ffi.Pointer<OrtSyncStream> stream,
        ffi.Size num_tensors,
      )
    >
  >
  CopyTensors;

  /// \brief Get ::OrtModelMetadata from an ::OrtGraph
  ///
  /// \param[in] graph The OrtGraph instance.
  /// \param[out] out Newly created ::OrtModelMetadata. Must be freed using OrtApi::ReleaseModelMetadata.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtGraph> graph,
        ffi.Pointer<ffi.Pointer<OrtModelMetadata>> out,
      )
    >
  >
  Graph_GetModelMetadata;

  /// \brief Validate a compiled model's compatibility information for one or more EP devices.
  ///
  /// \param[in] ep_devices The EP devices to validate against (e.g., from GetEpDevices).
  /// All devices must belong to the same execution provider.
  /// \param[in] num_ep_devices The number of EP devices provided.
  /// \param[in] compatibility_info The compatibility info string produced when the model was compiled.
  /// \param[out] out_status The resulting compatibility status for the EP devices.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Pointer<OrtEpDevice>> ep_devices,
        ffi.Size num_ep_devices,
        ffi.Pointer<ffi.Char> compatibility_info,
        ffi.Pointer<ffi.UnsignedInt> out_status,
      )
    >
  >
  GetModelCompatibilityForEpDevices;

  /// \brief Creates an OrtExternalInitializerInfo instance.
  ///
  /// \param[in] filepath The relative path to the file that stores the initializer's data. ORT copies this path string.
  /// \param[in] file_offset The byte offset where the initializer's data is stored within the file.
  /// \param[in] byte_size The size in bytes of the initializer's data within the file.
  /// \param[out] out Output parameter set to the new OrtExternalInitializerInfo instance.
  /// Must be released by calling ReleaseExternalInitializerInfo().
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.23.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> filepath,
        ffi.Int64 file_offset,
        ffi.Size byte_size,
        ffi.Pointer<ffi.Pointer<OrtExternalInitializerInfo>> out,
      )
    >
  >
  CreateExternalInitializerInfo;

  /// @}
  ///   /** \brief Fetch whether the tensor has shape information.
  ///    * \param[in] info The OrtTensorTypeAndShapeInfo instance.
  ///    * \return true if the tensor has shape information, false otherwise.
  ///    *
  ///    * \since Version 1.24
  ///    */
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Bool Function(ffi.Pointer<OrtTensorTypeAndShapeInfo> info)
    >
  >
  TensorTypeAndShape_HasShape;

  /// \brief Get all config entries from ::OrtKernelInfo.
  ///
  /// Gets all configuration entries from the ::OrtKernelInfo object as key-value pairs.
  /// Config entries are set on the ::OrtSessionOptions and are accessible in custom operator kernels.
  ///
  /// Used in the CreateKernel callback of an OrtCustomOp to access all session configuration entries
  /// during kernel construction.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[out] out A pointer to a newly created OrtKeyValuePairs instance containing all config entries.
  /// Note: the user should call OrtApi::ReleaseKeyValuePairs.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Pointer<OrtKeyValuePairs>> out,
      )
    >
  >
  KernelInfo_GetConfigEntries;

  /// \brief Get the graph node's operator domain from ::OrtKernelInfo.
  ///
  /// If `out` is nullptr, the value of `size` is set to the size of the operator domain
  /// string (including null-terminator), and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the string's size and `out` is not nullptr,
  /// the value of `size` is set to the true size of the string (including null-terminator),
  /// the provided memory is filled with the string's contents, and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual string's size and `out`
  /// is not nullptr, the value of `size` is set to the true size of the string
  /// and a failure status with error code ORT_INVALID_ARGUMENT is returned.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[out] out Memory location into which to write the UTF-8 null-terminated string representing the
  /// operator domain.
  /// \param[in,out] size Pointer to the size of the `out` buffer. See above comments for details.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> out,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  KernelInfo_GetOperatorDomain;

  /// \brief Get the graph node's operator type from ::OrtKernelInfo.
  ///
  /// If `out` is nullptr, the value of `size` is set to the size of the operator type
  /// string (including null-terminator), and a success status is returned.
  ///
  /// If the `size` parameter is greater than or equal to the string's size and `out` is not nullptr,
  /// the value of `size` is set to the true size of the string (including null-terminator),
  /// the provided memory is filled with the string's contents, and a success status is returned.
  ///
  /// If the `size` parameter is less than the actual string's size and `out`
  /// is not nullptr, the value of `size` is set to the true size of the string
  /// and a failure status with error code ORT_INVALID_ARGUMENT is returned.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[out] out Memory location into which to write the UTF-8 null-terminated string representing the
  /// operator type.
  /// \param[in,out] size Pointer to the size of the `out` buffer. See above comments for details.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Char> out,
        ffi.Pointer<ffi.Size> size,
      )
    >
  >
  KernelInfo_GetOperatorType;

  /// \brief Get the opset version in which the given node's operator type was first defined from ::OrtKernelInfo.
  ///
  /// \param[in] info An instance of ::OrtKernelInfo.
  /// \param[out] since_version The opset version in which the node's operator type was first defined.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Int> since_version,
      )
    >
  >
  KernelInfo_GetOperatorSinceVersion;

  /// \brief Get the EP Interop API instance.
  ///
  /// Get the Interop API instance to work with external resources. This API provides functions
  /// for importing external GPU memory and semaphores for zero-copy sharing between ORT inference
  /// and other GPU workloads.
  ///
  /// \return Interop API struct instance.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Pointer<OrtInteropApi> Function()>
  >
  GetInteropApi;

  /// \brief Get the EP device assigned to each session output.
  ///
  /// Returns the OrtEpDevice assigned to each output of the session after graph partitioning.
  /// This allows validation that outputs are placed on the expected device for external resource sharing.
  ///
  /// The EP device for each output is determined by which execution provider will produce that output
  /// during inferencing. This information is useful for:
  /// - Validating that outputs will be placed on the expected device for external resource sharing
  /// - Deciding whether to use external memory handles for outputs
  ///
  /// \param[in] session The OrtSession instance to query.
  /// \param[out] outputs_ep_devices An array to be filled with the EP device for each output.
  /// The array must be allocated by the caller with space for
  /// OrtEpDevice* values for each output.
  /// The order is the same as returned by SessionGetOutputName.
  /// \param[in] num_outputs The number of outputs in the session. Must match SessionGetOutputCount.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Pointer<OrtEpDevice>> outputs_ep_devices,
        ffi.Size num_outputs,
      )
    >
  >
  SessionGetEpDeviceForOutputs;

  /// \brief Get the number of available hardware devices.
  ///
  /// Returns the count of hardware devices discovered on the system.
  /// Use this to allocate an array before calling GetHardwareDevices().
  ///
  /// \param[in] env The OrtEnv instance where device discovery results are stored.
  /// \param[out] num_devices The number of OrtHardwareDevice instances available.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Size> num_devices,
      )
    >
  >
  GetNumHardwareDevices;

  /// \brief Get the list of available hardware devices.
  ///
  /// Enumerates hardware devices available on the system.
  /// Populates a user-provided array with pointers to OrtHardwareDevice instances. The caller is responsible
  /// for allocating the array with sufficient space (use GetNumHardwareDevices() to get the count).
  ///
  /// The returned pointers reference internal ORT data structures that are discovered once at process
  /// startup and remain valid for the lifetime of the OrtEnv. The caller does not need to release these
  /// pointers, but should not use them after calling ReleaseEnv().
  ///
  /// \param[in] env The OrtEnv instance where device discovery results are stored.
  /// \param[out] devices User-allocated array to receive pointers to OrtHardwareDevice instances.
  /// The array must have space for at least num_devices elements.
  /// \param[in] num_devices The size of the user-allocated devices array.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Pointer<OrtHardwareDevice>> devices,
        ffi.Size num_devices,
      )
    >
  >
  GetHardwareDevices;

  /// \brief Check for known incompatibility issues between hardware device and a specific execution provider.
  ///
  /// This function checks for known incompatibility issues between the specified hardware device
  /// and a specific execution provider.
  /// If returned incompatibility details have non-zero reasons, it indicates the device is not compatible.
  /// However, if returned detail have reason == 0, it doesn't guarantee 100% compatibility for all models,
  /// as models may have specific requirements.
  ///
  /// Note: This method should only be called when the OrtEnv has been initialized with execution
  /// providers (after RegisterExecutionProviderLibrary is called).
  ///
  /// \param[in] env The OrtEnv instance with registered execution providers.
  /// \param[in] ep_name The name of the execution provider to check. Required and cannot be null or empty.
  /// \param[in] hw The hardware device to check for incompatibility.
  /// \param[out] details Compatibility details including reasons for incompatibility if any.
  /// Must be freed with OrtApi::ReleaseDeviceEpIncompatibilityDetails.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnv> env,
        ffi.Pointer<ffi.Char> ep_name,
        ffi.Pointer<OrtHardwareDevice> hw,
        ffi.Pointer<ffi.Pointer<OrtDeviceEpIncompatibilityDetails>> details,
      )
    >
  >
  GetHardwareDeviceEpIncompatibilityDetails;

  /// \brief Get the incompatibility reasons bitmask from OrtDeviceEpIncompatibilityDetails.
  ///
  /// \param[in] details The OrtDeviceEpIncompatibilityDetails instance to query.
  /// \param[out] reasons_bitmask Pointer to store the bitmask of incompatibility reasons.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtDeviceEpIncompatibilityDetails> details,
        ffi.Pointer<ffi.Uint32> reasons_bitmask,
      )
    >
  >
  DeviceEpIncompatibilityDetails_GetReasonsBitmask;

  /// \brief Get the notes from OrtDeviceEpIncompatibilityDetails.
  ///
  /// \param[in] details The OrtDeviceEpIncompatibilityDetails instance to query.
  /// \param[out] notes Pointer to the notes string. May be nullptr if no notes are available.
  /// The returned string is owned by the details object and should not be freed.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtDeviceEpIncompatibilityDetails> details,
        ffi.Pointer<ffi.Pointer<ffi.Char>> notes,
      )
    >
  >
  DeviceEpIncompatibilityDetails_GetNotes;

  /// \brief Get the execution provider error code from OrtDeviceEpIncompatibilityDetails.
  ///
  /// This allows Independent Hardware Vendors (IHVs) to define their own error codes
  /// to provide additional details about device incompatibility.
  ///
  /// \param[in] details The OrtDeviceEpIncompatibilityDetails instance to query.
  /// \param[out] error_code Pointer to store the EP-specific error code. A value of 0 indicates no error code was set.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtDeviceEpIncompatibilityDetails> details,
        ffi.Pointer<ffi.Int32> error_code,
      )
    >
  >
  DeviceEpIncompatibilityDetails_GetErrorCode;

  /// \brief Release an OrtDeviceEpIncompatibilityDetails instance.
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(ffi.Pointer<OrtDeviceEpIncompatibilityDetails> input)
    >
  >
  ReleaseDeviceEpIncompatibilityDetails;

  /// \brief Extract EP compatibility info from a precompiled model file.
  ///
  /// Parses the model file to extract the compatibility info string for a specific execution provider
  /// from the model's metadata properties. This is only applicable to models that have been precompiled
  /// for an EP (e.g., via OrtCompileApi). Standard ONNX models do not contain this information.
  ///
  /// The compatibility info string must be valid UTF-8 without embedded NUL characters.
  ///
  /// \note This API performs standalone model parsing, separate from session creation. This means
  /// the protobuf parsing cost is incurred here and again during session creation. It is intended
  /// for scenarios where applications need to check compatibility before deciding whether to proceed
  /// with session creation, such as providing early user feedback.
  ///
  /// \note This operation parses the full ONNX ModelProto from disk. For very large models, consider
  /// using GetCompatibilityInfoFromModelBytes with a pre-loaded buffer if the model is already in memory.
  ///
  /// The compatibility info can then be passed to GetModelCompatibilityForEpDevices to check if a
  /// precompiled model is compatible with the current system.
  ///
  /// \param[in] model_path Path to the ONNX model file.
  /// \param[in] ep_type The execution provider type string. Must be non-empty.
  /// Use OrtApi::EpDevice_EpName to get this value from an OrtEpDevice.
  /// \param[in] allocator Allocator to use for the output string. Use OrtApi::GetAllocatorWithDefaultOptions.
  /// \param[out] compatibility_info Output pointer to the compatibility info string.
  /// Returns nullptr if no compatibility info exists for the specified EP.
  /// Caller must free with OrtApi::AllocatorFree when non-null.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Char> model_path,
        ffi.Pointer<ffi.Char> ep_type,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> compatibility_info,
      )
    >
  >
  GetCompatibilityInfoFromModel;

  /// \brief Extract EP compatibility info from precompiled model bytes in memory.
  ///
  /// Same as GetCompatibilityInfoFromModel but reads from a memory buffer instead of a file.
  /// Useful when precompiled models are loaded from encrypted storage, network, or other non-file sources.
  ///
  /// \note This API performs standalone model parsing, separate from session creation. This means
  /// the protobuf parsing cost is incurred here and again during session creation. It is intended
  /// for scenarios where applications need to check compatibility before deciding whether to proceed
  /// with session creation, such as providing early user feedback.
  ///
  /// \param[in] model_data Pointer to the model data in memory.
  /// \param[in] model_data_length Size of the model data in bytes.
  /// \param[in] ep_type The execution provider type string. Must be non-empty.
  /// \param[in] allocator Allocator to use for the output string. Use OrtApi::GetAllocatorWithDefaultOptions.
  /// \param[out] compatibility_info Output pointer to the compatibility info string.
  /// Returns nullptr if no compatibility info exists for the specified EP.
  /// Caller must free with OrtApi::AllocatorFree when non-null.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Void> model_data,
        ffi.Size model_data_length,
        ffi.Pointer<ffi.Char> ep_type,
        ffi.Pointer<OrtAllocator> allocator,
        ffi.Pointer<ffi.Pointer<ffi.Char>> compatibility_info,
      )
    >
  >
  GetCompatibilityInfoFromModelBytes;

  /// \brief Create an OrtEnv instance with the given options.
  ///
  /// \note Invoking this function will return the same instance of the environment as that returned by a previous call
  /// to another env creation function; all arguments to this function will be ignored.
  ///
  /// \param[in] options The OrtEnvCreationOptions instance that contains creation options.
  /// \param[out] out Output parameter set to the new OrtEnv instance. Must be freed with OrtApi::ReleaseEnv.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEnvCreationOptions> options,
        ffi.Pointer<ffi.Pointer<OrtEnv>> out,
      )
    >
  >
  CreateEnvWithOptions;

  /// \brief Get information about the subgraphs assigned to each execution provider (EP) and the nodes within.
  ///
  /// Each returned OrtEpAssignedSubgraph instance contains details of the subgraph/nodes assigned to an execution
  /// provider, including the execution provider's name, and the name, domain, and operator type for every node.
  ///
  /// For compiling execution providers, a single OrtEpAssignedSubgraph instance contains information about the
  /// nodes that are fused and compiled within a single subgraph assigned to the execution provider.
  ///
  /// For execution providers that use kernel registration (e.g., CPU EP), each node with a registered kernel is
  /// contained in its own OrtEpAssignedSubgraph instance.
  ///
  /// \note The caller must enable the collection of this information by enabling the session
  /// configuration entry "session.record_ep_graph_assignment_info" during session creation.
  /// Refer to onnxruntime_session_options_config_keys.h. Otherwise, if not enabled, this function returns a
  /// status with error code ORT_FAIL.
  ///
  /// \note The information reported by this function is obtained immediately after running basic optimizations on the
  /// original graph if the session optimization level is set to ORT_ENABLE_BASIC or higher. If the session
  /// optimization level is set to ORT_DISABLE_ALL, only minimal/required optimizations are run before
  /// the information is collected.
  ///
  /// \param[in] session The OrtSession instance.
  /// \param[out] ep_subgraphs Output parameter set to the array of OrtEpAssignedSubgraph instances.
  /// \param[out] num_ep_subgraphs Output parameter set to the number of elements in the `ep_subgraphs` array.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtSession> session,
        ffi.Pointer<ffi.Pointer<ffi.Pointer<OrtEpAssignedSubgraph>>>
        ep_subgraphs,
        ffi.Pointer<ffi.Size> num_ep_subgraphs,
      )
    >
  >
  Session_GetEpGraphAssignmentInfo;

  /// \brief Get the name of the execution provider to which the subgraph was assigned.
  ///
  /// \param[in] ep_subgraph The OrtEpAssignedSubgraph instance.
  /// \param[out] out Output parameter set to the execution provider's name as a UTF-8 null-terminated string.
  /// Owned by the OrtEpAssignedSubgraph instance (do not free).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpAssignedSubgraph> ep_subgraph,
        ffi.Pointer<ffi.Pointer<ffi.Char>> out,
      )
    >
  >
  EpAssignedSubgraph_GetEpName;

  /// \brief Get the nodes in a subgraph assigned to a specific execution provider.
  ///
  /// \param[in] ep_subgraph The OrtEpAssignedSubgraph instance.
  /// \param[out] ep_nodes Output parameter set to the array of OrtEpAssignedNode instances.
  /// \param[out] num_ep_nodes Output parameter set to the number of OrtEpAssignedNode instance returned.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpAssignedSubgraph> ep_subgraph,
        ffi.Pointer<ffi.Pointer<ffi.Pointer<OrtEpAssignedNode>>> ep_nodes,
        ffi.Pointer<ffi.Size> num_ep_nodes,
      )
    >
  >
  EpAssignedSubgraph_GetNodes;

  /// \brief Get the name of the node assigned to an execution provider.
  ///
  /// \param[in] ep_node The OrtEpAssignedNode instance.
  /// \param[out] out Output parameter set to the node's name as a UTF-8 null-terminated string.
  /// Owned by the OrtEpAssignedNode instance (do not free).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpAssignedNode> ep_node,
        ffi.Pointer<ffi.Pointer<ffi.Char>> out,
      )
    >
  >
  EpAssignedNode_GetName;

  /// \brief Get the domain of the node assigned to an execution provider.
  ///
  /// \param[in] ep_node The OrtEpAssignedNode instance.
  /// \param[out] out Output parameter set to the node's domain as a UTF-8 null-terminated string.
  /// Owned by the OrtEpAssignedNode instance (do not free).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpAssignedNode> ep_node,
        ffi.Pointer<ffi.Pointer<ffi.Char>> out,
      )
    >
  >
  EpAssignedNode_GetDomain;

  /// \brief Get the operator type of the node assigned to an execution provider.
  ///
  /// \param[in] ep_node The OrtEpAssignedNode instance.
  /// \param[out] out Output parameter set to the node's operator type as a UTF-8 null-terminated string.
  /// Owned by the OrtEpAssignedNode instance (do not free).
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtEpAssignedNode> ep_node,
        ffi.Pointer<ffi.Pointer<ffi.Char>> out,
      )
    >
  >
  EpAssignedNode_GetOperatorType;

  /// \brief Sets OrtSyncStream for the run options
  ///
  /// OrtSyncStream is used to synchronize the execution of the model run for the device
  /// of the stream. It overrides the existing stream for the duration of the Run().
  /// The stream instance must be alive for the duration of the Run() call.
  ///
  /// \param[in] options
  /// \param[in] sync_stream The synchronization stream. Pass nullptr to clear previous setting.
  ///
  /// \since 1.24
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<OrtRunOptions> options,
        ffi.Pointer<OrtSyncStream> sync_stream,
      )
    >
  >
  RunOptionsSetSyncStream;

  /// \brief Get the element data type and shape for an OrtValue that represents a Tensor (scalar, dense, or sparse).
  ///
  /// \note This function is an alternative to ::GetTensorTypeAndShape() that does not allocate a new array for
  /// the shape data. The OrtValue instance's internal shape data is returned directly.
  ///
  /// \note Returns an error if the underlying OrtValue is not a Tensor.
  ///
  /// \param[in] value The OrtValue instance.
  /// \param[out] elem_type Output parameter set to the tensor element data type.
  /// \param[out] shape_data Output parameter set to the OrtValue instance's internal shape data array.
  /// For a scalar, `shape_data` is NULL and `shape_data_count` is 0.
  /// Must not be released as it is owned by the OrtValue instance. This pointer becomes invalid
  /// when the OrtValue is released or if the underlying shape data is updated or reallocated.
  /// \param[out] shape_data_count Output parameter set to the number of elements in `shape_data`.
  /// `shape_data_count` is 0 for a scalar.
  ///
  /// \snippet{doc} snippets.dox OrtStatus Return Value
  ///
  /// \since Version 1.24.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtValue> value,
        ffi.Pointer<ffi.UnsignedInt> elem_type,
        ffi.Pointer<ffi.Pointer<ffi.Int64>> shape_data,
        ffi.Pointer<ffi.Size> shape_data_count,
      )
    >
  >
  GetTensorElementTypeAndShapeDataReference;
}

/// Specifies some characteristics of inputs/outputs of custom ops:
/// Specify if the inputs/outputs are one of:
/// 1) Non-optional (input/output must be present in the node)
/// 2) Optional (input/output may be absent in the node)
/// 3) Variadic: A variadic input or output specifies N (i.e., the minimum arity) or more operands.
/// Only the last input or output of a custom op may be marked as variadic.
/// The homogeneity of the variadic input or output determines whether all operands must be of the same
/// tensor element type.
enum OrtCustomOpInputOutputCharacteristic {
  INPUT_OUTPUT_REQUIRED(0),
  INPUT_OUTPUT_OPTIONAL(1),
  INPUT_OUTPUT_VARIADIC(2);

  final int value;
  const OrtCustomOpInputOutputCharacteristic(this.value);

  static OrtCustomOpInputOutputCharacteristic fromValue(int value) =>
      switch (value) {
        0 => INPUT_OUTPUT_REQUIRED,
        1 => INPUT_OUTPUT_OPTIONAL,
        2 => INPUT_OUTPUT_VARIADIC,
        _ => throw ArgumentError(
          'Unknown value for OrtCustomOpInputOutputCharacteristic: $value',
        ),
      };
}

/// The OrtCustomOp structure defines a custom op's schema and its kernel callbacks. The callbacks are filled in by
/// the implementor of the custom op.
final class OrtCustomOp extends ffi.Struct {
  /// Must be initialized to ORT_API_VERSION
  @ffi.Uint32()
  external int version;

  /// This callback creates the kernel, which is a user defined
  /// parameter that is passed to the Kernel* callbacks below. It is
  /// recommended to use CreateKernelV2 which allows for a safe error
  /// propagation by returning an OrtStatusPtr.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Void> Function(
        ffi.Pointer<OrtCustomOp> op,
        ffi.Pointer<OrtApi> api,
        ffi.Pointer<OrtKernelInfo> info,
      )
    >
  >
  CreateKernel;

  /// Returns the name of the op
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtCustomOp> op)
    >
  >
  GetName;

  /// Returns the type of the execution provider, return nullptr to use CPU execution provider
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Pointer<ffi.Char> Function(ffi.Pointer<OrtCustomOp> op)
    >
  >
  GetExecutionProviderType;

  /// Returns the count and types of the input & output tensors
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.UnsignedInt Function(ffi.Pointer<OrtCustomOp> op, ffi.Size index)
    >
  >
  GetInputType;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Size Function(ffi.Pointer<OrtCustomOp> op)>
  >
  GetInputTypeCount;

  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.UnsignedInt Function(ffi.Pointer<OrtCustomOp> op, ffi.Size index)
    >
  >
  GetOutputType;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Size Function(ffi.Pointer<OrtCustomOp> op)>
  >
  GetOutputTypeCount;

  /// Perform a computation step.  It is recommended to use
  /// KernelComputeV2 which allows for a safe error propagation by
  /// returning an OrtStatusPtr.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<ffi.Void> op_kernel,
        ffi.Pointer<OrtKernelContext> context,
      )
    >
  >
  KernelCompute;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Void Function(ffi.Pointer<ffi.Void> op_kernel)>
  >
  KernelDestroy;

  /// Returns the characteristics of the input & output tensors
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.UnsignedInt Function(ffi.Pointer<OrtCustomOp> op, ffi.Size index)
    >
  >
  GetInputCharacteristic;

  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.UnsignedInt Function(ffi.Pointer<OrtCustomOp> op, ffi.Size index)
    >
  >
  GetOutputCharacteristic;

  /// Returns the memory type of the input tensors. This API allows the custom op
  /// to place the inputs on specific devices. By default, it returns
  /// OrtMemTypeDefault, which means the input is placed on the default device for
  /// the execution provider. If the inputs need to be with different memory types,
  /// this function can be overridden to return the specific memory types.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Int Function(ffi.Pointer<OrtCustomOp> op, ffi.Size index)
    >
  >
  GetInputMemoryType;

  /// Returns the minimum number of input arguments expected for the variadic input.
  /// Applicable only for custom ops that have a variadic input.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Int Function(ffi.Pointer<OrtCustomOp> op)>
  >
  GetVariadicInputMinArity;

  /// Returns true (non-zero) if all arguments of a variadic input have to be of the same type (homogeneous),
  /// and false (zero) otherwise.
  /// Applicable only for custom ops that have a variadic input.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Int Function(ffi.Pointer<OrtCustomOp> op)>
  >
  GetVariadicInputHomogeneity;

  /// Returns the minimum number of output values expected for the variadic output.
  /// Applicable only for custom ops that have a variadic output.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Int Function(ffi.Pointer<OrtCustomOp> op)>
  >
  GetVariadicOutputMinArity;

  /// Returns true (non-zero) if all outputs values of a variadic output have to be of the same type (homogeneous),
  /// and false (zero) otherwise.
  /// Applicable only for custom ops that have a variadic output.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Int Function(ffi.Pointer<OrtCustomOp> op)>
  >
  GetVariadicOutputHomogeneity;

  /// Create the kernel state which is passed to each compute call.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCustomOp> op,
        ffi.Pointer<OrtApi> api,
        ffi.Pointer<OrtKernelInfo> info,
        ffi.Pointer<ffi.Pointer<ffi.Void>> kernel,
      )
    >
  >
  CreateKernelV2;

  /// Perform the computation step.
  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<ffi.Void> op_kernel,
        ffi.Pointer<OrtKernelContext> context,
      )
    >
  >
  KernelComputeV2;

  external ffi.Pointer<
    ffi.NativeFunction<
      OrtStatusPtr Function(
        ffi.Pointer<OrtCustomOp>,
        ffi.Pointer<OrtShapeInferContext>,
      )
    >
  >
  InferOutputShapeFn;

  /// Get start range
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Int Function(ffi.Pointer<OrtCustomOp> op)>
  >
  GetStartVersion;

  external ffi.Pointer<
    ffi.NativeFunction<ffi.Int Function(ffi.Pointer<OrtCustomOp> op)>
  >
  GetEndVersion;

  /// Get the inplace_map that defines which output can reuse which input
  /// Callers will provide 2 raw int* and pass in their address, this function will fill these 2 arrays
  /// when return, output (*output_index)[i] may reuse the input (*input_index[i]).
  /// The return value is the size of these 2 arrays.
  /// Callers are responsible to delete these 2 arrays after use by calling OrtCustomOp::ReleaseMayInplace().
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Size Function(
        ffi.Pointer<ffi.Pointer<ffi.Int>> input_index,
        ffi.Pointer<ffi.Pointer<ffi.Int>> output_index,
      )
    >
  >
  GetMayInplace;

  /// Release the pointer input_index and output_index allocated from GetMayInplace() function.
  /// If GetMayInplace() is defined, this function MUST be defined as well.
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<ffi.Int> input_index,
        ffi.Pointer<ffi.Int> output_index,
      )
    >
  >
  ReleaseMayInplace;

  /// Same as GetMayInplace() and ReleaseMayInplace()
  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Size Function(
        ffi.Pointer<ffi.Pointer<ffi.Int>> input_index,
        ffi.Pointer<ffi.Pointer<ffi.Int>> output_index,
      )
    >
  >
  GetAliasMap;

  external ffi.Pointer<
    ffi.NativeFunction<
      ffi.Void Function(
        ffi.Pointer<ffi.Int> input_index,
        ffi.Pointer<ffi.Int> output_index,
      )
    >
  >
  ReleaseAliasMap;
}

/// \brief Reasons why an execution provider might not be compatible with a device
enum OrtDeviceEpIncompatibilityReason {
  OrtDeviceEpIncompatibility_NONE(0),
  OrtDeviceEpIncompatibility_DRIVER_INCOMPATIBLE(1),
  OrtDeviceEpIncompatibility_DEVICE_INCOMPATIBLE(2),
  OrtDeviceEpIncompatibility_MISSING_DEPENDENCY(4),
  OrtDeviceEpIncompatibility_UNKNOWN(-2147483648);

  final int value;
  const OrtDeviceEpIncompatibilityReason(this.value);

  static OrtDeviceEpIncompatibilityReason fromValue(int value) =>
      switch (value) {
        0 => OrtDeviceEpIncompatibility_NONE,
        1 => OrtDeviceEpIncompatibility_DRIVER_INCOMPATIBLE,
        2 => OrtDeviceEpIncompatibility_DEVICE_INCOMPATIBLE,
        4 => OrtDeviceEpIncompatibility_MISSING_DEPENDENCY,
        -2147483648 => OrtDeviceEpIncompatibility_UNKNOWN,
        _ => throw ArgumentError(
          'Unknown value for OrtDeviceEpIncompatibilityReason: $value',
        ),
      };
}

/// \brief The helper interface to get the right version of OrtApi
///
/// Get a pointer to this structure through ::OrtGetApiBase
final class OrtApiBase extends ffi.Struct {
  /// \brief Get a pointer to the requested version of the ::OrtApi
  ///
  /// \param[in] version Must be ::ORT_API_VERSION
  /// \return The ::OrtApi for the version requested, nullptr will be returned if this version is unsupported, for example when using a runtime
  /// older than the version created with this header file.
  ///
  /// One can call GetVersionString() to get the version of the Onnxruntime library for logging
  /// and error reporting purposes.
  external ffi.Pointer<
    ffi.NativeFunction<ffi.Pointer<OrtApi> Function(ffi.Uint32 version)>
  >
  GetApi;

  /// \brief Returns a null terminated string of the version of the Onnxruntime library (eg: "1.8.1")
  ///
  /// \return UTF-8 encoded version string. Do not deallocate the returned buffer.
  external ffi.Pointer<ffi.NativeFunction<ffi.Pointer<ffi.Char> Function()>>
  GetVersionString;
}

typedef RegisterCustomOpsFnFunction =
    ffi.Pointer<OrtStatus> Function(
      ffi.Pointer<OrtSessionOptions> options,
      ffi.Pointer<OrtApiBase> api,
    );
typedef RegisterCustomOpsFn =
    ffi.Pointer<ffi.NativeFunction<RegisterCustomOpsFnFunction>>;

/// \brief Flags representing options to enable when compiling a model.
enum OrtCompileApiFlags {
  /// Default. Do not enable any additional compilation options.
  OrtCompileApiFlags_NONE(0),

  /// Force compilation to return an error (ORT_FAIL) if no nodes were compiled.
  /// Otherwise, a model with basic optimizations (ORT_ENABLE_BASIC) is still generated by default.
  OrtCompileApiFlags_ERROR_IF_NO_NODES_COMPILED(1),

  /// Force compilation to return an error (ORT_FAIL) if a file with the same filename as the output model exists.
  /// Otherwise, compilation will automatically overwrite the output file if it exists.
  OrtCompileApiFlags_ERROR_IF_OUTPUT_FILE_EXISTS(2);

  final int value;
  const OrtCompileApiFlags(this.value);

  static OrtCompileApiFlags fromValue(int value) => switch (value) {
    0 => OrtCompileApiFlags_NONE,
    1 => OrtCompileApiFlags_ERROR_IF_NO_NODES_COMPILED,
    2 => OrtCompileApiFlags_ERROR_IF_OUTPUT_FILE_EXISTS,
    _ => throw ArgumentError('Unknown value for OrtCompileApiFlags: $value'),
  };
}

const int ORT_API_VERSION = 24;

const String ORT_FILE = '/tmp/SDCGXU/temp_for_macros.hpp';
